(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{114:function(e,t){},12:function(e,t,n){e.exports={hoveredMode:"hoverHighlight_hoveredMode__1R18t",hoveredGame:"hoverHighlight_hoveredGame__3lWju"}},171:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(14),l=n.n(r),i=(n(85),n(9)),s=n(78),c=n(4),m=n(69),d=n.n(m),u=n(175),g=n(1),h=n(15),p=n(24),f=n(174),y=n(18),b=n(46);const v=e=>Math.round(100*(e+Number.EPSILON))/100,k=(e,t)=>{if(!e)return"-";const n=(new Date).getTime(),a=new Date(e).getTime(),o=Math.floor((n-a)/1e3),r=Math.floor(o/2592e3);if(r>1)return r+(t?" months":"mo")+" ago";if(1===r)return"1"+(t?" month":"mo")+" ago";const l=Math.floor(o/86400);if(l>1)return l+(t?" days":"d")+" ago";if(1===l)return"1"+(t?" day":"d")+" ago";const i=Math.floor(o/3600);if(i>1)return i+(t?" hours":"h")+" ago";if(1===i)return"1"+(t?" hour":"h")+" ago";const s=Math.floor(o/60);return s>1?s+(t?" minutes":"m")+" ago":1===s?"1"+(t?" minute":"m")+" ago":o>1?o+(t?" seconds":"s")+" ago":1===o?o+(t?" second":"s")+" ago":"Just now"},w=e=>Object(b.b)({dictionaries:[b.a],length:1}).slice(0,e),E=e=>("elo_"+Math.random().toString(36).slice(2)).slice(0,e);var C=n(70),T=n.n(C),S={white:"#ffffff",black:"#000000",redLighten4:"#ffcdd2",redLighten3:"#ef9a9a",redLighten2:"#e57373",redLighten1:"#ef5350",red:"#f44336",redDarken1:"#e53935",redDarken2:"#d32f2f",redDarken3:"#c62828",redDarken4:"#b71c1c",tealLighten2:"#4db6ac",tealLighten1:"#26a69a",teal:"#009688",tealDarken1:"#00897b",tealDarken2:"#00796b",tealDarken4:"#004d40",indigoLighten4:"#c5cae9",indigoLighten3:"#9fa8da",indigoLighten2:"#7986cb",indigoLighten1:"#5c6bc0",indigo:"#3f51b5",indigoDarken2:"#303f9f",indigoDarken3:"#283593",indigoDarken4:"#1a237e",amberLighten3:"#ffe082",amberLighten2:"#ffd54f",amberLighten1:"#ffca28",amber:"#ffc107",amberDarken1:"#ffb300",amberDarken2:"#ffa000",orangeLighten2:"#ffb74d",yellowLighten5:"#fffde7",yellowLighten4:"#fff9c4",yellowLighten2:"#fff176",yellowLighten1:"#ffc176",yellowDarken1:"#fdd835",yellowDarken2:"#fbc02d",yellowDarken4:"#f57f17",customBlueLighten1:"#6583C3",customBlue:"#5876B6",customBlueDarken1:"#4866A6",customBlueDarken2:"#153373",customBlueDarken3:"#355393",customGrayLighten1:"#eaeaea",customGray:"#d2d2d2",customGrayDarken1:"#cccccc",customGrayDarken2:"#999999",customGrayDarken3:"#666666",customGrayDarken4:"#454545",customGrayDarken5:"#313131",lightOrange:"#fbe4D6",customLightYellow:"rgb(240,240,170)",customDarkYellow:"#656505",chessSquareLight:"#f0d9b5",chessSquareDark:"#b58863"},x={background:[S.teal,S.tealDarken4],backgroundImage:["none","none"],container:[S.tealDarken2,"keep"],containerAlternate:[S.teal,S.tealDarken4],button:[S.tealLighten2,"keep"],importantButton:[S.red,"keep"],header:[S.redLighten1,S.redDarken4],headerButton:[S.redDarken1,"keep"],recentGamesBackground:[S.redLighten2,S.redDarken2],recentGamesAlternate:[S.redLighten1,S.redDarken1],selectedTab:[S.tealDarken2,"keep"],tab:[S.tealDarken1,S.tealDarken3],disabledTab:[S.customGrayDarken1,S.customGrayDarken2],disabledTabText:[S.customGrayDarken2,S.customGrayDarken3]},O={background:[S.customBlueDarken3,"keep"],backgroundImage:["blueBgLight","blueBgDark"],container:[S.customBlueDarken3,S.customBlueDarken2],containerAlternate:[S.customBlueDarken1,"keep"],button:[S.customBlueLighten1,"keep"],importantButton:[S.red,"keep"],header:[S.customBlueDarken3,S.customBlueDarken2],headerButton:[S.customBlueLighten1,"keep"],recentGamesBackground:[S.customBlueLighten1,S.customBlueDarken1],recentGamesAlternate:[S.customBlue,"keep"],selectedTab:[S.customBlueDarken3,S.customBlueDarken2],tab:[S.customBlue,S.customBlueDarken1],disabledTab:[S.customGrayDarken1,S.customGrayDarken2],disabledTabText:[S.customGrayDarken2,S.customGrayDarken3]},P={ground:[S.customGray,S.customGrayDarken4],emptyWall:[S.customGrayLighten1,S.customGrayDarken5],pillar:[S.customGrayDarken1,S.customGrayDarken4],hoveredGround:[S.lightOrange,"flip"],hoveredWall:["#f1bfa0","flip"],player1:[S.red,S.redLighten1],player2:[S.indigo,S.indigoLighten1],timer1:[S.redLighten1,"keep"],timer2:[S.indigoLighten1,"keep"],lowTime:[S.orangeLighten2,"keep"],wall1:[S.red,S.redLighten1],wall2:[S.indigo,S.indigoLighten1],goalBackground1:[S.redLighten4,S.redDarken2],goalBackground2:[S.indigoLighten4,S.indigoDarken2],combinedGoalBackground:[S.yellowLighten1,S.yellowDarken1],goalToken:[S.customGrayLighten1,S.customGrayDarken5],ghost1:[S.redLighten4,S.redLighten4],ghost2:[S.indigoLighten4,S.indigoLighten4],ghostWall1:[S.redLighten3,S.redLighten2],ghostWall2:[S.indigoLighten3,S.indigoLighten4],traceGround:[S.customLightYellow,S.customDarkYellow],lastMoveTokenBorder:[S.customLightYellow,"yellow"],lastMoveWallBorder:[S.customLightYellow,S.yellowDarken1],coord:[S.white,S.black],move1:[S.redLighten2,"keep"],move2:[S.indigoLighten2,"keep"],currentMove:[S.amberDarken1,"keep"]},D=function(e,t,n){void 0===e[t]&&console.error("theme ".concat(e," does not have element ").concat(t));var a=e[t][0];if(!n)return a;var o=e[t][1];return"keep"===o?a:"flip"===o?T()(a):o},L=function(e,t,n){return"green"===e?D(x,t,n):"blue"===e?D(O,t,n):"monochromeBoard"===e?D(P,t,n):(console.error("unknown theme "+e),"#00FF00")},R=n(71),G=n.n(R),M=n(72),I=n.n(M);function N(e){return[[0,0],[0,e[1]-1],[e[0]-1,e[1]-1],[e[0]-1,0]]}var j=function(e){var t=N(e);return[t[0],t[1]]},B=function(e){var t=N(e);return[t[2],t[3]]},A=[15,19],H={dims:A,startPos:j(A),goalPos:B(A)},z=[19,23],W=37,F=12,_=23,q=10,V=function(e,t){t&&0!==t||(t=2500),Object(p.c)(e,{autoClose:t,hideProgressBar:!0,transition:p.a,pauseOnFocusLoss:!1})},Y=function(e){var t=e.text,n=e.tooltip,a=e.onClick,r=e.menuTheme,l=e.isDarkModeOn;return o.a.createElement(g.Button,{style:{backgroundColor:L(r,"button",l),color:"#FFFFFF"},node:"button",waves:"light",onClick:a,tooltip:n},t)},$=n(73),J=n.n($),U=(n(162),n(74)),Q=n.n(U),K=function(e){var t=e.label,n=e.min,a=e.max,r=e.value,l=e.onChange,i=e.internalToDisplay,s=e.displayToInternal;e.menuTheme,e.isDarkModeOn;return o.a.createElement("div",null,o.a.createElement("span",{style:{fontSize:"15px"}},t),o.a.createElement(J.a,{style:{marginBottom:"12px"},range:{min:i(n),max:i(a)},start:[i(r)],step:1,tooltips:[Q()({decimals:0})],onChange:function(e){l(s(e))}}))};const X=0,Z=1,ee=2,te=e=>(e+1)/2,ne=e=>2*e-1,ae=e=>e/2+1,oe=e=>2*(e-1),re=(e,t,n)=>n*(e[0]-1)/2+t*(e[0]+1)/2,le=(e,t,n)=>n*(e[1]-1)/2+t*(e[1]+1)/2,ie=(e,t)=>{const[n,a]=[Math.abs(e[0]-t[0]),Math.abs(e[1]-t[1])];return(n+a)/2},se=e=>[ie(e.startPos[0],e.goalPos[0]),ie(e.startPos[1],e.goalPos[1])],ce=e=>v(e.duration)+"+"+v(e.increment);function me(e){return e[0]%2===0&&e[1]%2===0?X:e[0]%2!==e[1]%2?Z:ee}function de(e,t){return e[0]===t[0]&&e[1]===t[1]}function ue(e){let t=[];for(let n=0;n<e[0];n++){t[n]=[];for(let a=0;a<e[1];a++)t[n][a]=0}return t}function ge(e,t){return e[0]>=0&&e[0]<t[0]&&e[1]>=0&&e[1]<t[1]}function he(e,t){return me(t)===Z&&0!==e[t[0]][t[1]]}function pe(e,t){const n=function(e){return[e.length,e[0].length]}(e);if(me(t)!==X)return[];const a=[[0,1],[0,-1],[1,0],[-1,0]],o=[],[r,l]=[t[0],t[1]];for(let i=0;i<a.length;i++){const[t,s]=[a[i][0],a[i][1]],c=[r+t,l+s],m=[r+2*t,l+2*s];ge(m,n)&&!he(e,c)&&o.push(m)}return o}function fe(e,t,n){if(de(t,n))return 0;const a=e[0].length,o=e=>e[0]*a+e[1],r=[];let l=0;r.push(t);const i=new Map;for(i.set(o(t),0);l<r.length;){const t=r[l];l++;const a=pe(e,t);for(let e=0;e<a.length;e++){let l=a[e];if(!i.has(o(l))){if(i.set(o(l),i.get(o(t))+1),de(l,n))return i.get(o(l));r.push(l)}}}return-1}function ye(e,t,n,a){if(de(t,n))return 0;const o=e[0].length,r=e=>e[0]*o+e[1],l=[];let i=0;l.push(t);const s=new Map;for(s.set(r(t),0);i<l.length;){const t=l[i];i++;const o=s.get(r(t));if(o>a)return!1;const c=pe(e,t);for(let e=0;e<c.length;e++){let t=c[e];if(!s.has(r(t))){if(de(t,n))return o+1<=a;s.set(r(t),o+1),l.push(t)}}}return!1}function be(e,t,n){return-1!==fe(e,t,n)}function ve(e,t,n,a){if(he(e,a))return!1;e[a[0]][a[1]]=1;var o=function(e,t,n){for(let a=0;a<t.length;a++)if(!be(e,t[a],n[a]))return!1;return!0}(e,t,n);return e[a[0]][a[1]]=0,o}function ke(e){return 18===e[0]?"X":""+(2+e[0])/2}function we(e){return String.fromCharCode(97+e[1]/2)}function Ee(e){if(me(e)===X)return we(e)+ke(e);return e[1]%2===1?we([e[0],e[1]-1])+we([e[0],e[1]+1])+ke(e):we(e)+ke([e[0]+1,e[1]])+ke([e[0]-1,e[1]])}var Ce=function(e){var t=e.label,n=e.min,a=e.max,r=e.value,l=e.onChange;e.menuTheme,e.isDarkModeOn;return o.a.createElement(K,{label:t,min:n,max:a,value:r,onChange:l,internalToDisplay:ae,displayToInternal:oe})},Te=function(e){var t=e.label,n=e.min,a=e.max,r=e.value,l=e.onChange;e.menuTheme,e.isDarkModeOn;return o.a.createElement(K,{label:t,min:n,max:a,value:r,onChange:l,internalToDisplay:te,displayToInternal:ne})};const Se=o.a.createElement("div",null,o.a.createElement("h6",null,"This is the lobby. From here, you can create games that your friends can join, or join a friend's game."),o.a.createElement("h6",null,"When you create a game, you can choose the ",o.a.createElement("em",null,"duration")," (per player) and a time ",o.a.createElement("em",null,"increment")," that is added to each player after they move, among other settings. Once you create a game, a ",o.a.createElement("em",null,"join code")," ",'will appear at the top. Share this code with your friend to play with them. In addition, if you select the "Public" game option, anyone will be able to see and join your game.'),o.a.createElement("h6",null,"You can find public games to join in the ",o.a.createElement("em",null,"Open Challenges")," tab in the lobby. To join a private game from a friend, write the code they give you in the box next to the ",o.a.createElement("em",null,"Join Game")," button and click it."),o.a.createElement("h6",null,"To get a feel for the game, you can watch some of the recent games listed in the ",o.a.createElement("em",null,"Recente Games")," tab in the lobby."),o.a.createElement("h6",null,"A random ",o.a.createElement("em",null,"player name")," has been chosen for you, but you can change it. You can also choose the look of your token.")),xe=o.a.createElement("div",null,o.a.createElement("h6",null,"Wallwars is an online 2-player strategy board game. The player who gets to their goal before first wins. You can place walls to reshape the terrain to your advantage."),o.a.createElement("h6",null,"WallWars is inspired by board games like Blockade and Quoridor. The main difference is that in WallWars there is no limit to how many walls you can place, and moves are more flexible (for instance, you can move and place a wall in the same turn)."),o.a.createElement("h6",null,"The source code is available at"," ",o.a.createElement("a",{href:"https://github.com/nmamano/WallWars",target:"_blank",rel:"noopener noreferrer"},"github.com/nmamano/WallWars"))),Oe=o.a.createElement("div",null,o.a.createElement("h6",null,o.a.createElement("b",null,"WARNING:")," do NOT use a password that you use in another website as your ELO id. Your ELO id is not shown to other players, but it is also not treated securely like a password should."),o.a.createElement("h6",null,"ELO ratings are a system used to measure the strength of players based on their game record. Players gain ELO points for winning games and lose ELO points for losing games. How many ELO points you gain or lose depends on the ELO ratings of the opponent."),o.a.createElement("h6",null,"Since WallWars does not have an account system, ELO ratings cannot be linked to player accounts. Instead, ELO ids allow players to keep their ELO ratings across sessions and devices. All games played with the same ELO id count toward the same ELO ratings, even if the player name changes."),o.a.createElement("h6",null,"The lobby has an ELO ranking. The ELO rating for each ELO id appears in the ranking. However, the ELO id itself is secret. Instead, the last name player used with that ELO id is shown. If you want to be ranked fairly, always use the same ELO id when playing (and, conversely, if you do not want a game to count towards your rating, you can leave the ELO id empty)."),o.a.createElement("h6",null,"WallWars saves your ELO id in a cookie so that next time you play, it will automatically be filled for you. However, in case the cookie is deleted, if you care about your rating, it is strongly recommended to write down your ELO id outside the WallWars website. You will also need to remember your ELO id if you want to use it in a different device or browser."),o.a.createElement("h6",null,"The ELO id can be anything, so you can change it to something that is easy to remember. However, it should not be easy to guess or use by chance by other players (like your name), or they could affect your ELO rating.")),Pe=["school","default","face","outlet","mood","mood_bad","child_care","pets","whatshot","toys","spa","stop","star","lens","favorite","visibility","group_work","flare","ac_unit","camera","casino","directions_boat","directions_bus","directions_car","event_seat","adb","bug_report"];var De=({clientParams:e,isLargeScreen:t,handlePlayerName:n,handleDuration:r,handleIncrement:l,handleIsPublic:i,handleNumRows:s,handleNumCols:c,handleShowMoreOptions:m,handleStartPos:d,handleGoalPos:u,handleJoinCode:h,handleCreateGame:p,handleJoinGame:f,handleRefreshName:y,handleToken:b,handleEloId:v})=>{const k=e.menuTheme,w=e.isDarkModeOn,E=e.showMoreOptions,C=e.boardSettings;Object(a.useEffect)(()=>(window.addEventListener("keydown",T),()=>{window.removeEventListener("keydown",T)}));const T=({key:t})=>{"Enter"===t&&(e.joinCode.length>0?f():(V("Created new game",5e3),p()))},S=o.a.createElement("div",{style:{fontSize:"30px"}},o.a.createElement("i",{className:"material-icons white-text",style:{height:"100%"}},"face"),t?" / ":"/",o.a.createElement("i",{className:"material-icons white-text",style:{height:"100%"}},"outlet"));return o.a.createElement("div",{className:"container",style:{marginTop:"2rem",backgroundColor:L(k,"container",w)}},o.a.createElement(g.Row,{className:"valign-wrapper"},o.a.createElement(g.Col,{className:"center",s:4,m:4},o.a.createElement("span",{style:{fontSize:"23px"}},t?"Your name:":"Name:")),o.a.createElement(g.Col,{s:6,m:3},o.a.createElement(g.TextInput,{id:"nameInput",value:e.playerName,onChange:e=>{n(e.target.value)}})),o.a.createElement(g.Col,{s:1,m:1},o.a.createElement(g.Button,{node:"button",waves:"light",small:!0,floating:!0,style:{color:"white",backgroundColor:L(k,"button",w)},icon:o.a.createElement(g.Icon,null,"refresh"),onClick:y,tooltip:"Get a new name"})),o.a.createElement(g.Col,{s:1,m:4})),o.a.createElement(g.Row,{className:"valign-wrapper"},o.a.createElement(g.Col,{className:"center",s:4,m:4},o.a.createElement("span",{style:{fontSize:"23px"}},"ELO id:")),o.a.createElement(g.Col,{s:6,m:3},o.a.createElement(g.TextInput,{id:"eloIdInput",value:e.eloId,onChange:e=>{v(e.target.value)}})),o.a.createElement(g.Col,{s:1,m:1},o.a.createElement(g.Modal,{style:{color:"black",backgroundColor:"white"},bottomSheet:!1,fixedFooter:!1,header:"About ELO ids",open:!1,options:{dismissible:!0,endingTop:"10%",inDuration:250,opacity:.4,outDuration:250,preventScrolling:!0,startingTop:"4%"},trigger:o.a.createElement(g.Button,{node:"button",waves:"light",small:!0,floating:!0,style:{color:"white",backgroundColor:L(k,"button",w)},icon:o.a.createElement(g.Icon,null,"info"),onClick:y,tooltip:"About ELO ids"})},o.a.createElement("div",null,Oe))),o.a.createElement(g.Col,{s:1,m:4})),o.a.createElement(g.Row,{className:"valign-wrapper"},o.a.createElement(g.Col,{className:"center",s:4,m:4},o.a.createElement("span",{style:{fontSize:"23px"}},t?"Your token:":"Token:")),o.a.createElement(g.Col,{s:3,m:2,className:"center"},"default"===e.token?S:o.a.createElement("div",{className:"white-text",style:{fontSize:"30px"}},o.a.createElement("i",{className:"material-icons white-text",style:{height:"100%"}},e.token))),o.a.createElement(g.Col,{s:4,m:4},o.a.createElement("div",null,o.a.createElement(g.Dropdown,{id:"Dropdown_6",options:{alignment:"left",autoTrigger:!0,closeOnClick:!0,constrainWidth:!0,container:null,coverTrigger:!0,hover:!1,inDuration:150,onCloseEnd:null,onCloseStart:null,onOpenEnd:null,onOpenStart:null,outDuration:250},trigger:o.a.createElement(g.Button,{node:"button",style:{backgroundColor:L(k,"button",w)}},"Change")},Pe.map(e=>o.a.createElement("div",{style:{width:"100%",color:"white",backgroundColor:L(k,"button",w)},key:e,node:"button",onClick:()=>b(e)},o.a.createElement("div",{className:"center",style:{display:"flex",flexDirection:"column",justifyContent:"center",padding:"4px 0"}},"default"===e?S:o.a.createElement("i",{className:"material-icons white-text",style:{height:"100%"}},e))))))),o.a.createElement(g.Col,{s:1,m:2})),o.a.createElement(g.Row,{className:"valign-wrapper"},o.a.createElement(g.Col,{className:"center",s:5,m:4},o.a.createElement(Y,{text:"Create Game",onClick:p,menuTheme:k,isDarkModeOn:w})),o.a.createElement(g.Col,{s:2,m:2,style:{paddingRight:"0"}},o.a.createElement(g.TextInput,{id:"durationInput",label:"Duration",value:""+e.timeControl.duration,onChange:e=>{r(e.target.value)}})),o.a.createElement(g.Col,{s:1,m:1,style:{paddingLeft:"0"}},"m"),o.a.createElement(g.Col,{s:2,m:2,style:{paddingRight:"0"}},o.a.createElement(g.TextInput,{id:"incrementInput",label:"Increment",value:""+e.timeControl.increment,onChange:e=>{l(e.target.value)}})),o.a.createElement(g.Col,{s:1,m:1,style:{paddingLeft:"0"}},"s"),o.a.createElement(g.Col,{s:1,m:2})),o.a.createElement(g.Row,{className:"valign-wrapper"},o.a.createElement(g.Col,{className:"center",s:5,m:4}," ",o.a.createElement(g.Checkbox,{id:"isPublicCheckbox",filledIn:!0,label:"PUBLIC",value:"PUBLIC",checked:e.isPublic,onChange:()=>{i(!e.isPublic)}})),o.a.createElement(g.Col,{s:2,m:2,style:{paddingRight:"0"}},o.a.createElement(Te,{label:"Rows:",min:3,max:z[0],value:C.dims[0],onChange:s})),o.a.createElement(g.Col,{s:1,m:1,style:{paddingLeft:"0"}}),o.a.createElement(g.Col,{s:2,m:2,style:{paddingRight:"0"}},o.a.createElement(Te,{label:"Columns:",min:3,max:z[1],value:C.dims[1],onChange:c})),o.a.createElement(g.Col,{s:1,m:1,style:{paddingLeft:"0"}}),o.a.createElement(g.Col,{s:1,m:2})),o.a.createElement(g.Row,{className:"valign-wrapper"},o.a.createElement(g.Col,{className:"center",s:5,m:4},o.a.createElement("span",{style:{fontSize:"15px"}},"More options:"),o.a.createElement(g.Switch,{id:"MoreSwitch",offLabel:"Off",onChange:m,onLabel:"On"})),o.a.createElement(g.Col,{s:2,m:2,style:{paddingRight:"0"},title:"The row where Player 1 starts"},E&&o.a.createElement(Ce,{label:"P1 row:",min:0,max:C.dims[0]-1,value:C.startPos[0][0],onChange:e=>{d(0,0,e)}})),o.a.createElement(g.Col,{s:1,m:1,style:{paddingLeft:"0"}}),o.a.createElement(g.Col,{s:2,m:2,style:{paddingRight:"0"},title:"The column where Player 1 starts"},E&&o.a.createElement(Ce,{label:"P1 col:",min:0,max:C.dims[1]-1,value:C.startPos[0][1],onChange:e=>{d(0,1,e)}})),o.a.createElement(g.Col,{s:1,m:1,style:{paddingLeft:"0"}}),o.a.createElement(g.Col,{s:1,m:2})),E&&o.a.createElement(g.Row,{className:"valign-wrapper"},o.a.createElement(g.Col,{className:"center",s:5,m:4}),o.a.createElement(g.Col,{s:2,m:2,style:{paddingRight:"0"},title:"The row where Player 2 starts"},o.a.createElement(Ce,{label:"P2 row:",min:0,max:C.dims[0]-1,value:C.startPos[1][0],onChange:e=>{d(1,0,e)}})),o.a.createElement(g.Col,{s:1,m:1,style:{paddingLeft:"0"}}),o.a.createElement(g.Col,{s:2,m:2,style:{paddingRight:"0"},title:"The column where Player 2 starts"},o.a.createElement(Ce,{label:"P2 col:",min:0,max:C.dims[1]-1,value:C.startPos[1][1],onChange:e=>{d(1,1,e)}})),o.a.createElement(g.Col,{s:1,m:1,style:{paddingLeft:"0"}}),o.a.createElement(g.Col,{s:1,m:2})),E&&o.a.createElement(g.Row,{className:"valign-wrapper"},o.a.createElement(g.Col,{className:"center",s:5,m:4}),o.a.createElement(g.Col,{s:2,m:2,style:{paddingRight:"0"},title:"The row of the goal of Player 1"},o.a.createElement(Ce,{label:"G1 row:",min:0,max:C.dims[0]-1,value:C.goalPos[0][0],onChange:e=>{u(0,0,e)}})),o.a.createElement(g.Col,{s:1,m:1,style:{paddingLeft:"0"}}),o.a.createElement(g.Col,{s:2,m:2,style:{paddingRight:"0"},title:"The column of the goal of Player 1"},o.a.createElement(Ce,{label:"G1 col:",min:0,max:C.dims[1]-1,value:C.goalPos[0][1],onChange:e=>{u(0,1,e)}})),o.a.createElement(g.Col,{s:1,m:1,style:{paddingLeft:"0"}}),o.a.createElement(g.Col,{s:1,m:2})),E&&o.a.createElement(g.Row,{className:"valign-wrapper"},o.a.createElement(g.Col,{className:"center",s:5,m:4}),o.a.createElement(g.Col,{s:2,m:2,style:{paddingRight:"0"},title:"The row of the goal of Player 2"},o.a.createElement(Ce,{label:"G2 row:",min:0,max:C.dims[0]-1,value:C.goalPos[1][0],onChange:e=>{u(1,0,e)}})),o.a.createElement(g.Col,{s:1,m:1,style:{paddingLeft:"0"}}),o.a.createElement(g.Col,{s:2,m:2,style:{paddingRight:"0"},title:"The column of the goal of Player 2"},o.a.createElement(Ce,{label:"G2 Col:",min:0,max:C.dims[1]-1,value:C.goalPos[1][1],onChange:e=>{u(1,1,e)}})),o.a.createElement(g.Col,{s:1,m:1,style:{paddingLeft:"0"}}),o.a.createElement(g.Col,{s:1,m:2})),o.a.createElement(g.Row,{className:"valign-wrapper"},o.a.createElement(g.Col,{className:"center",s:5,m:4},o.a.createElement(Y,{text:"Join Game",onClick:f,menuTheme:k,isDarkModeOn:w})),o.a.createElement(g.Col,{s:6,m:5},o.a.createElement(g.TextInput,{id:"joinInput",placeholder:"Write game code here...",value:""+e.joinCode,onChange:e=>{console.log(e),h(e.target.value)}})),o.a.createElement(g.Col,{s:1,m:3})))},Le=n(10),Re=n.n(Le),Ge=n(12),Me=n.n(Ge),Ie=function(e){var t=e.challenges,n=e.isLargeScreen,a=e.menuTheme,r=e.isDarkModeOn,l=e.handleAcceptChallenge,i=[L(a,"recentGamesBackground",r),L(a,"recentGamesAlternate",r),L(a,"container",r)],s=i[0],c=i[1],m={position:"sticky",top:"0px",paddingTop:"0.15rem",paddingBottom:"0.15rem",borderRadius:"0",backgroundColor:i[2]},d={paddingTop:"0.15rem",paddingBottom:"0.15rem",borderRadius:"0"};return o.a.createElement("div",{className:"center",style:{overflowY:"scroll",display:"block",height:"100%",backgroundColor:s}},o.a.createElement(g.Table,{centered:!0,style:{width:"100%"}},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{style:m},"Time"),o.a.createElement("th",{style:m},"Player"),o.a.createElement("th",{style:m},"Board"),n&&o.a.createElement("th",{style:m},"Distance"),o.a.createElement("th",{style:m},"Date"))),o.a.createElement("tbody",null,t.map((function(e,t){return o.a.createElement("tr",{onClick:function(){return l(e.joinCode)},style:{cursor:"pointer",backgroundColor:t%2?s:c},className:Me.a.hoveredGame,key:t},o.a.createElement("td",{style:d},ce(e.timeControl)),o.a.createElement("td",{style:d},e.playerNames[0]),o.a.createElement("td",{style:d},(r=e.boardSettings.dims,te(r[0])+":"+te(r[1]))),n&&o.a.createElement("td",{style:d},(a=se(e.boardSettings))[0]+" - "+a[1]),o.a.createElement("td",{style:d},k(e.creationDate,n)));var a,r})))))},Ne=function(e){return"creator"===e.winner?"<":"draw"===e.winner?"=":">"},je=new Map,Be=function(e){var t=e.recentGames,n=e.isLargeScreen,a=e.menuTheme,r=e.isDarkModeOn,l=e.handleViewGame,s=[L(a,"recentGamesBackground",r),L(a,"recentGamesAlternate",r),L(a,"container",r)],c=s[0],m=s[1],d={position:"sticky",top:"0px",paddingTop:"0.15rem",paddingBottom:"0.15rem",borderRadius:"0",backgroundColor:s[2]},u={paddingTop:"0.15rem",paddingBottom:"0.15rem",borderRadius:"0"};return n?o.a.createElement("div",{className:"center",style:{overflowY:"scroll",display:"block",height:"100%",backgroundColor:L(a,"recentGamesBackground",r)}},o.a.createElement(g.Table,{centered:!0,style:{width:"100%"}},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{style:d},"Time"),o.a.createElement("th",{style:d},"Player 1"),o.a.createElement("th",{style:d}),o.a.createElement("th",{style:d},"Player 2"),o.a.createElement("th",{style:d},"Distance"),o.a.createElement("th",{style:d},"Turns"),o.a.createElement("th",{style:d},"Date"))),o.a.createElement("tbody",null,t&&t.map((function(e,t){var n=function(e){if(je.size>1e3&&je.clear(),je.has(e._id))return je.get(e._id);for(var t=ue(e.boardSettings.dims),n=Re()(e.boardSettings.startPos),a=e.creatorStarts?0:1,o=0;o<e.moveHistory.length;o++){for(var r=e.moveHistory[o].actions,l=0;l<r.length;l++){var s=r[l];me(s)===X?n[a]=s:t[s[0]][s[1]]=a+1}a=(a+1)%2}var c=Object(i.a)(e.boardSettings.goalPos,2),m=c[0],d=c[1],u=[fe(t,n[0],m),fe(t,n[1],d)],g=u[0],h=u[1];return je.set(e._id,[g,h]),[g,h]}(e),a=Object(i.a)(n,2),r=a[0],s=a[1];return o.a.createElement("tr",{onClick:function(){return l(e._id)},style:{cursor:"pointer",backgroundColor:t%2?c:m},className:Me.a.hoveredGame,key:t},o.a.createElement("td",{style:u},ce(e.timeControl)),o.a.createElement("td",{style:u},e.playerNames[0]),o.a.createElement("td",{style:u},Ne(e)),o.a.createElement("td",{style:u},e.playerNames[1]),o.a.createElement("td",{style:u},r+" - "+s),o.a.createElement("td",{style:u},e.moveHistory.length),o.a.createElement("td",{style:u},k(e.startDate,!0)))}))))):o.a.createElement("div",{className:"center",style:{overflowY:"scroll",display:"block",height:"100%"}},o.a.createElement(g.Table,{centered:!0,style:{width:"100%"}},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{style:d},"Time"),o.a.createElement("th",{style:d},"Player 1"),o.a.createElement("th",{style:d},"Win"),o.a.createElement("th",{style:d},"Player 2"),o.a.createElement("th",{style:d},"Date"))),o.a.createElement("tbody",null,t&&t.map((function(e,t){return o.a.createElement("tr",{onClick:function(){return l(e._id)},style:{cursor:"pointer",backgroundColor:t%2?c:m},className:Me.a.hoveredGame,key:t},o.a.createElement("td",{style:u},ce(e.timeControl)),o.a.createElement("td",{style:u},e.playerNames[0]),o.a.createElement("td",{style:u},Ne(e)),o.a.createElement("td",{style:u},e.playerNames[1]),o.a.createElement("td",{style:u},k(e.startDate,!1)))})))))};var Ae=({socket:e,isLargeScreen:t,menuTheme:n,isDarkModeOn:r,recentGames:l,handleViewGame:i,handleAcceptChallenge:s})=>{const[c,m]=Object(y.a)({needToRequestChallenges:!0,challenges:[],showChallenges:!1});Object(a.useEffect)(()=>{c.needToRequestChallenges&&(m(e=>{e.needToRequestChallenges=!1}),e.emit("requestCurrentChallenges"))},[e,m,c.needToRequestChallenges]),Object(a.useEffect)(()=>(e.once("requestedCurrentChallenges",({challenges:e})=>{m(t=>{t.challenges=e,t.challenges.length>0&&(t.showChallenges=!0)})}),e.on("newChallenge",({challenge:e})=>{m(t=>{t.challenges.push(e),1===t.challenges.length&&(t.showChallenges=!0)})}),e.on("deadChallenge",({joinCode:e})=>{m(t=>{for(let n=0;n<t.challenges.length;n++){if(t.challenges[n].joinCode===e)return void t.challenges.splice(n,1)}})}),()=>{e.off("newChallenge"),e.off("deadChallenge")}),[e,m]);const d=!Object(h.useMediaQuery)({query:"(hover: none)"}),[u,g]=Object(a.useState)(null),p=e=>{g(e)},f=()=>{g(null)},b={alignSelf:"stretch",justifySelf:"stretch",display:"flex",justifyContent:"center",alignItems:"center",fontSize:t?"16px":"12px",cursor:"pointer",borderBottom:"2px solid "+L(n,"selectedTab",r),backgroundColor:L(n,"tab",r),fontWeight:"bold"};let v=Re()(b),k=Re()(b),w=Re()(b);const E=L(n,"selectedTab",r);return(!c.showChallenges||d&&"recent"===u)&&(v.backgroundColor=E),(c.showChallenges||d&&"open"===u)&&(k.backgroundColor=E),w.backgroundColor=L(n,"disabledTab",r),w.color=L(n,"disabledTabText",r),w.cursor=null,o.a.createElement("div",{style:{padding:"0px",margin:"0px",display:"block",height:"100%",overflowY:"hidden",border:"1px solid "+L(n,"container",r)}},o.a.createElement("div",{style:{height:"50px",width:"100%",display:"grid",gridTemplateRows:"1fr",gridTemplateColumns:"1fr 1fr 1fr",justifyContent:"center",alignContent:"center"}},o.a.createElement("div",{style:k,onClick:()=>{m(e=>{e.showChallenges=!0})},onMouseEnter:()=>p("open"),onMouseLeave:f,title:"Players looking for an opponent"},`Challenges (${c.challenges.length})`),o.a.createElement("div",{style:v,onClick:()=>{m(e=>{e.showChallenges=!1})},onMouseEnter:()=>p("recent"),onMouseLeave:f,title:"Games played recently"},"Recent Games"),o.a.createElement("div",{style:w,title:"Games being played right now (coming soon)"},"Live Games")),c.showChallenges&&o.a.createElement(Ie,{challenges:c.challenges,isLargeScreen:t,menuTheme:n,isDarkModeOn:r,handleAcceptChallenge:s}),!c.showChallenges&&o.a.createElement(Be,{recentGames:l,isLargeScreen:t,menuTheme:n,isDarkModeOn:r,handleViewGame:i}))};const He=e=>{const t=e.winCount,n=e.drawCount;return t+"/"+n+"/"+(e.gameCount-t-n)};var ze=({isLargeScreen:e,menuTheme:t,isDarkModeOn:n,ranking:a})=>{const[r,l,i]=[L(t,"recentGamesBackground",n),L(t,"recentGamesAlternate",n),L(t,"container",n)],s={position:"sticky",top:"0px",paddingTop:"0.15rem",paddingBottom:"0.15rem",borderRadius:"0",backgroundColor:i},c={paddingTop:"0.15rem",paddingBottom:"0.15rem",borderRadius:"0"};return e?o.a.createElement("div",{className:"center",style:{overflowY:"scroll",display:"block",height:"100%",backgroundColor:L(t,"recentGamesBackground",n)}},o.a.createElement(g.Table,{centered:!0,style:{width:"100%"}},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{style:s},"Ranking"),o.a.createElement("th",{style:s},"Name"),o.a.createElement("th",{style:s},"Rating"),o.a.createElement("th",{style:s},"Peak Rating"),o.a.createElement("th",{style:s},"Games"),o.a.createElement("th",{style:s},"First played"),o.a.createElement("th",{style:s},"Last played"))),o.a.createElement("tbody",null,a&&a.map((e,t)=>o.a.createElement("tr",{style:{backgroundColor:t%2?r:l},className:Me.a.hoveredGame,key:t},o.a.createElement("td",{style:c},t+1),o.a.createElement("td",{style:c},e.name),o.a.createElement("td",{style:c},Math.round(e.rating)),o.a.createElement("td",{style:c},Math.round(e.peakRating)),o.a.createElement("td",{style:c},He(e)),o.a.createElement("td",{style:c},k(e.firstGameDate,!0)),o.a.createElement("td",{style:c},k(e.lastGameDate,!0))))))):o.a.createElement("div",{className:"center",style:{overflowY:"scroll",display:"block",height:"100%"}},o.a.createElement(g.Table,{centered:!0,style:{width:"100%"}},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{style:s},"Ranking"),o.a.createElement("th",{style:s},"Name"),o.a.createElement("th",{style:s},"Rating"),o.a.createElement("th",{style:s},"Games"),o.a.createElement("th",{style:s},"Last played"))),o.a.createElement("tbody",null,a&&a.map((e,t)=>o.a.createElement("tr",{style:{backgroundColor:t%2?r:l},className:Me.a.hoveredGame,key:t},o.a.createElement("td",{style:c},t+1),o.a.createElement("td",{style:c},e.name),o.a.createElement("td",{style:c},Math.round(e.rating)),o.a.createElement("td",{style:c},He(e)),o.a.createElement("td",{style:c},k(e.lastGameDate,!1)))))))},We=n(75),Fe=n.n(We),_e=n(76),qe=n.n(_e);const Ve="creator",Ye="joiner",$e="spectator",Je="returner",Ue=e=>e.moveHistory.length-1,Qe=e=>Ue(e)%2===(e.creatorStarts?0:1),Ke=e=>e.viewIndex%2===(e.creatorStarts?0:1),Xe=e=>Qe(e)?0:1,Ze=e=>null===e?"None":me(e),et=e=>e.arePlayersPresent[e.clientRole===Ve?1:0],tt=(e,t,n,a,o,r,l)=>{const i=Re()(e);for(let s=0;s<l.length;s++){const e=l[s];i[e[0]][e[1]]=1}return me(t)===X?fe(i,n,t):ve(i,[n,a],[o,r],t)?1:0},nt=(e,t)=>{if(t&&(t.isVolumeOn&&"true"===t.isVolumeOn&&(e.isVolumeOn=!0),t.zoomLevel)){const n=parseInt(t.zoomLevel);n>=0&&n<=10&&(e.zoomLevel=n)}},at=(e,t,n,a,o)=>{e.clientRole=Ve,e.lifeCycleStage=-1,e.timeControl=t,e.boardSettings=n,e.names[0]=a,e.tokens[0]=o;const r=60*t.duration;e.moveHistory[0].timeLeft=[r,r],e.moveHistory[0].grid=ue(n.dims),e.moveHistory[0].playerPos=n.startPos,e.moveHistory[0].distances=se(n)},ot=(e,t,n,a)=>{e.clientRole=Ye,e.lifeCycleStage=-1,e.joinCode=t,e.names[1]=n,e.tokens[1]=a},rt=(e,t,n,a)=>{0!==e.lifeCycleStage&&(e.joinCode=t,e.creatorStarts=n,e.lifeCycleStage=0,e.ratings[0]=a)},lt=(e,t,n,a,o,r,l,i,s)=>{if(1===e.lifeCycleStage)return;e.creatorStarts=r,e.names[0]=t,e.tokens[0]=n,e.timeControl=a,e.boardSettings=o,e.arePlayersPresent[0]=l;const c=60*a.duration;e.moveHistory[0].timeLeft=[c,c],e.moveHistory[0].grid=ue(o.dims),e.moveHistory[0].playerPos=o.startPos,e.moveHistory[0].distances=se(o),e.lifeCycleStage=1,e.ratings=[i,s]},it=(e,t,n,a)=>{1!==e.lifeCycleStage&&(e.names[1]=t,e.tokens[1]=n,e.lifeCycleStage=1,e.ratings[1]=a)},st=(e,t,n,a)=>{if(e.lifeCycleStage<1||e.lifeCycleStage>3)return;const o=Ue(e);if(o!==a-1)return;const r=Xe(e),l=0===r?1:0,i=Re()(e.moveHistory[o].playerPos),s=Re()(e.moveHistory[o].grid),c=Re()(e.moveHistory[o].timeLeft),m=Re()(e.moveHistory[o].wallCounts);c[r]=n;for(let d=0;d<t.length;d++){const n=t[d],a=me(n);if(a===X){if(i[r]=n,de(n,e.boardSettings.goalPos[r])){const t=o%2===0,n=ye(s,i[l],e.boardSettings.goalPos[l],2);t&&n?(e.winner="draw",e.matchScore[0]+=.5,e.matchScore[1]+=.5):(e.winner=0===r?Ve:Ye,e.matchScore[r]++),e.finishReason="goal",e.lifeCycleStage=4}}else a===Z?(s[n[0]][n[1]]=r+1,m[r]++):console.error("unexpected action type",a)}if(e.moveHistory.push({index:o+1,actions:t,grid:s,playerPos:i,timeLeft:c,distances:[fe(s,i[0],e.boardSettings.goalPos[0]),fe(s,i[1],e.boardSettings.goalPos[1])],wallCounts:m}),1===e.lifeCycleStage&&0===o?e.lifeCycleStage=2:2===e.lifeCycleStage&&1===o&&(e.lifeCycleStage=3),e.ghostAction=null,e.viewIndex=o+1,e.premoveActions.length>0){const t=e.premoveActions;e.premoveActions=[];for(let n=0;n<t.length;n++)ct(e,t[n],!0)}},ct=(e,t,n)=>{if(!n)return void mt(e,t);if(e.lifeCycleStage<1)return;if(e.lifeCycleStage>3)return;if(e.viewIndex!==Ue(e))return;const a=e.boardSettings.dims;if(t[0]<0||t[0]>=a[0]||t[1]<0||t[1]>=a[1])return;const o=me(t),r=Xe(e),l=0===r?1:0,i=Ze(e.ghostAction),s=i===Z?[e.ghostAction]:[],c=Ue(e);let m=e.moveHistory[c].playerPos[r];o===Z&&i===X&&(m=e.ghostAction);const d=tt(e.moveHistory[c].grid,t,m,e.moveHistory[c].playerPos[l],e.boardSettings.goalPos[r],e.boardSettings.goalPos[l],s);if(d>2)return;let[u,g]=[null,null];if("None"===i){if(o===Z){if(1!==d)return;g=t}else if(o===X)if(1===d)g=t;else{if(2!==d)return;u=[t]}}else if(i===Z){if(o===Z)if(de(e.ghostAction,t))g=null;else{if(1!==d)return;u=[t,e.ghostAction]}else if(o===X)if(0===d)g=null;else{if(1!==d)return;u=[t,e.ghostAction]}}else if(i===X){if(o===Z){if(1!==d)return;u=[t,e.ghostAction]}else if(o===X)if(0===d)g=null;else if(1===d)g=de(t,e.ghostAction)?null:t;else{if(2!==d)return;u=[t]}}else console.error("unexpected ghost type",i);if(u){const t=Xe(e),n=Ue(e);let a=e.moveHistory[n].timeLeft[t];3===e.lifeCycleStage&&(a+=e.timeControl.increment),e.shouldPlaySound=!0,st(e,u,a,Ue(e)+1),e.moveToSend={actions:u,remainingTime:a,distances:e.moveHistory[e.moveHistory.length-1].distances}}else e.ghostAction=g},mt=(e,t)=>{if(e.lifeCycleStage>3)return;if(e.viewIndex!==Ue(e))return;const n=e.boardSettings.dims;if(t[0]<0||t[0]>=n[0]||t[1]<0||t[1]>=n[1])return;const a=me(t),o=0===Xe(e)?1:0,r=0===o?1:0,l=Ue(e),i=[];let s=null;for(let E=0;E<e.premoveActions.length;E++){const t=e.premoveActions[E];me(t)===Z?i.push(t):s=t}let c=e.moveHistory[l].playerPos[o];a===Z&&s&&(c=s);const m=tt(e.moveHistory[l].grid,t,c,e.moveHistory[l].playerPos[r],e.boardSettings.goalPos[o],e.boardSettings.goalPos[r],i);let d=null;if(s&&(d=tt(e.moveHistory[l].grid,s,e.moveHistory[l].playerPos[o],e.moveHistory[l].playerPos[r],e.boardSettings.goalPos[o],e.boardSettings.goalPos[r],i)),m>2)return;const u="empty",g="wall",h="wallWall",p="groundWall",f="groundDist1",y="groundDist2";let b;if(0===e.premoveActions.length)b=u;else if(s||1!==i.length)if(s||2!==i.length)if(s&&1===i.length)b=p;else if(s&&1===d)b=f;else{if(!s||2!==d)return void console.error("Unknown premove state",s,i,m,d);b=y}else b=h;else b=g;let v=[];if(de(t,c))return 0===e.premoveActions.length?void 0:void(e.premoveActions=[]);let[k,w]=[null,null];if(1===i.length?[k,w]=[i[0],null]:2===i.length&&([k,w]=[i[0],i[1]]),b===u)if(a===Z){if(1!==m)return;v=[t]}else a===X&&(1===m||2===m?v=[t]:console.error("unreachable case"));else if(b===g){if(a===Z)if(de(k,t))v=[];else{if(1!==m)return;v=[k,t]}else if(a===X){if(1!==m)return;v=[k,t]}}else if(b===h){if(a===Z)if(de(k,t))v=[w];else{if(!de(w,t))return;v=[k]}else if(a===X)return}else if(b===f)if(a===Z){if(1!==m)return;v=[s,t]}else a===X&&(v=de(t,s)?[]:[t]);else if(b===y){if(a===Z)return;a===X&&(v=de(t,s)?[]:[t])}else if(b===p){if(a===Z){if(!de(t,k))return;v=[s]}else if(a===X)if(de(t,s))v=[k];else{if(1!==m)return;v=[k,t]}}else console.error("unexpected premove state case",b);v&&(e.premoveActions=v)},dt=e=>{e.showRematchDialog=!1,e.showDrawDialog=!1,e.showTakebackDialog=!1,e.ghostAction=null,e.premoveActions=[]},ut=(e,t)=>{3===e.lifeCycleStage&&(e.shouldPlaySound=!0,e.lifeCycleStage=4,e.winner="draw",e.matchScore[0]+=.5,e.matchScore[1]+=.5,e.finishReason=t,dt(e))},gt=(e,t)=>{3===e.lifeCycleStage&&(e.lifeCycleStage=4,e.winner=t?Ye:Ve,e.matchScore[t?1:0]++,e.finishReason="resign",dt(e))},ht=(e,t)=>{if(e.showTakebackDialog=!1,2!==e.lifeCycleStage&&3!==e.lifeCycleStage)return;const n=t===Qe(e)?2:1;for(let o=0;o<n;o++)e.moveHistory.pop();const a=Ue(e);e.viewIndex=a,0===a?e.lifeCycleStage=1:1===a&&(e.lifeCycleStage=2),dt(e)},pt=e=>{if(4!==e.lifeCycleStage)return;e.creatorStarts=!e.creatorStarts;const t=ue(e.boardSettings.dims);e.moveHistory=[{index:0,actions:[],grid:t,playerPos:e.boardSettings.startPos,timeLeft:[60*e.timeControl.duration,60*e.timeControl.duration],distances:[fe(t,e.boardSettings.startPos[0],e.boardSettings.goalPos[0]),fe(t,e.boardSettings.startPos[1],e.boardSettings.goalPos[1])],wallCounts:[0,0]}],e.winner="",e.finishReason="",e.lifeCycleStage=1,e.viewIndex=0,dt(e)},ft=(e,t)=>{if(3!==e.lifeCycleStage)return;const n=Ue(e);e.moveHistory[n].timeLeft[t]+=60},yt=(e,t)=>{e.winner=0===t?Ve:Ye,e.matchScore[t]++,e.finishReason="time",e.lifeCycleStage=4,dt(e)};var bt=function(e){var t=e.grid,n=e.ghostAction,r=e.premoveActions,l=e.lastActions,s=e.tracePos,c=Object(i.a)(e.playerPos,2),m=c[0],d=c[1],u=Object(i.a)(e.goals,2),g=u[0],p=u[1],f=e.handleClick,y=e.creatorToMove,b=e.groundSize,v=e.wallWidth,k=e.menuTheme,w=e.boardTheme,E=e.isDarkModeOn,C=e.tokens,T=!Object(h.useMediaQuery)({query:"(hover: none)"}),S=Object(a.useState)(null),x=Object(i.a)(S,2),O=x[0],P=x[1],D=function(){P(null)},R=function(e){return L(w,e,E)},G="1px solid ".concat(L(k,"container",E)),M=[R("player1"),R("player2")],I=M[0],N=M[1],j=["face","outlet"],B=Object(i.a)(C,2),A=B[0],H=B[1];"default"===A&&(A=j[0]),"default"===H&&(H=j[1]);for(var z=[t.length,t[0].length],W=[],F=0;F<z[0];F++)for(var _=0;_<z[1];_++)W[F*z[1]+_]=[F,_];var q=(z[0]-1)/2,V=(z[1]-1)/2,Y=.8*b,$=R("coord"),J=function(e,t){return!!(t.length>0&&t[0]&&de(e,t[0]))||!!(t.length>1&&t[1]&&de(e,t[1]))};return o.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(".concat(V,", ").concat(b,"px ").concat(v,"px) ").concat(b,"px"),gridTemplateRows:"repeat(".concat(q,", ").concat(b,"px ").concat(v,"px) ").concat(b,"px"),justifyContent:"center",gridArea:"board",MozUserSelect:"none",WebkitUserSelect:"none",msUserSelect:"none",userSelect:"none",alignSelf:"center"}},W.map((function(e){var a,i=[de(e,m),de(e,d)],c=i[0],u=i[1],h=[de(e,g),de(e,p)],v=h[0],k=h[1],w=c||u,C=v||k,S=J(e,[n]),x=J(e,r),L=s&&de(e,s),M=J(e,l),j=S||x,B=S&&y||x&&!y,W=S&&!y||x&&y,F=M&&!y,_=M&&y,q=b>27&&!(w||C||j),V=q&&e[0]===z[0]-1&&e[1]%2===0,U=q&&e[1]===z[1]-1&&e[0]%2===0,Q=V||U,K=T&&O&&de(e,O),te=me(e),ne="";if(te===X&&(ne+="waves-effect waves-light"),te===Z&&(ne+="waves-effect waves-dark"),te===X)a=R(K?"hoveredGround":L?"traceGround":C?v&&k?"combinedGoalBackground":"goalBackground".concat(v?"1":"2"):"ground");else if(te===Z){var ae=0!==t[e[0]][e[1]];a=R(ae?"wall".concat(t[e[0]][e[1]]):S?"ghostWall".concat(y?"1":"2"):x?"ghostWall".concat(y?"2":"1"):K?"hoveredWall":"emptyWall")}else a=R("pillar");var oe="center",re="center";Q&&(oe=V?"flex-start":"flex-end",re=V?"flex-end":"flex-start");var le={backgroundColor:a,display:"flex",justifyContent:oe,alignItems:re,position:"relative"};te!==ee&&(le.cursor="pointer"),te===Z&&M?le.border="".concat(E?"1":"2","px solid ").concat(R("lastMoveWallBorder")):(0===e[0]&&(le.borderTop=G),e[0]===z[0]-1&&(le.borderBottom=G),0===e[1]&&(le.borderLeft=G),e[1]===z[1]-1&&(le.borderRight=G));var ie="0 0 4px ".concat(R("lastMoveTokenBorder")),se={position:"absolute",height:"90%",width:"90%",top:"5%",left:"5%",cursor:"pointer"};return 0!==e[0]&&e[0]!==z[0]-1||(se.height="95%",0===e[0]?se.top="0":se.top="5%"),0!==e[1]&&e[1]!==z[1]-1||(se.width="95%",0===e[1]?se.left="0":se.left="5%"),o.a.createElement("div",{className:ne,key:"".concat(e[0],"_").concat(e[1]),onMouseEnter:function(){return function(e){P(e)}(e)},onMouseLeave:D,style:le,onClick:te===Z&&null!==f?function(){f(e)}:void 0},te===X&&o.a.createElement("div",{style:se,onClick:null!==f?function(){f(e)}:void 0}),c&&o.a.createElement("i",{className:"material-icons",style:{fontSize:"".concat(Y,"px"),color:I,textShadow:F?ie:"none"}},A),u&&o.a.createElement("i",{className:"material-icons",style:{fontSize:"".concat(Y,"px"),color:N,textShadow:_?ie:"none"}},H),te===X&&(B||W)&&o.a.createElement("i",{className:"material-icons ".concat(I,"-text text-lighten-4"),style:{fontSize:"".concat(Y,"px"),color:R("ghost".concat(B?"1":"2"))}},B?A:H),(v||k)&&!w&&!j&&o.a.createElement("i",{className:"material-icons",style:{fontSize:"".concat(Y,"px"),color:R("goalToken")}},v&&A,k&&H),V&&o.a.createElement("div",{style:{color:$,padding:"0",marginLeft:"4px"}},we(e)),U&&!V&&o.a.createElement("div",{style:{color:$,padding:"0",marginRight:"4px"}},ke(e)))})))},vt=(n(164),n(77)),kt=(n(168),function(e){var t,n=e.icon,a=e.tooltip,r=e.onClick,l=e.modalTitle,i=e.modalBody,s=e.modalConfirmButtonText,c=e.bgColor,m=e.padding,d=e.disabled,u=e.menuTheme,h=e.isDarkModeOn;if(c||(c=L(u,"button",h)),!i)return o.a.createElement(g.Button,{style:{backgroundColor:c},node:"button",waves:"light",icon:o.a.createElement(g.Icon,{className:"large"},n),onClick:r,tooltip:a,disabled:d});t=s&&""!==s?[o.a.createElement(g.Button,{style:{backgroundColor:c,color:"white",marginRight:"1rem"},flat:!0,modal:"close",node:"button",waves:"green",onClick:r},s),o.a.createElement(g.Button,{style:{backgroundColor:c,color:"white"},flat:!0,modal:"close",node:"button",waves:"green"},"Cancel")]:o.a.createElement(g.Button,{style:{backgroundColor:c,color:"white"},flat:!0,modal:"close",node:"button",waves:"green"},"Close");var p=o.a.createElement(g.Button,{style:{padding:"0px ".concat(m,"px"),backgroundColor:c},node:"button",waves:"light",icon:o.a.createElement(g.Icon,{className:"large"},n),tooltip:a,disabled:d});return o.a.createElement(g.Modal,{style:{color:"black",backgroundColor:"white"},bottomSheet:!1,fixedFooter:!1,header:l,open:!1,options:{dismissible:!0,endingTop:"10%",inDuration:250,opacity:.4,outDuration:250,preventScrolling:!0,startingTop:"4%"},trigger:p,actions:t},o.a.createElement("div",null,i))}),wt="spectator",Et="lobby";var Ct=function(e){var t,n=e.context,a=e.helpText,r=e.aboutText,l=e.joinCode,i=e.handleLeaveGame,s=e.isLargeScreen,c=e.menuTheme,m=e.isDarkModeOn,d=e.handleToggleDarkMode,u=e.handleToggleTheme;t=n===Et?o.a.createElement("span",null,"WallWars"):n===wt?o.a.createElement("span",{style:{cursor:"pointer"},onClick:i},"WallWars"):o.a.createElement("span",null,s&&o.a.createElement("span",{style:{cursor:"pointer"},onClick:i},"WallWars"),s&&o.a.createElement("span",null,"\xa0"),o.a.createElement(vt.CopyToClipboard,{style:{cursor:"pointer"},text:l,onCopy:function(){return V("Join code copied to clipboard!")}},o.a.createElement("span",null,"Code ",l)));var g=s?20:11,h=L(c,"headerButton",m);return o.a.createElement("div",null,o.a.createElement("div",{style:{height:"50px",display:"grid",gridTemplateRows:"1fr",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"center",backgroundColor:L(c,"header",m)}},o.a.createElement("div",{style:{fontSize:s?"30px":"25px",marginLeft:s?"15px":"5px"}},t),o.a.createElement("div",{style:{height:"auto",display:"grid",padding:"5px",gridTemplateColumns:"repeat(".concat(s?4:3,", 1fr)"),gridTemplateRows:"auto",columnGap:"5px",rowGap:"5px",marginRight:s?"15px":"5px"}},s&&o.a.createElement(kt,{icon:"color_lens",tooltip:"Change theme",onClick:u,bgColor:h,padding:g,menuTheme:c,isDarkModeOn:m}),o.a.createElement(kt,{icon:m?"wb_sunny":"brightness_2",tooltip:m?"Turn off night mode":"Turn on night mode",onClick:d,bgColor:h,padding:g,menuTheme:c,isDarkModeOn:m}),o.a.createElement(kt,{icon:"help",tooltip:"Help",modalTitle:"Help",modalBody:a,bgColor:h,padding:g,menuTheme:c,isDarkModeOn:m}),n===Et&&o.a.createElement(kt,{icon:"info",tooltip:"About",modalTitle:"About",modalBody:r,bgColor:h,padding:g,menuTheme:c,isDarkModeOn:m}),n!==Et&&o.a.createElement(kt,{icon:"home",tooltip:"Leave game",onClick:i,bgColor:h,padding:g,menuTheme:c,isDarkModeOn:m}))))},Tt=function(e){var t=e.title,n=e.body,a=e.acceptButtonText,r=e.rejectButtonText,l=e.isOpen,i=e.callback,s=e.menuTheme,c=e.isDarkModeOn,m=L(s,"button",c);return o.a.createElement(g.Modal,{style:{color:"black",backgroundColor:"#e0e0e0"},header:t,open:l,options:{dismissible:!1,endingTop:"10%",inDuration:250,opacity:.4,outDuration:250,preventScrolling:!0,startingTop:"4%"},actions:[o.a.createElement(g.Button,{style:{backgroundColor:m,color:"white",marginRight:"1rem"},flat:!0,modal:"close",node:"button",waves:"green",onClick:function(){i(!0)}},a||"Accept"),o.a.createElement(g.Button,{style:{backgroundColor:m,color:"white"},flat:!0,modal:"close",node:"button",waves:"green",onClick:function(){i(!1)}},r||"Cancel")]},o.a.createElement("div",null,n))};var St=({lifeCycleStage:e,names:t,winner:n,finishReason:a,indexToMove:r,timeControl:l,creatorStarts:i,isLargeScreen:s,menuTheme:c,isDarkModeOn:m})=>{let d;const u=t[r],g={time:"on time",goal:"by reaching the goal",resign:"by resignation",abandon:"by abandonment"},h={goal:"by the 1-move rule",agreement:"by agreement"};switch(e){case-2:d="Haven't tried to connect to the server yet";break;case-1:d="Waking the server up...";break;case 0:d="Waiting for player 2 to join";break;case 1:d=u+" starts";break;case 2:case 3:d=u+" to move";break;case 4:d="draw"===n?"The game ended in a draw "+h[a]:`${t["creator"===n?0:1]} won ${g[a]}`;break;default:console.error("stage should be in range [-2..4]")}let p="";return 0===e&&i?p=t[0]:e>0&&(p=t[i?0:1]),o.a.createElement("div",{style:{backgroundColor:L(c,"container",m),display:"grid",gridTemplateColumns:"auto",gridTemplateRows:"1fr 1fr 1fr",alignItems:"center",padding:s?"15px 15px":"5px 15px",gridArea:"status"}},o.a.createElement("div",null,o.a.createElement("p",null,d)),o.a.createElement("div",null,l&&o.a.createElement("p",null,"Time control: ",v(l.duration),"+",v(l.increment))),o.a.createElement("div",null,o.a.createElement("p",null,"First move: "+p)))};const xt=(e,t)=>o.a.createElement("span",{style:{height:"10px",width:"10px",backgroundColor:e,borderRadius:"50%",display:"inline-block",border:"solid 1px black"},title:t}),Ot=(e,t)=>e?xt("#67ff36",t+" has the game open"):xt("gray",t+" does not have the game page open");var Pt=({lifeCycleStage:e,names:t,ratings:n,timeLeft:a,indexToMove:r,isLargeScreen:l,scores:i,arePlayersPresent:s,menuTheme:c,boardTheme:m,isDarkModeOn:d})=>{const u=[Math.round(n[0]),Math.round(n[1])],[g,h]=[Math.floor(a[0]/60),Math.floor(a[1]/60)],[p,f]=[a[0]%60,a[1]%60],y=[`${g}:${p<10?"0":""}${p}`,`${h}:${f<10?"0":""}${f}`];e<0&&(y[0]="_:__",y[1]="_:__");let b=[!1,!1];e<4&&(b[r]=!0);let v=[!1,!1];3===e&&(0===r?a[0]<15&&(v[0]=!0):1===r&&a[1]<15&&(v[1]=!0));const k=0!==i[0]||0!==i[1];let w;w=l&&!k?"15px":l&&k?"12px":l||k?"6px":"8px";const E=l?"18px":"14px",C=l?"14px":"10px",T={padding:w,fontSize:E},[S,x,O,P]=[L(m,"timer1",d),L(m,"timer2",d),L(c,"container",d),L(m,"lowTime",d)];return o.a.createElement("div",{style:{backgroundColor:L(c,"container",d),display:"grid",gridTemplateColumns:k?"0.5fr 1.7fr 0.2fr 1fr 1fr 0.2fr 1.7fr 0.5fr":"1.7fr 0.2fr 1fr 1fr 0.2fr 1.7fr",gridTemplateRows:"auto",alignContent:"center",columnGap:w,padding:w,gridArea:"timer"}},k&&o.a.createElement("div",{style:T,className:"center"},i[0]),o.a.createElement("div",{style:{padding:l?w:"3px",fontSize:C,backgroundColor:b[0]?S:O},className:"center truncate"+(b[0]?" z-depth-2":"")},t[0],o.a.createElement("br",null),"("+u[0]+")"),o.a.createElement("div",{style:T,className:"center"},Ot(s[0],t[0])),o.a.createElement("div",{style:{padding:w,fontSize:E,backgroundColor:v[0]?P:O},className:"center"+(v[0]?" z-depth-2":"")},y[0]),o.a.createElement("div",{style:{padding:w,fontSize:E,backgroundColor:v[1]?P:O},className:"center"+(v[1]?" z-depth-2":"")},y[1]),o.a.createElement("div",{style:T,className:"center"},Ot(s[1],t[1])),o.a.createElement("div",{style:{padding:l?w:"3px",fontSize:C,backgroundColor:b[1]?x:O},className:"center truncate"+(b[1]?" z-depth-2":"")},null===t[1]?"waiting...":t[1],o.a.createElement("br",null),null===t[1]?"":"("+u[1]+")"),k&&o.a.createElement("div",{style:T,className:"center"},i[1]))},Dt=o.a.createElement("div",null,o.a.createElement("h6",null,'To connect with your friend, share the game code in the top header with them and tell them to use it when clicking "Join Game" from the lobby. Click on the code to copy it to the clipboard.'),o.a.createElement("h6",null,"Rules of the game:"),o.a.createElement("h6",null,"The player who creates the game starts at the top left corner (color red). The player who joins the game starts at the top right (color blue). The goal of each player is to reach the ",o.a.createElement("em",null,"opposite")," corner from where they start. The player who gets there first wins."),o.a.createElement("h6",null,"Players move by clicking cells on the board. There are two types of cells: ground cells (the big squares) and walls (the thin rectangles in between ground cells). Each move consists of a total of two actions. One action can be building one wall or moving to an adjacent cell. A diagonal move counts as two actions."),o.a.createElement("h6",null,"Players can build walls to obstruct the opponent. Walls can be built anywhere as long as there always exists at least one way to get to their goal. You cannot go through your own walls either."),o.a.createElement("h6",null,"The remaining time for each player is shown next to their name. The clock of a player ticks down when it is their turn (after each player has moved once). The player who starts is chosen randomly. The name of the player to move next is highlighted with their color."),o.a.createElement("h6",null,"If it is your turn and you do a single action, like building a wall or moving to an adjacent cell, you can undo it by clicking the wall again or clicking a different ground cell, respectively. Once you choose 2 actions, the move becomes permanent."),o.a.createElement("h6",null,"During the opponent's turn, you can ",o.a.createElement("em",null,"premove"),", meaning choose a move that will be applied instantaneously when it is your turn."),o.a.createElement("h6",null,"Starter handicap rule: If the player who moved first reaches the goal first but the other player is at distance 1 or 2 from their goal, the game ends in a draw."),o.a.createElement("h6",null,"If you leave the game, you will be able to reenter this game as long as you don't create or join a new game.")),Lt=function(e){return 0===e.index?"_______":function(e){if(1===e.length)return Ee(e[0]);const[t,n]=e;return me(t)===X||me(t)!==X||t[1]<n[1]||t[1]===n[1]&&t[0]>n[0]?Ee(t)+" "+Ee(n):Ee(n)+" "+Ee(t)}(e.actions)},Rt={paddingTop:"0.15rem",paddingBottom:"0.15rem",borderRadius:"0"},Gt=function(e){var t=e.moveHistory,n=e.creatorStarts,a=e.handleViewMove,r=e.viewIndex,l=e.height,i=e.menuTheme,s=e.boardTheme,c=e.isDarkModeOn,m=!Object(h.useMediaQuery)({query:"(hover: none)"}),d=[L(s,"move1",c),L(s,"move2",c),L(i,"container",c),L(s,"currentMove",c)],u=d[0],p=d[1],f=d[2],y=d[3],b={position:"sticky",top:"0px",paddingTop:"0.15rem",paddingBottom:"0.15rem",borderRadius:"0",backgroundColor:f};return o.a.createElement("div",{id:"movehistory",className:"center",style:{overflowY:"scroll",display:"block",height:l,MozUserSelect:"none",WebkitUserSelect:"none",msUserSelect:"none",userSelect:"none"}},o.a.createElement(g.Table,{centered:!0,style:{width:"100%"}},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{style:b},"#"),o.a.createElement("th",{style:b},"Move"),o.a.createElement("th",{style:b},"Distance"),o.a.createElement("th",{style:b},"# Walls"))),o.a.createElement("tbody",null,t.map((function(e,l){var i;if(r===l&&l<t.length-1)i=y;else if(0===l)i=f;else{i=1===1+(l+(n?1:0))%2?u:p}return o.a.createElement("tr",{onClick:function(){return a(l)},style:{cursor:"pointer",backgroundColor:i},className:m?Me.a.hoveredMode:void 0,key:l},o.a.createElement("td",{style:Rt},l),o.a.createElement("td",{style:Rt},Lt(e)),o.a.createElement("td",{style:Rt},e.distances[0]+" - "+e.distances[1]),o.a.createElement("td",{style:Rt},e.wallCounts[0]+" - "+e.wallCounts[1]))})))))},Mt=function(e){var t=e.lifeCycleStage,n=e.handleResign,a=e.handleOfferDraw,r=e.handleRequestTakeback,l=e.handleGiveExtraTime,i=e.moveHistory,s=e.clientRole,c=e.creatorStarts,m=e.handleViewMove,d=e.viewIndex,u=e.turnCount,g=e.handleSeeFirstMove,h=e.handleSeePreviousMove,p=e.handleSeeNextMove,f=e.handleSeeLastMove,y=e.handleToggleVolume,b=e.isVolumeOn,v=e.handleLeaveGame,k=e.handleIncreaseBoardSize,w=e.handleDecreaseBoardSize,E=e.zoomLevel,C=e.controlPanelHeight,T=e.isOpponentPresent,S=e.menuTheme,x=e.boardTheme,O=e.isDarkModeOn,P=C-108-15-10,D=3===t||2===t&&c===("creator"===s),R="spectator"===s;return o.a.createElement("div",{style:{backgroundColor:L(S,"container",O),width:"100%",height:"auto",display:"grid",padding:"".concat(5,"px"),gridTemplateColumns:"repeat(4, 1fr)",gridTemplateRows:"".concat(36,"px 1fr ").concat(36,"px ").concat(36,"px"),columnGap:"".concat(5,"px"),rowGap:"".concat(5,"px"),gridArea:"panel"}},o.a.createElement(kt,{icon:"flag",tooltip:"Resign",modalTitle:"Resign",modalBody:"Are you sure you want to resign?",modalConfirmButtonText:"Resign",onClick:n,disabled:R||3!==t,menuTheme:S,isDarkModeOn:O}),o.a.createElement(kt,{icon:"local_florist",tooltip:"Offer Draw",modalTitle:"Offer Draw",modalBody:"Are you sure you want to offer a draw?",modalConfirmButtonText:"Offer draw",onClick:a,disabled:R||!T||3!==t,menuTheme:S,isDarkModeOn:O}),o.a.createElement(kt,{icon:"replay",tooltip:"Request takeback",onClick:function(){V("A takeback request was sent to the opponent.",5e3),r()},disabled:R||!T||!D,menuTheme:S,isDarkModeOn:O}),o.a.createElement(kt,{icon:"add_alarm",tooltip:"Give 60 seconds",onClick:function(){V("You added 60s to the opponent's clock.",5e3),l()},disabled:R||3!==t,menuTheme:S,isDarkModeOn:O}),o.a.createElement("div",{style:{gridColumnStart:"1",gridColumnEnd:"5"}},o.a.createElement(Gt,{moveHistory:i,creatorStarts:c,handleViewMove:m,viewIndex:d,height:P,menuTheme:S,boardTheme:x,isDarkModeOn:O})),o.a.createElement(kt,{icon:"fast_rewind",onClick:g,disabled:t<=1||0===d,menuTheme:S,isDarkModeOn:O}),o.a.createElement(kt,{icon:"navigate_before",onClick:h,disabled:t<=1||0===d,menuTheme:S,isDarkModeOn:O}),o.a.createElement(kt,{icon:"navigate_next",onClick:p,disabled:t<=1||d===u,menuTheme:S,isDarkModeOn:O}),o.a.createElement(kt,{icon:"fast_forward",onClick:f,disabled:t<=1||d===u,menuTheme:S,isDarkModeOn:O}),o.a.createElement(kt,{icon:b?"volume_up":"volume_off",tooltip:b?"Turn off sound effects":"Turn on sound effects",onClick:y,disabled:R,menuTheme:S,isDarkModeOn:O}),o.a.createElement(kt,{icon:"zoom_out",tooltip:"Decrease board size",onClick:w,disabled:0===E,menuTheme:S,isDarkModeOn:O}),o.a.createElement(kt,{icon:"zoom_in",tooltip:"Increase board size",onClick:k,disabled:10===E,menuTheme:S,isDarkModeOn:O}),o.a.createElement(kt,{icon:"home",tooltip:"Return to lobby",onClick:v,menuTheme:S,isDarkModeOn:O}))};const It=new Fe.a(qe.a);var Nt=({socket:e,clientParams:t,isLargeScreen:n,boardTheme:r,handleReturnToLobby:l,handleToggleDarkMode:i,handleToggleTheme:s})=>{const c=t.menuTheme,m=t.isDarkModeOn,[d,u]=Object(f.a)(["isVolumeOn","zoomLevel"]),[h,p]=Object(y.a)((e=>{const t={joinCode:null,timeControl:null,names:[null,null],tokens:["default","default"],matchScore:[0,0],opponentAbandoned:!1,arePlayersPresent:[!1,!1],creatorStarts:null,winner:"",finishReason:"",lifeCycleStage:-2,moveHistory:[{index:0,actions:[],grid:ue(H.dims),playerPos:H.startPos,timeLeft:[null,null],distances:se(H),wallCounts:[0,0]}],ratings:[0,0],clientRole:null,moveToSend:null,ghostAction:null,premoveActions:[],isVolumeOn:!1,shouldPlaySound:!1,isKeyPressed:!1,viewIndex:0,zoomLevel:5,waitingForPing:0,showDrawDialog:!1,showTakebackDialog:!1,showRematchDialog:!1,boardSettings:H};return nt(t,e),t})(d));Object(a.useEffect)(()=>(e.once("gameCreated",({joinCode:e,creatorStarts:t,rating:n})=>{p(a=>{rt(a,e,t,n)})}),e.once("gameJoined",({creatorName:e,creatorToken:t,timeControl:n,boardSettings:a,creatorStarts:o,creatorPresent:r,creatorRating:l,joinerRating:i})=>{p(s=>{lt(s,e,t,n,a,o,r,l,i)})}),e.once("requestedGame",({game:e})=>{p(t=>{((e,t)=>{at(e,t.timeControl,t.boardSettings,t.playerNames[0],t.playerTokens[0]),rt(e,t.joinCode,t.creatorStarts,t.ratings[0]),it(e,t.playerNames[1],t.playerTokens[1],t.ratings[1]);for(let n=0;n<t.moveHistory.length;n++){const a=t.moveHistory[n].actions,o=t.moveHistory[n].remainingTime;st(e,a,o,n+1)}e.clientRole=$e,e.matchScore=t.matchScore,e.winner=t.winner,e.finishReason=t.finishReason,e.lifeCycleStage=4})(t,e)})}),e.on("returnedToOngoingGame",({ongoingGame:e,isCreator:t,timeLeft:n})=>{p(a=>{((e,t,n,a)=>{if(e.timeControl)return;(n?Ve:Ye)===Ve?(at(e,t.timeControl,t.boardSettings,t.playerNames[0],t.playerTokens[0]),rt(e,t.joinCode,t.creatorStarts,t.ratings[0]),it(e,t.playerNames[1],t.playerTokens[1],t.ratings[1])):(ot(e,t.joinCode,t.playerNames[1],t.playerTokens[1]),lt(e,t.playerNames[0],t.playerTokens[0],t.timeControl,t.boardSettings,t.creatorStarts,!0,t.ratings[0],t.ratings[1])),e.arePlayersPresent=t.arePlayersPresent;for(let r=0;r<t.moveHistory.length;r++){const n=t.moveHistory[r].actions,a=t.moveHistory[r].remainingTime;st(e,n,a,r+1)}e.matchScore=t.matchScore,e.winner=t.winner,e.finishReason=t.finishReason;const o=Ue(e);e.moveHistory[o].timeLeft=a,""!==t.winner?e.lifeCycleStage=4:0===a[0]?yt(e,1):0===a[1]&&yt(e,0)})(a,e,t,n),a.waitingForPing=0})}),e.on("opponentReturned",()=>{p(e=>{e.arePlayersPresent[e.clientRole===Ve?1:0]=!0,e.waitingForPing=0})}),e.on("ongoingGameNotFound",()=>{V("Couldn't find the game anymore.",5e3),l()}),e.on("gameJoinFailed",()=>{V("There is no game with this code waiting for someone to join.",5e3),l()}),e.on("invalidEloIdError",()=>{V("This ELO id is not valid.",5e3),l()}),e.on("joinSelfGameFailed",()=>{V("You cannot play against yourself. To play as both sides from the same browser, play one of the sides from an Incognito window.",12e3),l()}),e.on("gameNotFoundError",()=>{V("There was an issue on the server and we couldn't reach the other player.",5e3),p(e=>{e.waitingForPing=0})}),e.once("joinerJoined",({joinerName:e,joinerToken:t,joinerRating:n})=>{p(a=>{1!==a.lifeCycleStage&&(a.shouldPlaySound=!0,it(a,e,t,n),a.arePlayersPresent[1]=!0,a.waitingForPing=0)})}),e.on("drawOffered",()=>{p(e=>{e.showDrawDialog=!0,e.waitingForPing=0})}),e.on("drawRejected",()=>{V("The opponent declined the draw offer.",5e3),p(e=>{e.waitingForPing=0})}),e.on("drawAccepted",()=>{V("The opponent accepted the draw offer.",5e3),p(e=>{ut(e,"agreement"),e.waitingForPing=0})}),e.on("takebackRequested",()=>{p(e=>{e.showTakebackDialog=!0,e.waitingForPing=0})}),e.on("takebackRejected",()=>{V("The opponent declined the takeback request.",5e3),p(e=>{e.waitingForPing=0})}),e.on("takebackAccepted",()=>{V("The opponent agreed to the takeback.",5e3),p(e=>{const t=e.clientRole===Ve;ht(e,t),e.waitingForPing=0})}),e.on("rematchOffered",()=>{p(e=>{e.showRematchDialog=!0,e.waitingForPing=0})}),e.on("rematchRejected",()=>{V("The opponent declined the rematch offer.",5e3),p(e=>{e.waitingForPing=0})}),e.on("rematchAccepted",()=>{V("The opponent accepted the rematch offer.",5e3),p(e=>{e.shouldPlaySound=!0,pt(e),e.waitingForPing=0})}),e.on("extraTimeReceived",()=>{V("The opponent added 60s to your clock.",5e3),p(e=>{const t=e.clientRole===Ve?0:1;ft(e,t),e.waitingForPing=0})}),e.on("resigned",()=>{V("The opponent resigned.",5e3),p(e=>{e.shouldPlaySound=!0;const t=e.clientRole!==Ve;gt(e,t),e.waitingForPing=0})}),e.on("moved",({actions:e,moveIndex:t,remainingTime:n})=>{p(a=>{a.shouldPlaySound=!0,st(a,e,n,t),a.waitingForPing=0})}),e.on("leftGame",()=>{p(e=>{e.arePlayersPresent[e.clientRole===Ve?1:0]=!1,e.waitingForPing=0})}),e.on("abandonedGame",()=>{V("The opponent abandoned the game.",5e3),p(e=>{((e,t)=>{4!==e.lifeCycleStage&&(e.lifeCycleStage=4,e.winner=t?Ye:Ve,e.matchScore[t?1:0]++,e.finishReason="abandon",dt(e))})(e,e.clientRole!==Ve),e.waitingForPing=0})}),e.on("newRatingsNotification",({clientIdx:e,oldRatings:t,newRatings:n})=>{const a=Math.round(t[e]),o=Math.round(n[e]),r=o-a;V(`New rating: ${a} ${r>=0?"+ "+r:"- "+-r} = ${o}`,1e4),p(e=>{((e,t)=>{e.ratings=t})(e,n),e.waitingForPing=0})}),e.on("pongFromServer",()=>{p(e=>{e.waitingForPing=0})}),()=>{e.removeAllListeners()}),[e,p,l]),Object(a.useEffect)(()=>{-2===h.lifeCycleStage&&(t.clientRole===Ve?(p(e=>{at(e,t.timeControl,t.boardSettings,t.playerName,t.token),e.arePlayersPresent[0]=!0}),e.emit("createGame",{name:t.playerName,token:t.token,timeControl:t.timeControl,boardSettings:t.boardSettings,eloId:t.eloId,isPublic:t.isPublic})):t.clientRole===Ye?(p(e=>{ot(e,t.joinCode,t.playerName,t.token),e.arePlayersPresent[1]=!0}),e.emit("joinGame",{joinCode:t.joinCode,name:t.playerName,token:t.token,eloId:t.eloId})):t.clientRole===$e?e.emit("getGame",{gameId:t.watchGameId}):t.clientRole===Je?e.emit("returnToOngoingGame",{eloId:t.eloId}):console.error("unknown client role",t.clientRole))});const b=()=>{e.emit("leaveGame"),l()};Object(a.useEffect)(()=>{h.isVolumeOn&&h.shouldPlaySound&&(It.play(),p(e=>{e.shouldPlaySound=!1}))},[p,h.isVolumeOn,h.shouldPlaySound]),Object(a.useEffect)(()=>{const e=setInterval(()=>{p(e=>{(e=>{if(3!==e.lifeCycleStage)return;const t=Xe(e),n=Ue(e);e.moveHistory[n].timeLeft[t]--,0===e.moveHistory[n].timeLeft[t]&&(e.shouldPlaySound=!0,yt(e,0===t?1:0))})(e)})},1e3);return()=>clearInterval(e)},[p]),Object(a.useEffect)(()=>{const t=setInterval(()=>{3===h.lifeCycleStage&&(1===h.waitingForPing?e.emit("pingServer"):2===h.waitingForPing&&V("The server is not responding. The game is probably lost. Sorry for the inconvenience.",8e3),p(e=>{e.waitingForPing=(e.waitingForPing+1)%3}))},5e3);return()=>clearInterval(t)},[e,h.lifeCycleStage,h.waitingForPing,p]);const v=e=>{p(t=>{const n=Qe(t)===(t.clientRole===Ve);ct(t,e,n)})};Object(a.useEffect)(()=>{h.moveToSend&&(e.emit("move",h.moveToSend),p(e=>{e.moveToSend=null}))}),Object(a.useEffect)(()=>{h.clientRole!==$e&&("goal"===h.finishReason&&e.emit("playerReachedGoal",{winner:h.winner}),"time"===h.finishReason&&e.emit("playerWonOnTime",{winner:h.winner}))},[e,h.clientRole,h.winner,h.finishReason]);Object(a.useEffect)(()=>(window.addEventListener("keydown",k),window.addEventListener("keyup",w),()=>{window.removeEventListener("keydown",k),window.removeEventListener("keyup",w)}));const k=({key:e})=>{if(h.isKeyPressed)return;if(p(e=>{e.isKeyPressed=!0}),"m"===e)return void C();if(h.viewIndex<Ue(h)||4===h.lifeCycleStage)return void("ArrowDown"===e||"ArrowRight"===e?h.viewIndex<Ue(h)&&p(e=>{e.viewIndex++}):"ArrowUp"!==e&&"ArrowLeft"!==e||h.viewIndex>0&&p(e=>{e.viewIndex--}));let t;if(h.ghostAction&&Ze(h.ghostAction)===X)t=h.ghostAction;else{const e=Ue(h);t=h.moveHistory[e].playerPos[Xe(h)]}if("ArrowDown"===e)t=[t[0]+2,t[1]];else if("ArrowUp"===e)t=[t[0]-2,t[1]];else if("ArrowLeft"===e)t=[t[0],t[1]-2];else{if("ArrowRight"!==e)return;t=[t[0],t[1]+2]}v(t)},w=()=>{p(e=>{e.isKeyPressed=!1})},E=e=>{e<0||e>Ue(h)||p(t=>{t.viewIndex!==e&&(e>Ue(t)||(t.viewIndex=e,t.ghostAction=null,t.premoveActions=[]))})};Object(a.useEffect)(()=>{const e=document.getElementById("movehistory");e.scrollTop=e.scrollHeight},[h.moveHistory.length]);const C=()=>{u("isVolumeOn",h.isVolumeOn?"false":"true",{path:"/"}),p(e=>{e.isVolumeOn=!e.isVolumeOn})},T=e=>{e.preventDefault(),b()};let S,x;if(Object(a.useEffect)(()=>(window.history.pushState(null,null,window.location.pathname),window.addEventListener("popstate",T),()=>window.removeEventListener("popstate",T))),4===h.lifeCycleStage)[S,x]=h.moveHistory[h.viewIndex].timeLeft;else{const e=Ue(h);[S,x]=h.moveHistory[e].timeLeft}let[O,P]=n?[W,F]:[_,q];const D=Math.pow(1.1,h.zoomLevel-5),R=O*D,G=P*D,M=O/P,I=(z[0]+1)/2,N=(z[1]+1)/2,j=(z[0]-1)/2,B=(z[1]-1)/2,A=(h.boardSettings.dims[0]+1)/2,Y=(h.boardSettings.dims[1]+1)/2,$=(h.boardSettings.dims[0]-1)/2,J=(h.boardSettings.dims[1]-1)/2,U=G*B+R*N,Q=(G*j+R*I)/(A+$/M),K=U/(Y+J/M),Z=Math.min(Q,K),ee=Z/M,te=ee*$+Z*A,ne=ee*J+Z*Y,ae=n?15:6,oe=Math.max(te,360);let re,le,ie;if(n){ie="'timer status' 'board panel'",re=`${100}px ${oe}px`,le=Math.max(ne,560)+"px 360px"}else{ie="'timer' 'board' 'status' 'panel'",re=`${50}px ${te}px ${80}px ${oe}px`,le=U+"px"}const ce=h.moveHistory[h.viewIndex].playerPos,me=(e=>{if(0===e.viewIndex)return null;const t=Ke(e)?1:0,n=e.moveHistory[e.viewIndex].playerPos[t];let a;return a=e.viewIndex<=2?e.boardSettings.startPos[t]:e.moveHistory[e.viewIndex-2].playerPos[t],de(a,n)?null:a})(h),ge=h.viewIndex>0?h.moveHistory[h.viewIndex].actions:[];return o.a.createElement("div",null,o.a.createElement(Ct,{context:h.clientRole===$e?"spectator":"player",joinCode:h.joinCode,helpText:Dt,handleLeaveGame:b,isLargeScreen:n,menuTheme:c,isDarkModeOn:m,handleToggleDarkMode:i,handleToggleTheme:s}),o.a.createElement("div",{style:{display:"grid",gridTemplateRows:re,gridTemplateColumns:le,gridTemplateAreas:ie,columnGap:ae+"px",rowGap:ae+"px",margin:ae+"px",justifyContent:"center",alignContent:"center"}},o.a.createElement(Pt,{lifeCycleStage:h.lifeCycleStage,names:h.names,ratings:h.ratings,indexToMove:Xe(h),timeLeft:[S,x],isLargeScreen:n,scores:h.matchScore,arePlayersPresent:h.arePlayersPresent,menuTheme:c,boardTheme:r,isDarkModeOn:m}),o.a.createElement(St,{lifeCycleStage:h.lifeCycleStage,names:h.names,indexToMove:Xe(h),winner:h.winner,finishReason:h.finishReason,timeControl:h.timeControl,creatorStarts:h.creatorStarts,isLargeScreen:n,menuTheme:c,isDarkModeOn:m}),o.a.createElement(bt,{creatorToMove:Ke(h),grid:h.moveHistory[h.viewIndex].grid,playerPos:ce,goals:h.boardSettings.goalPos,ghostAction:h.ghostAction,premoveActions:h.premoveActions,lastActions:ge,tracePos:me,handleClick:e=>v(e),groundSize:Z,wallWidth:ee,menuTheme:c,boardTheme:r,isDarkModeOn:m,tokens:h.tokens}),o.a.createElement(Mt,{lifeCycleStage:h.lifeCycleStage,handleResign:()=>{e.emit("resign"),p(e=>{gt(e,e.clientRole===Ve)})},handleOfferDraw:()=>{e.emit("offerDraw")},handleRequestTakeback:()=>{e.emit("requestTakeback")},handleGiveExtraTime:()=>{e.emit("giveExtraTime"),p(e=>{const t=e.clientRole===Ve?1:0;ft(e,t)})},moveHistory:h.moveHistory,clientRole:h.clientRole,creatorStarts:h.creatorStarts,handleViewMove:E,viewIndex:h.viewIndex,turnCount:Ue(h),handleSeeFirstMove:()=>{E(0);document.getElementById("movehistory").scrollTop=0},handleSeePreviousMove:()=>E(h.viewIndex-1),handleSeeNextMove:()=>E(h.viewIndex+1),handleSeeLastMove:()=>{E(Ue(h));const e=document.getElementById("movehistory");e.scrollTop=e.scrollHeight},handleToggleVolume:C,isVolumeOn:h.isVolumeOn,handleLeaveGame:b,menuTheme:c,boardTheme:r,isDarkModeOn:m,handleIncreaseBoardSize:()=>{h.zoomLevel<10&&u("zoomLevel",h.zoomLevel+1,{path:"/"}),p(e=>{e.zoomLevel<10&&e.zoomLevel++})},handleDecreaseBoardSize:()=>{h.zoomLevel>0&&u("zoomLevel",h.zoomLevel-1,{path:"/"}),p(e=>{e.zoomLevel>0&&e.zoomLevel--})},zoomLevel:h.zoomLevel,controlPanelHeight:oe,isOpponentPresent:et(h)})),4===h.lifeCycleStage&&h.clientRole!==$e&&o.a.createElement(g.Row,{className:"valign-wrapper",style:{marginTop:"1rem"}},o.a.createElement(g.Col,{className:"center",s:12},o.a.createElement(g.Button,{large:!0,style:{backgroundColor:L(c,"importantButton",m)},node:"button",waves:"light",onClick:()=>{V("Rematch offer sent.",5e3),e.emit("offerRematch")},disabled:!et(h)},"Rematch"))),o.a.createElement("div",{style:{height:"100%"}}),o.a.createElement(Tt,{isOpen:h.showDrawDialog,title:"Draw offer received",body:"The opponent offered a draw.",acceptButtonText:"Accept",rejectButtonText:"Decline",callback:t=>{t?(e.emit("acceptDraw"),p(e=>{ut(e,"agreement")})):(e.emit("rejectDraw"),p(e=>{e.showDrawDialog=!1}))},menuTheme:c,isDarkModeOn:m}),o.a.createElement(Tt,{isOpen:h.showRematchDialog,title:"Rematch offer received",body:"The opponent would like a rematch.",acceptButtonText:"Accept",rejectButtonText:"Decline",callback:t=>{t?(e.emit("acceptRematch"),p(e=>{pt(e)})):(e.emit("rejectRematch"),p(e=>{e.showRematchDialog=!1}))},menuTheme:c,isDarkModeOn:m}),o.a.createElement(Tt,{isOpen:h.showTakebackDialog,title:"Takeback request received",body:"The opponent requested a takeback. If you accept, their last move will be undone.",acceptButtonText:"Accept",rejectButtonText:"Decline",callback:t=>{t?(V("The last move played on the board has been undone.",5e3),e.emit("acceptTakeback"),p(e=>{const t=e.clientRole===Ye;ht(e,t)})):(e.emit("rejectTakeback"),p(e=>{e.showTakebackDialog=!1}))},menuTheme:c,isDarkModeOn:m}))},jt=function(e){return e.nextMove%2===(e.game.creatorStarts?0:1)},Bt=function(e){var t=e.socket,n=e.isLargeScreen,r=e.menuTheme,l=e.boardTheme,s=e.isDarkModeOn,c=e.handleViewGame,m=Object(y.a)({needToRequestGame:!0,finishedGameWait:3,game:null,nextMove:0,grid:ue(H.dims),playerPos:H.startPos,prevPos:[null,null]}),d=Object(i.a)(m,2),u=d[0],g=d[1];Object(a.useEffect)((function(){var e=setInterval((function(){if(u.needToRequestGame)return g((function(e){e.needToRequestGame=!1})),void t.emit("getRandomGame");u.game&&(u.game.moveHistory?u.nextMove!==u.game.moveHistory.length?g((function(e){if(e.game&&e.game.moveHistory&&e.nextMove!==e.game.moveHistory.length){for(var t=jt(e)?0:1,n=e.game.moveHistory[e.nextMove].actions,a=0;a<n.length;a++){var o=n[a];me(o)===X?(e.prevPos[t]=e.playerPos[t],e.playerPos[t]=o):e.grid[o[0]][o[1]]=t+1}e.nextMove++}})):g((function(e){e.finishedGameWait>0?e.finishedGameWait--:(e.needToRequestGame=!0,e.finishedGameWait=3)})):console.error("game does not have a move history"))}),200);return function(){return clearInterval(e)}})),Object(a.useEffect)((function(){return t.on("requestedRandomGame",(function(e){var t=e.game;g((function(e){e.game=t,e.grid=ue(t.boardSettings.dims),e.playerPos=t.boardSettings.startPos,e.prevPos=[null,null],e.nextMove=0}))})),function(){t.off("requestedRandomGame")}}),[t,g,u.needToRequestGame]);var h=n?W:_,p=n?F:q,f=[];u.nextMove>0&&(f=u.game.moveHistory[u.nextMove-1].actions);var b=u.game&&jt(u),v=null;return 1!==f.length&&(2!==f.length||me(f[0])!==X&&me(f[1])!==X)||(v=b?u.prevPos[1]:u.prevPos[0]),o.a.createElement(bt,{grid:u.grid,playerPos:u.playerPos,goals:u.game?u.game.boardSettings.goalPos:H.goalPos,ghostAction:null,creatorToMove:b,premoveActions:[],lastActions:f,tracePos:v,handleClick:function(){u.game&&c(u.game._id)},groundSize:h,wallWidth:p,menuTheme:r,boardTheme:l,isDarkModeOn:s,tokens:u.game?u.game.playerTokens:["default","default"]})};var At=({socket:e})=>{const[t,n]=Object(f.a)(["isDarkModeOn","menuTheme","token","playerName","duration","increment","numRows","numCols","eloId","isPublic"]),[r,l]=Object(y.a)((e=>{let t=parseFloat(e.numRows);t=isNaN(t)?H.dims[0]:t;let n=parseFloat(e.numCols);return n=isNaN(n)?H.dims[1]:n,{playerName:e.playerName||w(9),token:e.token||"default",timeControl:{duration:e.duration||"5",increment:e.increment||"5"},boardSettings:{dims:[t,n],startPos:j([t,n]),goalPos:B([t,n])},joinCode:"",clientRole:"",watchGameId:null,eloId:e.eloId&&e.eloId.length>=4&&e.eloId.length<=16?e.eloId:E(16),isPublic:!(!e.isPublic||"true"!==e.isPublic),isGamePageOpen:!1,hasOngoingGame:!1,isDarkModeOn:!(!e.isDarkModeOn||"true"!==e.isDarkModeOn),menuTheme:e.menuTheme&&"green"===e.menuTheme?"green":"blue",recentGames:{games:[],numGamesToRequest:16},showMoreOptions:!1,ranking:{playerList:[],needToRequestRanking:!0}}})(t)),i=()=>{const e="green"===r.menuTheme?"blue":"green";l(t=>{t.menuTheme=e}),n("menuTheme",e,{path:"/"})},s=()=>{const e=!r.isDarkModeOn;l(t=>{t.isDarkModeOn=e}),n("isDarkModeOn",e?"true":"false",{path:"/"})},c=e=>{l(t=>{t.clientRole="spectator",t.watchGameId=e,t.hasOngoingGame=!1,t.isGamePageOpen=!0})},m=()=>{let e=r.playerName;return""===e?e="Anon":n("playerName",e,{path:"/"}),e},d=()=>{let e=r.eloId;return e.length<4||e.length>16?e=E(16):n("eloId",e,{path:"/"}),e},u=()=>{let e=parseFloat(r.timeControl.duration);return isNaN(e)?(e=5,V("Invalid duration, using 5m instead",5e3)):e<.1?(e=5/60,V("Duration too short, using 5s instead",5e3)):e>120?(e=120,V("Duration too long, using 2h instead",5e3)):n("duration",e,{path:"/"}),e},b=()=>{let e=parseFloat(r.timeControl.increment);return isNaN(e)||e<0?(e=0,V("Invalid increment, using 0s instead",5e3)):e>300?(e=300,V("Increment too large, using 5m instead",5e3)):n("increment",e,{path:"/"}),e},v=()=>{const e=r.boardSettings,t=se(e);return t[0]<=2||t[1]<=2?(V("The goal is too close to the player, using default board instead",5e3),H):(n("numRows",r.boardSettings.dims[0],{path:"/"}),n("numCols",r.boardSettings.dims[1],{path:"/"}),e)};Object(a.useEffect)(()=>{r.hasOngoingGame||r.isGamePageOpen||e.emit("checkHasOngoingGame",{eloId:r.eloId})},[e,r.hasOngoingGame,r.isGamePageOpen,r.eloId]),Object(a.useEffect)(()=>{e.on("respondHasOngoingGame",({res:e})=>{l(t=>{t.isGamePageOpen||(t.hasOngoingGame=e)})})}),Object(a.useEffect)(()=>{document.body.style.backgroundColor=L(r.menuTheme,"background",r.isDarkModeOn),"blue"===r.menuTheme?document.body.style.backgroundImage=`url('${r.isDarkModeOn?G.a:I.a}')`:document.body.style.backgroundImage="none"},[r.isDarkModeOn,r.menuTheme]),Object(a.useEffect)(()=>{r.ranking.needToRequestRanking&&e.emit("getRanking",{count:100})},[e,l,r.ranking.needToRequestRanking]),Object(a.useEffect)(()=>{e.on("requestedRanking",({ranking:e})=>{l(t=>{t.ranking.playerList=e,t.ranking.needToRequestRanking=!1})})},[e,l,r.ranking.playerList]),Object(a.useEffect)(()=>{const t=r.recentGames.numGamesToRequest;t>0&&t<100&&e.emit("getRecentGames",{count:t})},[e,l,r.recentGames.numGamesToRequest]),Object(a.useEffect)(()=>{e.once("requestedRecentGames",({games:e})=>{l(t=>{t.recentGames.games=e,t.recentGames.numGamesToRequest=2*e.length})})},[e,l,r.recentGames.games]);const k=Object(h.useMediaQuery)({query:"(min-width: 1300px)"}),C=Object(h.useMediaQuery)({query:"(min-width: 990px)"});let[T,S]=C?[W,F]:[_,q];const[x,O]=((e,t,n)=>[re(e,t,n),le(e,t,n)])(z,T,S),P=C?15:6,D=x+40;let R,M,N;k?(R="'showcaseArea tabsArea'",M=D+"px",N=`${O}px ${O}px`):(R="'showcaseArea' 'tabsArea'",M=`${D}px ${D}px`,N=O+"px");const A={display:"grid",gridTemplateRows:M,gridTemplateColumns:N,gridTemplateAreas:R,columnGap:2*P+"px",rowGap:P+"px",margin:P+"px",justifyContent:"center",alignContent:"center"},Y=D+"px",$=1.5*O+"px",J=o.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",alignSelf:"center",justifySelf:"center",fontSize:"20px",paddingBottom:P,height:40},title:"Ranking based on ELO points."},"ELO Ranking"),U=o.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",alignSelf:"center",justifySelf:"center",fontSize:"20px",paddingBottom:P,height:40},title:"Random games already played"},"Game Showcase"),Q=o.a.createElement(g.Button,{large:!0,style:{backgroundColor:L(r.menuTheme,"importantButton",r.isDarkModeOn)},node:"button",waves:"light",onClick:()=>{l(e=>{e.clientRole="returner",e.hasOngoingGame=!1,e.isGamePageOpen=!0})}},"Return to game");return o.a.createElement("div",{style:{paddingBottom:"2rem"}},o.a.createElement(p.b,null),r.isGamePageOpen&&o.a.createElement(Nt,{socket:e,clientParams:r,isLargeScreen:C,boardTheme:"monochromeBoard",handleReturnToLobby:()=>{l(e=>{e.hasOngoingGame=!1,e.isGamePageOpen=!1,e.recentGames.numGamesToRequest=16,e.ranking.needToRequestRanking=!0,e.clientRole="",e.joinCode=""})},handleToggleDarkMode:s,handleToggleTheme:i}),!r.isGamePageOpen&&o.a.createElement("div",null,o.a.createElement(Ct,{context:"lobby",isLargeScreen:C,menuTheme:r.menuTheme,isDarkModeOn:r.isDarkModeOn,helpText:Se,aboutText:xe,handleToggleDarkMode:s,handleToggleTheme:i}),o.a.createElement(De,{clientParams:r,isLargeScreen:C,handlePlayerName:e=>{l(t=>{t.playerName=e.slice(0,9)})},handleDuration:e=>{l(t=>{t.timeControl.duration=e})},handleIncrement:e=>{l(t=>{t.timeControl.increment=e})},handleIsPublic:e=>{l(t=>{t.isPublic=e}),n("isPublic",e?"true":"false",{path:"/"})},handleNumRows:e=>{l(t=>{const n=t.boardSettings.dims[0];t.boardSettings.dims[0]=e;for(let a=0;a<2;a++){let o=t.boardSettings.startPos[a][0];(o>=e-1||o===n-1)&&(t.boardSettings.startPos[a][0]=e-1);let r=t.boardSettings.goalPos[a][0];(r>=e-1||r===n-1)&&(t.boardSettings.goalPos[a][0]=e-1)}})},handleNumCols:e=>{l(t=>{const n=t.boardSettings.dims[1];t.boardSettings.dims[1]=e;for(let a=0;a<2;a++){let o=t.boardSettings.startPos[a][1];(o>=e-1||o===n-1)&&(t.boardSettings.startPos[a][1]=e-1);let r=t.boardSettings.goalPos[a][1];(r>=e-1||r===n-1)&&(t.boardSettings.goalPos[a][1]=e-1)}})},handleShowMoreOptions:()=>{l(e=>{e.showMoreOptions=!e.showMoreOptions})},handleStartPos:(e,t,n)=>{l(a=>{a.boardSettings.startPos[e][t]=n})},handleGoalPos:(e,t,n)=>{l(a=>{a.boardSettings.goalPos[e][t]=n})},handleJoinCode:e=>{l(t=>{t.joinCode=e})},handleCreateGame:()=>{const e=u(),t=b(),n=v(),a=m(),o=d();l(r=>{r.clientRole="creator",r.timeControl.duration=e,r.timeControl.increment=t,r.boardSettings=n,r.playerName=a,r.eloId=o,r.hasOngoingGame=!1,r.isGamePageOpen=!0})},handleJoinGame:()=>{const e=m(),t=d();l(n=>{n.clientRole="joiner",n.playerName=e,n.eloId=t,n.hasOngoingGame=!1,n.isGamePageOpen=!0})},handleRefreshName:()=>{l(e=>{e.playerName=w(9)})},handleToken:e=>{l(t=>{t.token=e}),n("token",e,{path:"/"})},handleEloId:e=>{l(t=>{t.eloId=e.slice(0,16)})}}),r.hasOngoingGame&&o.a.createElement(g.Row,{className:"valign-wrapper",style:{marginTop:"1rem"}},o.a.createElement(g.Col,{className:"center",s:12},Q)),o.a.createElement("div",{style:A},o.a.createElement("div",{style:{gridArea:"showcaseArea"}},U,o.a.createElement(Bt,{socket:e,isLargeScreen:C,menuTheme:r.menuTheme,boardTheme:"monochromeBoard",isDarkModeOn:r.isDarkModeOn,handleViewGame:c})),o.a.createElement("div",{style:{gridArea:"tabsArea",height:"100%"}},o.a.createElement(Ae,{socket:e,isLargeScreen:C,menuTheme:r.menuTheme,isDarkModeOn:r.isDarkModeOn,recentGames:r.recentGames.games,handleViewGame:c,handleAcceptChallenge:e=>{const t=m(),n=d();l(a=>{a.joinCode=e,a.clientRole="joiner",a.playerName=t,a.eloId=n,a.hasOngoingGame=!1,a.isGamePageOpen=!0})}}))),J,o.a.createElement("div",{style:{height:Y,width:$,marginLeft:"auto",marginRight:"auto",border:"1px solid "+L(r.menuTheme,"container",r.isDarkModeOn)}},o.a.createElement(ze,{isLargeScreen:C,menuTheme:r.menuTheme,isDarkModeOn:r.isDarkModeOn,ranking:r.ranking.playerList}))))},Ht=function(){console.log("connecting to backend at ".concat("https://wallwars.herokuapp.com/"));var e=Object(a.useState)(d()("https://wallwars.herokuapp.com/")),t=Object(i.a)(e,1)[0];return o.a.createElement(o.a.StrictMode,null,o.a.createElement(u.a,null,o.a.createElement(s.a,null,o.a.createElement(c.d,null,o.a.createElement(c.b,{path:"/wallwars/index.html",exact:!0},o.a.createElement(At,{socket:t})),o.a.createElement(c.a,{to:"/wallwars/index.html"})))))};l.a.render(o.a.createElement(Ht,null),document.getElementById("root"))},71:function(e,t,n){e.exports=n.p+"static/media/blueBgDark.b39b76f7.jfif"},72:function(e,t,n){e.exports=n.p+"static/media/blueBgLight.6108cc32.jfif"},76:function(e,t,n){e.exports=n.p+"static/media/moveSound.6df49e4b.mp3"},80:function(e,t,n){e.exports=n(171)},85:function(e,t,n){}},[[80,1,2]]]);
//# sourceMappingURL=main.7e5508f0.chunk.js.map