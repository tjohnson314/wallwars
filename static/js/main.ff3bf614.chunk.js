(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{113:function(e,t){},168:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(12),l=n.n(r),i=(n(83),n(4)),c=n(76),s=n(5),m=n(71),u=n.n(m),d=n(172),f=n(1),g=n(48),h=n(17),p=n(23),v=n(171),y=n(72),b=n.n(y),w="#ffcdd2",k="#e57373",E="#ef5350",C="#f44336",T="#e53935",S="#d32f2f",x="#c5cae9",O="#5c6bc0",D="#3f51b5",j="#6583C3",P="#153373",R="#355393",M="#eaeaea",G="#454545",I="#313131",W="rgb(240,240,170)",L={background:["#009688","#004d40"],backgroundImage:["none","none"],container:["#00796b","keep"],button:["#4db6ac","keep"],importantButton:[C,"keep"],header:[E,"#b71c1c"],headerButton:[T,"keep"],recentGamesBackground:[k,S],recentGamesAlternate:[E,T]},A={background:[R,"keep"],backgroundImage:["blueBgLight","blueBgDark"],container:[R,P],button:[j,"keep"],importantButton:[C,"keep"],header:[R,P],headerButton:[j,"keep"],recentGamesBackground:[j,"#4866A6"],recentGamesAlternate:["#5876B6","keep"]},N={ground:["#d2d2d2",G],emptyWall:[M,I],pillar:["#cccccc",G],hoveredGround:["#fbe4D6","flip"],hoveredWall:["#f1bfa0","flip"],player1:[C,E],player2:[D,O],timer1:[E,"keep"],timer2:[O,"keep"],lowTime:["#ffb74d","keep"],wall1:[C,E],wall2:[D,O],goalBackground1:[w,S],goalBackground2:[x,"#303f9f"],goalToken:[M,I],ghost1:[w,w],ghost2:[x,x],ghostWall1:["#ef9a9a",k],ghostWall2:["#9fa8da",x],traceGround:[W,"#656505"],lastMoveTokenBorder:[W,"yellow"],lastMoveWallBorder:[W,"#fdd835"],coord:["#ffffff","#000000"],move1:[k,"keep"],move2:["#7986cb","keep"],currentMove:["#ffb300","keep"]},B=function(e,t,n){void 0===e[t]&&console.error("theme ".concat(e," does not have element ").concat(t));var a=e[t][0];if(!n)return a;var o=e[t][1];return"keep"===o?a:"flip"===o?b()(a):o},H=function(e,t,n){return"green"===e?B(L,t,n):"blue"===e?B(A,t,n):"monochromeBoard"===e?B(N,t,n):(console.error("unknown theme "+e),"#00FF00")},z=n(73),_=n.n(z),F=n(74),V=n.n(F),q={tl:{r:0,c:0},tr:{r:0,c:22},bl:{r:18,c:0},br:{r:18,c:22}},J={boardDims:{w:23,h:19},boardCorners:q,initialPlayerPos:[q.tl,q.tr],goals:[q.br,q.bl],groundSize:37,wallWidth:12,smallScreenGroundSize:23,smallScreenWallWidth:10},Y=n(34),U=n(31),Q=n.n(U),K=n(32),X=n.n(K),Z=function(e,t){t&&0!==t||(t=2500),Object(p.c)(e,{autoClose:t,hideProgressBar:!0,transition:p.a,pauseOnFocusLoss:!1})},$=n(15),ee=n.n($);function te(e){return e.r%2===0&&e.c%2===0?"Ground":e.r%2===0&&e.c%2===1||e.r%2===1&&e.c%2===0?"Wall":"Pillar"}function ne(e,t){return e.r===t.r&&e.c===t.c}function ae(e){for(var t=[],n=0;n<e.h;n++){t[n]=[];for(var a=0;a<e.w;a++)t[n][a]=0}return t}function oe(e,t){return e.r>=0&&e.r<t.h&&e.c>=0&&e.c<t.w}function re(e,t){return"Wall"===te(t)&&0!==e[t.r][t.c]}function le(e,t){var n=function(e){return{h:e.length,w:e[0].length}}(e);if("Ground"!==te(t))return[];for(var a=[{r:0,c:1},{r:0,c:-1},{r:1,c:0},{r:-1,c:0}],o=[],r=[t.r,t.c],l=r[0],i=r[1],c=0;c<a.length;c++){var s=[a[c].r,a[c].c],m=s[0],u=s[1],d={r:l+m,c:i+u},f={r:l+2*m,c:i+2*u};oe(f,n)&&!re(e,d)&&o.push(f)}return o}function ie(e,t,n){if(ne(t,n))return 0;var a=e[0].length,o=function(e){return e.r*a+e.c},r=[],l=0;r.push(t);var i=new Map;for(i.set(o(t),0);l<r.length;){var c=r[l];l+=1;for(var s=le(e,c),m=0;m<s.length;m++){var u=s[m];if(!i.has(o(u))){if(i.set(o(u),i.get(o(c))+1),ne(u,n))return i.get(o(u));r.push(u)}}}return-1}function ce(e,t,n,a){if(ne(t,n))return 0;var o=e[0].length,r=function(e){return e.r*o+e.c},l=[],i=0;l.push(t);var c=new Map;for(c.set(r(t),0);i<l.length;){var s=l[i];i+=1;var m=c.get(r(s));if(m>a)return!1;for(var u=le(e,s),d=0;d<u.length;d++){var f=u[d];if(!c.has(r(f))){if(ne(f,n))return m+1<=a;c.set(r(f),m+1),l.push(f)}}}return!1}function se(e,t,n){return-1!==ie(e,t,n)}function me(e,t,n,a){if(re(e,a))return!1;e[a.r][a.c]=1;var o=function(e,t,n){for(var a=0;a<t.length;a++)if(!se(e,t[a],n[a]))return!1;return!0}(e,t,n);return e[a.r][a.c]=0,o}function ue(e){return 0===e.r?"X":""+(10-e.r/2)}function de(e){return String.fromCharCode(97+e.c/2)}function fe(e){return"Ground"===te(e)?de(e)+ue(e):e.c%2===1?de({r:e.r,c:e.c-1})+de({r:e.r,c:e.c+1})+ue(e):de(e)+ue({r:e.r+1,c:e.c})+ue({r:e.r-1,c:e.c})}var ge=J.goals,he=J.boardDims,pe=J.initialPlayerPos,ve=function(e){return e.moveHistory.length-1},ye=function(e){return ve(e)%2===(e.creatorStarts?0:1)},be=function(e){return e.viewIndex%2===(e.creatorStarts?0:1)},we=function(e){return ye(e)?0:1},ke=function(e){return null===e?"None":te(e)},Ee=function(e){return e.arePlayersPresent["Creator"===e.clientRole?1:0]},Ce=function(e,t,n,a,o,r,l){for(var i=ee()(e),c=0;c<l.length;c++){var s=l[c];i[s.r][s.c]=1}return"Ground"===te(t)?ie(i,n,t):me(i,[n,a],[o,r],t)?1:0},Te=function(e,t){if(t&&(t.isVolumeOn&&"true"===t.isVolumeOn&&(e.isVolumeOn=!0),t.zoomLevel)){var n=parseInt(t.zoomLevel);n>=0&&n<=10&&(e.zoomLevel=n)}},Se=function(e,t,n,a){e.clientRole="Creator",e.lifeCycleStage=-1,e.timeControl=t,e.names[0]=n,e.tokens[0]=a;var o=60*t.duration;e.moveHistory[0].timeLeft=[o,o]},xe=function(e,t,n,a){e.clientRole="Joiner",e.lifeCycleStage=-1,e.joinCode=t,e.names[1]=n,e.tokens[1]=a},Oe=function(e,t,n){0!==e.lifeCycleStage&&(e.joinCode=t,e.creatorStarts=n,e.lifeCycleStage=0)},De=function(e,t,n,a,o,r){if(1!==e.lifeCycleStage){e.creatorStarts=o,e.names[0]=t,e.tokens[0]=n,e.timeControl=a,e.arePlayersPresent[0]=r;var l=60*a.duration;e.moveHistory[0].timeLeft=[l,l],e.lifeCycleStage=1}},je=function(e,t,n){1!==e.lifeCycleStage&&(e.names[1]=t,e.tokens[1]=n,e.lifeCycleStage=1)},Pe=function(e,t,n,a){if(!(e.lifeCycleStage<1||e.lifeCycleStage>3)){var o=ve(e);if(o===a-1){var r=we(e),l=0===r?1:0,i=ee()(e.moveHistory[o].playerPos),c=ee()(e.moveHistory[o].grid),s=ee()(e.moveHistory[o].timeLeft),m=ee()(e.moveHistory[o].wallCounts);s[r]=n;for(var u=0;u<t.length;u++){var d=t[u],f=te(d);if("Ground"===f){if(i[r]=d,ne(d,ge[r])){var g=o%2===0,h=ce(c,i[l],ge[l],2);g&&h?(e.winner="draw",e.gameWins[0]+=.5,e.gameWins[1]+=.5):(e.winner=0===r?"creator":"joiner",e.gameWins[r]+=1),e.finishReason="goal",e.lifeCycleStage=4}}else"Wall"===f?(c[d.r][d.c]=r+1,m[r]+=1):console.error("unexpected action type",f)}if(e.moveHistory.push({index:o+1,actions:t,grid:c,playerPos:i,timeLeft:s,distances:[ie(c,i[0],ge[0]),ie(c,i[1],ge[1])],wallCounts:m}),1===e.lifeCycleStage&&0===o?e.lifeCycleStage=2:2===e.lifeCycleStage&&1===o&&(e.lifeCycleStage=3),e.ghostAction=null,e.viewIndex=o+1,e.premoveActions.length>0){var p=e.premoveActions;e.premoveActions=[];for(var v=0;v<p.length;v++)Ge(e,p[v],!0,!1)}}}},Re=new Q.a(X.a),Me=function(){Re.play()},Ge=function(e,t,n,a){if(n){if(!(e.lifeCycleStage<1)&&!(e.lifeCycleStage>3)&&e.viewIndex===ve(e)&&!(t.r<0||t.r>=he.h||t.c<0||t.c>=he.w)){var o=te(t);if(!(e.lifeCycleStage<3&&"Wall"===o)){var r=we(e),l=0===r?1:0,i=ke(e.ghostAction),c="Wall"===i?[e.ghostAction]:[],s=ve(e),m=e.moveHistory[s].playerPos[r];"Wall"===o&&"Ground"===i&&(m=e.ghostAction);var u=Ce(e.moveHistory[s].grid,t,m,e.moveHistory[s].playerPos[l],ge[r],ge[l],c);if(!(u>2)){var d=null,f=null;if("None"===i){if("Wall"===o){if(1!==u)return;f=t}else if("Ground"===o)if(1===u)f=t;else{if(2!==u)return;d=[t]}}else if("Wall"===i){if("Wall"===o)if(ne(e.ghostAction,t))f=null;else{if(1!==u)return;d=[t,e.ghostAction]}else if("Ground"===o)if(0===u)f=null;else{if(1!==u)return;d=[t,e.ghostAction]}}else if("Ground"===i){if("Wall"===o){if(1!==u)return;d=[t,e.ghostAction]}else if("Ground"===o)if(0===u)f=null;else if(1===u)f=ne(t,e.ghostAction)?null:t;else{if(2!==u)return;d=[t]}}else console.error("unexpected ghost type",i);if(d){var g=we(e),h=ve(e),p=e.moveHistory[h].timeLeft[g];3===e.lifeCycleStage&&(p+=e.timeControl.increment),e.moveToSend={actions:d,remainingTime:p},a&&e.isVolumeOn&&Me(),Pe(e,d,p,ve(e)+1)}else e.ghostAction=f}}}}else Ie(e,t)},Ie=function(e,t){if(!(e.lifeCycleStage>3)&&e.viewIndex===ve(e)&&!(t.r<0||t.r>=he.h||t.c<0||t.c>=he.w)){var n=te(t);if(!(e.lifeCycleStage<2&&"Wall"===n)){for(var a=0===we(e)?1:0,o=0===a?1:0,r=ve(e),l=[],i=null,c=0;c<e.premoveActions.length;c++){var s=e.premoveActions[c];"Wall"===te(s)?l.push(s):i=s}var m=e.moveHistory[r].playerPos[a];"Wall"===n&&i&&(m=i);var u=Ce(e.moveHistory[r].grid,t,m,e.moveHistory[r].playerPos[o],ge[a],ge[o],l),d=null;if(i&&(d=Ce(e.moveHistory[r].grid,i,e.moveHistory[r].playerPos[a],e.moveHistory[r].playerPos[o],ge[a],ge[o],l)),!(u>2)){var f;if(0===e.premoveActions.length)f="Empty";else if(i||1!==l.length)if(i||2!==l.length)if(i&&1===l.length)f="GroundWall";else if(i&&1===d)f="GroundDist1";else{if(!i||2!==d)return void console.error("Unknown premove state",i,l,u,d);f="GroundDist2"}else f="WallWall";else f="Wall";var g=[];if(ne(t,m))return 0===e.premoveActions.length?void 0:void(e.premoveActions=[]);var h=null,p=null;if(1===l.length){var v=[l[0],null];h=v[0],p=v[1]}else if(2===l.length){var y=[l[0],l[1]];h=y[0],p=y[1]}if("Empty"===f)if("Wall"===n){if(1!==u)return;g=[t]}else"Ground"===n&&(1===u||2===u?g=[t]:console.error("unreachable case"));else if("Wall"===f){if("Wall"===n)if(ne(h,t))g=[];else{if(1!==u)return;g=[h,t]}else if("Ground"===n){if(1!==u)return;g=[h,t]}}else if("WallWall"===f){if("Wall"===n)if(ne(h,t))g=[p];else{if(!ne(p,t))return;g=[h]}else if("Ground"===n)return}else if("GroundDist1"===f)if("Wall"===n){if(1!==u)return;g=[i,t]}else"Ground"===n&&(g=ne(t,i)?[]:[t]);else if("GroundDist2"===f){if("Wall"===n)return;"Ground"===n&&(g=ne(t,i)?[]:[t])}else if("GroundWall"===f){if("Wall"===n){if(!ne(t,h))return;g=[i]}else if("Ground"===n)if(ne(t,i))g=[h];else{if(1!==u)return;g=[h,t]}}else console.error("unexpected premove state case",f);g&&(e.premoveActions=g)}}}},We=function(e){e.showRematchDialog=!1,e.showDrawDialog=!1,e.showTakebackDialog=!1,e.ghostAction=null,e.premoveActions=[]},Le=function(e,t){3===e.lifeCycleStage&&(e.isVolumeOn&&Me(),e.lifeCycleStage=4,e.winner="draw",e.gameWins[0]+=.5,e.gameWins[1]+=.5,e.finishReason=t,We(e))},Ae=function(e,t){3===e.lifeCycleStage&&(e.lifeCycleStage=4,e.winner=t?"joiner":"creator",e.gameWins[t?1:0]+=1,e.finishReason="resign",We(e))},Ne=function(e,t){if(e.showTakebackDialog=!1,2===e.lifeCycleStage||3===e.lifeCycleStage){for(var n=t===ye(e)?2:1,a=0;a<n;a++)e.moveHistory.pop();var o=ve(e);e.viewIndex=o,0===o?e.lifeCycleStage=1:1===o&&(e.lifeCycleStage=2),We(e)}},Be=function(e){if(4===e.lifeCycleStage){e.creatorStarts=!e.creatorStarts;var t=ae(he);e.moveHistory=[{index:0,actions:[],grid:t,playerPos:pe,timeLeft:[60*e.timeControl.duration,60*e.timeControl.duration],distances:[ie(t,pe[0],ge[0]),ie(t,pe[1],ge[1])],wallCounts:[0,0]}],e.winner="",e.finishReason="",e.lifeCycleStage=1,e.viewIndex=0,We(e)}},He=function(e,t){if(3===e.lifeCycleStage){var n=ve(e);e.moveHistory[n].timeLeft[t]+=60}},ze=function(e,t){e.winner=0===t?"creator":"joiner",e.gameWins[t]+=1,e.finishReason="time",e.lifeCycleStage=4,We(e)},_e=function(e){var t=e.grid,n=e.ghostAction,r=e.premoveActions,l=e.lastActions,c=e.tracePos,s=Object(i.a)(e.playerPos,2),m=s[0],u=s[1],d=Object(i.a)(e.goals,2),f=d[0],g=d[1],p=e.handleClick,v=e.creatorToMove,y=e.groundSize,b=e.wallWidth,w=e.menuTheme,k=e.boardTheme,E=e.isDarkModeOn,C=e.tokens,T=!Object(h.useMediaQuery)({query:"(hover: none)"}),S=Object(a.useState)(null),x=Object(i.a)(S,2),O=x[0],D=x[1],j=function(){D(null)},P=function(e){return H(k,e,E)},R="1px solid ".concat(H(w,"container",E)),M=[P("player1"),P("player2")],G=M[0],I=M[1],W=["face","outlet"],L=Object(i.a)(C,2),A=L[0],N=L[1];"default"===A&&(A=W[0]),"default"===N&&(N=W[1]);for(var B=t.length,z=t[0].length,_=[],F=0;F<B;F++)for(var V=0;V<z;V++)_[F*z+V]={r:F,c:V};var q=(B-1)/2,J=(z-1)/2,Y=.8*y,U=P("coord"),Q=function(e,t){return!!(t.length>0&&t[0]&&ne(e,t[0]))||!!(t.length>1&&t[1]&&ne(e,t[1]))};return o.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(".concat(J,", ").concat(y,"px ").concat(b,"px) ").concat(y,"px"),gridTemplateRows:"repeat(".concat(q,", ").concat(y,"px ").concat(b,"px) ").concat(y,"px"),justifyContent:"center",gridArea:"board",MozUserSelect:"none",WebkitUserSelect:"none",msUserSelect:"none",userSelect:"none"}},_.map((function(e){var a,i=[ne(e,m),ne(e,u)],s=i[0],d=i[1],h=[ne(e,f),ne(e,g)],b=h[0],w=h[1],k=s||d,C=b||w,S=Q(e,[n]),x=Q(e,r),M=c&&ne(e,c),W=Q(e,l),L=S||x,H=S&&v||x&&!v,_=S&&!v||x&&v,F=W&&!v,V=W&&v,q=y>27&&!(k||C||L),J=q&&e.r===B-1&&e.c%2===0,K=q&&e.c===z-1&&e.r%2===0,X=J||K,Z=T&&O&&ne(e,O),$=te(e),ee="";if("Ground"===$&&(ee+="waves-effect waves-light"),"Wall"===$&&(ee+="waves-effect waves-dark"),"Ground"===$)a=P(Z?"hoveredGround":M?"traceGround":C?"goalBackground".concat(b?"1":"2"):"ground");else if("Wall"===$){var ae=0!==t[e.r][e.c];a=P(ae?"wall".concat(t[e.r][e.c]):S?"ghostWall".concat(v?"1":"2"):x?"ghostWall".concat(v?"2":"1"):Z?"hoveredWall":"emptyWall")}else a=P("pillar");var oe="center",re="center";X&&(oe=J?"flex-start":"flex-end",re=J?"flex-end":"flex-start");var le={backgroundColor:a,display:"flex",justifyContent:oe,alignItems:re};"Pillar"!==$&&(le.cursor="pointer"),"Wall"===$&&W?le.border="".concat(E?"1":"2","px solid ").concat(P("lastMoveWallBorder")):(0===e.r&&(le.borderTop=R),e.r===B-1&&(le.borderBottom=R),0===e.c&&(le.borderLeft=R),e.c===z-1&&(le.borderRight=R));var ie="0 0 4px ".concat(P("lastMoveTokenBorder"));return o.a.createElement("div",{className:ee,key:"".concat(e.r,"_").concat(e.c),onClick:function(){"Pillar"!==$&&null!==p&&p(e)},onMouseEnter:function(){return function(e){D(e)}(e)},onMouseLeave:j,style:le},s&&o.a.createElement("i",{className:"material-icons",style:{fontSize:"".concat(Y,"px"),color:G,textShadow:F?ie:"none"}},A),d&&o.a.createElement("i",{className:"material-icons",style:{fontSize:"".concat(Y,"px"),color:I,textShadow:V?ie:"none"}},N),"Ground"===$&&(H||_)&&o.a.createElement("i",{className:"material-icons ".concat(G,"-text text-lighten-4"),style:{fontSize:"".concat(Y,"px"),color:P("ghost".concat(H?"1":"2"))}},H?A:N),(b||w)&&!k&&!L&&o.a.createElement("i",{className:"material-icons",style:{fontSize:"".concat(Y,"px"),color:P("goalToken")}},b?A:N),J&&o.a.createElement("div",{style:{color:U,padding:"0",marginLeft:"4px"}},de(e)),K&&o.a.createElement("div",{style:{color:U,padding:"0",marginRight:"4px"}},ue(e)))})))},Fe=(n(161),n(75)),Ve=(n(165),function(e){var t,n=e.icon,a=e.tooltip,r=e.onClick,l=e.modalTitle,i=e.modalBody,c=e.modalConfirmButtonText,s=e.bgColor,m=e.padding,u=e.disabled,d=e.menuTheme,g=e.isDarkModeOn;if(s||(s=H(d,"button",g)),!i)return o.a.createElement(f.Button,{style:{backgroundColor:s},node:"button",waves:"light",icon:o.a.createElement(f.Icon,{className:"large"},n),onClick:r,tooltip:a,disabled:u});t=c&&""!==c?[o.a.createElement(f.Button,{style:{backgroundColor:s,color:"white",marginRight:"1rem"},flat:!0,modal:"close",node:"button",waves:"green",onClick:r},c),o.a.createElement(f.Button,{style:{backgroundColor:s,color:"white"},flat:!0,modal:"close",node:"button",waves:"green"},"Cancel")]:o.a.createElement(f.Button,{style:{backgroundColor:s,color:"white"},flat:!0,modal:"close",node:"button",waves:"green"},"Close");var h=o.a.createElement(f.Button,{style:{padding:"0px ".concat(m,"px"),backgroundColor:s},node:"button",waves:"light",icon:o.a.createElement(f.Icon,{className:"large"},n),tooltip:a,disabled:u});return o.a.createElement(f.Modal,{style:{color:"black",backgroundColor:"white"},bottomSheet:!1,fixedFooter:!1,header:l,open:!1,options:{dismissible:!0,endingTop:"10%",inDuration:250,opacity:.4,outDuration:250,preventScrolling:!0,startingTop:"4%"},trigger:h,actions:t},o.a.createElement("div",null,i))});var qe=function(e){var t,n=e.context,a=e.helpText,r=e.aboutText,l=e.joinCode,i=e.handleLeaveGame,c=e.isLargeScreen,s=e.menuTheme,m=e.isDarkModeOn,u=e.handleToggleDarkMode,d=e.handleToggleTheme;t="Lobby"===n?o.a.createElement("span",null,"WallWars"):"Spectator"===n?o.a.createElement("span",{style:{cursor:"pointer"},onClick:i},"WallWars"):o.a.createElement("span",null,c&&o.a.createElement("span",{style:{cursor:"pointer"},onClick:i},"WallWars"),c&&o.a.createElement("span",null,"\xa0"),o.a.createElement(Fe.CopyToClipboard,{style:{cursor:"pointer"},text:l,onCopy:function(){return Z("Join code copied to clipboard!")}},o.a.createElement("span",null,"Code ",l)));var f=c?20:11,g=H(s,"headerButton",m);return o.a.createElement("div",null,o.a.createElement("div",{style:{height:"50px",display:"grid",gridTemplateRows:"1fr",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"center",backgroundColor:H(s,"header",m)}},o.a.createElement("div",{style:{fontSize:c?"30px":"25px",marginLeft:c?"15px":"5px"}},t),o.a.createElement("div",{style:{height:"auto",display:"grid",padding:"5px",gridTemplateColumns:"repeat(".concat(c?4:3,", 1fr)"),gridTemplateRows:"auto",columnGap:"5px",rowGap:"5px",marginRight:c?"15px":"5px"}},c&&o.a.createElement(Ve,{icon:"color_lens",tooltip:"Change theme",onClick:d,bgColor:g,padding:f,menuTheme:s,isDarkModeOn:m}),o.a.createElement(Ve,{icon:m?"wb_sunny":"brightness_2",tooltip:m?"Turn off night mode":"Turn on night mode",onClick:u,bgColor:g,padding:f,menuTheme:s,isDarkModeOn:m}),o.a.createElement(Ve,{icon:"help",tooltip:"Help",modalTitle:"Help",modalBody:a,bgColor:g,padding:f,menuTheme:s,isDarkModeOn:m}),"Lobby"===n&&o.a.createElement(Ve,{icon:"info",tooltip:"About",modalTitle:"About",modalBody:r,bgColor:g,padding:f,menuTheme:s,isDarkModeOn:m}),"Lobby"!==n&&o.a.createElement(Ve,{icon:"home",tooltip:"Leave game",onClick:i,bgColor:g,padding:f,menuTheme:s,isDarkModeOn:m}))))},Je=function(e){var t=e.title,n=e.body,a=e.acceptButtonText,r=e.rejectButtonText,l=e.isOpen,i=e.callback,c=e.menuTheme,s=e.isDarkModeOn,m=H(c,"button",s);return o.a.createElement(f.Modal,{style:{color:"black",backgroundColor:"#e0e0e0"},header:t,open:l,options:{dismissible:!1,endingTop:"10%",inDuration:250,opacity:.4,outDuration:250,preventScrolling:!0,startingTop:"4%"},actions:[o.a.createElement(f.Button,{style:{backgroundColor:m,color:"white",marginRight:"1rem"},flat:!0,modal:"close",node:"button",waves:"green",onClick:function(){i(!0)}},a||"Accept"),o.a.createElement(f.Button,{style:{backgroundColor:m,color:"white"},flat:!0,modal:"close",node:"button",waves:"green",onClick:function(){i(!1)}},r||"Cancel")]},o.a.createElement("div",null,n))},Ye=function(e){var t,n=e.names,a=e.lifeCycleStage,r=e.winner,l=e.finishReason,i=e.indexToMove,c=e.timeControl,s=e.creatorStarts,m=e.isLargeScreen,u=e.menuTheme,d=e.isDarkModeOn,f=n[i];switch(a){case-2:t="Haven't tried to connect to the server yet";break;case-1:t="Waking the server up...";break;case 0:t="Waiting for player 2 to join";break;case 1:t="".concat(f," starts");break;case 2:case 3:t="".concat(f," to move");break;case 4:t="draw"===r?"The game ended in a draw "+{goal:"by the 1-move rule",agreement:"by agreement"}[l]:"".concat(n["creator"===r?0:1]," won ").concat({time:"on time",goal:"by reaching the goal",resign:"by resignation",abandon:"by abandonment"}[l]);break;default:console.error("stage should be in range [-2..4]")}var g=function(e){return Math.round(100*(e+Number.EPSILON))/100},h="";return 0===a&&s?h=n[0]:a>0&&(h=n[s?0:1]),o.a.createElement("div",{style:{backgroundColor:H(u,"container",d),display:"grid",gridTemplateColumns:"auto",gridTemplateRows:"1fr 1fr 1fr",alignItems:"center",padding:m?"15px 15px":"5px 15px",gridArea:"status"}},o.a.createElement("div",null,o.a.createElement("p",null,t)),o.a.createElement("div",null,c&&o.a.createElement("p",null,"Time control: ",g(c.duration),"+",g(c.increment))),o.a.createElement("div",null,o.a.createElement("p",null,"First move: "+h)))},Ue=function(e,t){return o.a.createElement("span",{style:{height:"10px",width:"10px",backgroundColor:e,borderRadius:"50%",display:"inline-block",border:"solid 1px black"},title:t})},Qe=function(e,t){return e?Ue("#67ff36","".concat(t," has the game open")):Ue("gray","".concat(t," does not have the game page open"))},Ke=function(e){var t=e.lifeCycleStage,n=e.names,a=e.timeLeft,r=e.indexToMove,l=e.isLargeScreen,i=e.scores,c=e.arePlayersPresent,s=e.menuTheme,m=e.boardTheme,u=e.isDarkModeOn,d=[Math.floor(a[0]/60),Math.floor(a[1]/60)],f=d[0],g=d[1],h=a[0]%60,p=a[1]%60,v=["".concat(f,":").concat(h<10?"0":"").concat(h),"".concat(g,":").concat(p<10?"0":"").concat(p)];t<0&&(v[0]="_:__",v[1]="_:__");var y=[!1,!1];t<4&&(y[r]=!0);var b=[!1,!1];3===t&&(0===r?a[0]<15&&(b[0]=!0):1===r&&a[1]<15&&(b[1]=!0));var w,k=0!==i[0]||0!==i[1],E=l?"18px":"14px",C={padding:w=l&&!k?"15px":l&&k?"12px":l||k?"6px":"8px",fontSize:E},T=[H(m,"timer1",u),H(m,"timer2",u),H(s,"container",u),H(m,"lowTime",u)],S=T[0],x=T[1],O=T[2],D=T[3];return o.a.createElement("div",{style:{backgroundColor:H(s,"container",u),display:"grid",gridTemplateColumns:k?"0.5fr 1.7fr 0.2fr 1fr 1fr 0.2fr 1.7fr 0.5fr":"1.7fr 0.2fr 1fr 1fr 0.2fr 1.7fr",gridTemplateRows:"auto",alignContent:"center",columnGap:w,padding:w,gridArea:"timer"}},k&&o.a.createElement("div",{style:C,className:"center"},i[0]),o.a.createElement("div",{style:{padding:w,fontSize:E,backgroundColor:y[0]?S:O},className:"center truncate"+(y[0]?" z-depth-2":"")},n[0]),o.a.createElement("div",{style:C,className:"center"},Qe(c[0],n[0])),o.a.createElement("div",{style:{padding:w,fontSize:E,backgroundColor:b[0]?D:O},className:"center"+(b[0]?" z-depth-2":"")},v[0]),o.a.createElement("div",{style:{padding:w,fontSize:E,backgroundColor:b[1]?D:O},className:"center"+(b[1]?" z-depth-2":"")},v[1]),o.a.createElement("div",{style:C,className:"center"},Qe(c[1],n[1])),o.a.createElement("div",{style:{padding:w,fontSize:E,backgroundColor:y[1]?x:O},className:"center truncate"+(y[1]?" z-depth-2":"")},null===n[1]?"______":n[1]),k&&o.a.createElement("div",{style:C,className:"center"},i[1]))},Xe=o.a.createElement("div",null,o.a.createElement("h6",null,'To connect with your friend, share the game code in the top header with them and tell them to use it when clicking "Join Game" from the lobby. Click on the code to copy it to the clipboard.'),o.a.createElement("h6",null,"Rules of the game:"),o.a.createElement("h6",null,"The player who creates the game starts at the top left corner (color red). The player who joins the game starts at the top right (color blue). The goal of each player is to reach the ",o.a.createElement("em",null,"opposite")," corner from where they start. The player who gets there first wins."),o.a.createElement("h6",null,"Players move by clicking cells on the board. There are two types of cells: ground cells (the big squares) and walls (the thin rectangles in between ground cells). Each move consists of a total of two actions. One action can be building one wall or moving to an adjacent cell. A diagonal move counts as two actions."),o.a.createElement("h6",null,"Players can build walls to obstruct the opponent. Walls can be built anywhere as long as there always exists at least one way to get to their goal. You cannot go through your own walls either."),o.a.createElement("h6",null,"The remaining time for each player is shown next to their name. The clock of a player ticks down when it is their turn (after each player has moved once). The player who starts is chosen randomly. The name of the player to move next is highlighted with their color."),o.a.createElement("h6",null,"If it is your turn and you do a single action, like building a wall or moving to an adjacent cell, you can undo it by clicking the wall again or clicking a different ground cell, respectively. Once you choose 2 actions, the move becomes permanent."),o.a.createElement("h6",null,"During the opponent's turn, you can ",o.a.createElement("em",null,"premove"),", meaning choose a move that will be applied instantaneously when it is your turn."),o.a.createElement("h6",null,"Special rules:"),o.a.createElement("h6",null,"(1) no walls can be placed during the first move of each player."),o.a.createElement("h6",null,"(2) if the player who moved first reaches the goal first but the other player is at distance 1 or 2 from their goal, the game ends in a draw."),o.a.createElement("h6",null,"If you leave the game, you will be able to reenter this game as long as you don't create or join a new game.")),Ze=n(22),$e=n.n(Ze),et=function(e){return 0===e.index?"_______":function(e){if(1===e.length)return fe(e[0]);var t=Object(i.a)(e,2),n=t[0],a=t[1];return"Ground"===te(n)||"Ground"!==te(n)||n.c<a.c||n.c===a.c&&n.r>a.r?fe(n)+" "+fe(a):fe(a)+" "+fe(n)}(e.actions)},tt={paddingTop:"0.15rem",paddingBottom:"0.15rem",borderRadius:"0"},nt=function(e){var t=e.moveHistory,n=e.creatorStarts,a=e.handleViewMove,r=e.viewIndex,l=e.height,i=e.menuTheme,c=e.boardTheme,s=e.isDarkModeOn,m=!Object(h.useMediaQuery)({query:"(hover: none)"}),u=[H(c,"move1",s),H(c,"move2",s),H(i,"container",s),H(c,"currentMove",s)],d=u[0],g=u[1],p=u[2],v=u[3],y={position:"sticky",top:"0px",paddingTop:"0.15rem",paddingBottom:"0.15rem",borderRadius:"0",backgroundColor:p};return o.a.createElement("div",{id:"movehistory",className:"center",style:{overflowY:"scroll",display:"block",height:l,MozUserSelect:"none",WebkitUserSelect:"none",msUserSelect:"none",userSelect:"none"}},o.a.createElement(f.Table,{centered:!0,style:{width:"100%"}},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{style:y},"#"),o.a.createElement("th",{style:y},"Move"),o.a.createElement("th",{style:y},"Distance"),o.a.createElement("th",{style:y},"# Walls"))),o.a.createElement("tbody",null,t.map((function(e,l){var i;if(r===l&&l<t.length-1)i=v;else if(0===l)i=p;else{i=1===1+(l+(n?1:0))%2?d:g}return o.a.createElement("tr",{onClick:function(){return a(l)},style:{cursor:"pointer",backgroundColor:i},className:m?$e.a.hoveredMode:void 0,key:l},o.a.createElement("td",{style:tt},l),o.a.createElement("td",{style:tt},et(e)),o.a.createElement("td",{style:tt},e.distances[0]+" - "+e.distances[1]),o.a.createElement("td",{style:tt},e.wallCounts[0]+" - "+e.wallCounts[1]))})))))},at=function(e){var t=e.lifeCycleStage,n=e.handleResign,a=e.handleOfferDraw,r=e.handleRequestTakeback,l=e.handleGiveExtraTime,i=e.moveHistory,c=e.clientRole,s=e.creatorStarts,m=e.handleViewMove,u=e.viewIndex,d=e.turnCount,f=e.handleSeeFirstMove,g=e.handleSeePreviousMove,h=e.handleSeeNextMove,p=e.handleSeeLastMove,v=e.handleToggleVolume,y=e.isVolumeOn,b=e.handleLeaveGame,w=e.handleIncreaseBoardSize,k=e.handleDecreaseBoardSize,E=e.zoomLevel,C=e.boardHeight,T=e.isOpponentPresent,S=e.menuTheme,x=e.boardTheme,O=e.isDarkModeOn,D=C-108-15-10,j=3===t||2===t&&s===("Creator"===c),P="Spectator"===c;return o.a.createElement("div",{style:{backgroundColor:H(S,"container",O),width:"100%",height:"auto",display:"grid",padding:"".concat(5,"px"),gridTemplateColumns:"repeat(4, 1fr)",gridTemplateRows:"".concat(36,"px 1fr ").concat(36,"px ").concat(36,"px"),columnGap:"".concat(5,"px"),rowGap:"".concat(5,"px"),gridArea:"panel"}},o.a.createElement(Ve,{icon:"flag",tooltip:"Resign",modalTitle:"Resign",modalBody:"Are you sure you want to resign?",modalConfirmButtonText:"Resign",onClick:n,disabled:P||3!==t,menuTheme:S,isDarkModeOn:O}),o.a.createElement(Ve,{icon:"local_florist",tooltip:"Offer Draw",modalTitle:"Offer Draw",modalBody:"Are you sure you want to offer a draw?",modalConfirmButtonText:"Offer draw",onClick:a,disabled:P||!T||3!==t,menuTheme:S,isDarkModeOn:O}),o.a.createElement(Ve,{icon:"replay",tooltip:"Request takeback",onClick:function(){Z("A takeback request was sent to the opponent.",5e3),r()},disabled:P||!T||!j,menuTheme:S,isDarkModeOn:O}),o.a.createElement(Ve,{icon:"add_alarm",tooltip:"Give 60 seconds",onClick:function(){Z("You added 60s to the opponent's clock.",5e3),l()},disabled:P||3!==t,menuTheme:S,isDarkModeOn:O}),o.a.createElement("div",{style:{gridColumnStart:"1",gridColumnEnd:"5"}},o.a.createElement(nt,{moveHistory:i,creatorStarts:s,handleViewMove:m,viewIndex:u,height:D,menuTheme:S,boardTheme:x,isDarkModeOn:O})),o.a.createElement(Ve,{icon:"fast_rewind",onClick:f,disabled:t<=1||0===u,menuTheme:S,isDarkModeOn:O}),o.a.createElement(Ve,{icon:"navigate_before",onClick:g,disabled:t<=1||0===u,menuTheme:S,isDarkModeOn:O}),o.a.createElement(Ve,{icon:"navigate_next",onClick:h,disabled:t<=1||u===d,menuTheme:S,isDarkModeOn:O}),o.a.createElement(Ve,{icon:"fast_forward",onClick:p,disabled:t<=1||u===d,menuTheme:S,isDarkModeOn:O}),o.a.createElement(Ve,{icon:y?"volume_up":"volume_off",tooltip:y?"Turn off sound effects":"Turn on sound effects",onClick:v,disabled:P,menuTheme:S,isDarkModeOn:O}),o.a.createElement(Ve,{icon:"zoom_out",tooltip:"Decrease board size",onClick:k,disabled:0===E,menuTheme:S,isDarkModeOn:O}),o.a.createElement(Ve,{icon:"zoom_in",tooltip:"Increase board size",onClick:w,disabled:10===E,menuTheme:S,isDarkModeOn:O}),o.a.createElement(Ve,{icon:"home",tooltip:"Return to lobby",onClick:b,menuTheme:S,isDarkModeOn:O}))},ot=new Q.a(X.a),rt=function(){ot.play()},lt=J.boardDims,it=function(e){var t=e.socket,n=e.clientParams,r=e.returnToLobby,l=e.isLargeScreen,c=e.menuTheme,s=e.boardTheme,m=e.isDarkModeOn,u=e.handleToggleDarkMode,d=e.handleToggleTheme,g=e.handleSetCookieId,h=Object(v.a)(["isVolumeOn","zoomLevel"]),p=Object(i.a)(h,2),y=p[0],b=p[1],w=Object(Y.a)(function(e){var t={joinCode:null,timeControl:null,names:[null,null],tokens:["default","default"],gameWins:[0,0],opponentAbandoned:!1,arePlayersPresent:[!1,!1],creatorStarts:null,winner:"",finishReason:"",lifeCycleStage:-2,moveHistory:[{index:0,actions:[],grid:ae(he),playerPos:pe,timeLeft:[null,null],distances:[ie(ae(he),pe[0],ge[0]),ie(ae(he),pe[1],ge[1])],wallCounts:[0,0]}],clientRole:null,moveToSend:null,ghostAction:null,premoveActions:[],isVolumeOn:!1,isKeyPressed:!1,viewIndex:0,zoomLevel:5,waitingForPing:0,showDrawDialog:!1,showTakebackDialog:!1,showRematchDialog:!1};return Te(t,e),t}(y)),k=Object(i.a)(w,2),E=k[0],C=k[1];Object(a.useEffect)((function(){return t.once("gameCreated",(function(e){var t=e.joinCode,n=e.creatorStarts,a=e.cookieId;g(a),C((function(e){Oe(e,t,n)}))})),t.once("gameJoined",(function(e){var t=e.creatorName,n=e.creatorToken,a=e.timeControl,o=e.creatorStarts,r=e.cookieId,l=e.creatorPresent;g(r),C((function(e){De(e,t,n,a,o,l)}))})),t.once("requestedGame",(function(e){var t=e.game;C((function(e){!function(e,t){Se(e,t.timeControl,t.playerNames[0],t.playerTokens[0]),Oe(e,t.joinCode,t.creatorStarts),je(e,t.playerNames[1],t.playerTokens[1]);for(var n=0;n<t.moveHistory.length;n++){var a=t.moveHistory[n].actions,o=t.moveHistory[n].remainingTime;Pe(e,a,o,n+1)}e.clientRole="Spectator",e.gameWins=t.gameWins,e.winner=t.winner,e.finishReason=t.finishReason,e.lifeCycleStage=4}(e,t)}))})),t.on("returnedToOngoingGame",(function(e){var t=e.ongoingGame,a=e.timeLeft;C((function(e){!function(e,t,n,a){"Creator"===(t===n.cookieIds[0]?"Creator":"Joiner")?(Se(e,n.timeControl,n.playerNames[0],n.playerTokens[0]),Oe(e,n.joinCode,n.creatorStarts),je(e,n.playerNames[1],n.playerTokens[1])):(xe(e,n.joinCode,n.playerNames[1],n.playerTokens[1]),De(e,n.playerNames[0],n.playerTokens[0],n.timeControl,n.creatorStarts,!0)),e.arePlayersPresent=n.arePlayersPresent;for(var o=0;o<n.moveHistory.length;o++){var r=n.moveHistory[o].actions,l=n.moveHistory[o].remainingTime;Pe(e,r,l,o+1)}e.gameWins=n.gameWins,e.winner=n.winner,e.finishReason=n.finishReason;var i=ve(e);e.moveHistory[i].timeLeft=a,""!==n.winner?e.lifeCycleStage=4:0===a[0]?ze(e,1):0===a[1]&&ze(e,0)}(e,n.cookieId,t,a),e.waitingForPing=0}))})),t.on("opponentReturned",(function(){C((function(e){e.arePlayersPresent["Creator"===e.clientRole?1:0]=!0,e.waitingForPing=0}))})),t.on("ongoingGameNotFound",(function(){Z("Couldn't find the game anymore.",5e3),r()})),t.on("gameJoinFailed",(function(){Z("There is no game with this code waiting for someone to join.",5e3),r()})),t.on("joinSelfGameFailed",(function(){Z("You cannot play against yourself. To play as both sides from the same browser, play one of the sides from an Incognito window.",12e3),r()})),t.on("gameNotFoundError",(function(){Z("There was an issue on the server and we couldn't reach the other player.",5e3),C((function(e){e.waitingForPing=0}))})),t.once("joinerJoined",(function(e){var t=e.joinerName,n=e.joinerToken;C((function(e){1!==e.lifeCycleStage&&(e.isVolumeOn&&rt(),je(e,t,n),e.arePlayersPresent[1]=!0,e.waitingForPing=0)}))})),t.on("drawOffered",(function(){C((function(e){e.showDrawDialog=!0,e.waitingForPing=0}))})),t.on("drawRejected",(function(){Z("The opponent declined the draw offer.",5e3),C((function(e){e.waitingForPing=0}))})),t.on("drawAccepted",(function(){Z("The opponent accepted the draw offer.",5e3),C((function(e){Le(e,"agreement"),e.waitingForPing=0}))})),t.on("takebackRequested",(function(){C((function(e){e.showTakebackDialog=!0,e.waitingForPing=0}))})),t.on("takebackRejected",(function(){Z("The opponent declined the takeback request.",5e3),C((function(e){e.waitingForPing=0}))})),t.on("takebackAccepted",(function(){Z("The opponent agreed to the takeback.",5e3),C((function(e){var t="Creator"===e.clientRole;Ne(e,t),e.waitingForPing=0}))})),t.on("rematchOffered",(function(){C((function(e){e.showRematchDialog=!0,e.waitingForPing=0}))})),t.on("rematchRejected",(function(){Z("The opponent declined the rematch offer.",5e3),C((function(e){e.waitingForPing=0}))})),t.on("rematchAccepted",(function(){Z("The opponent accepted the rematch offer.",5e3),C((function(e){e.isVolumeOn&&rt(),Be(e),e.waitingForPing=0}))})),t.on("extraTimeReceived",(function(){Z("The opponent added 60s to your clock.",5e3),C((function(e){var t="Creator"===e.clientRole?0:1;He(e,t),e.waitingForPing=0}))})),t.on("resigned",(function(){Z("The opponent resigned.",5e3),C((function(e){e.isVolumeOn&&rt();var t="Creator"!==e.clientRole;Ae(e,t),e.waitingForPing=0}))})),t.on("moved",(function(e){var t=e.actions,n=e.moveIndex,a=e.remainingTime;C((function(e){console.log("move ".concat(n," received (").concat(a,"s)")),e.isVolumeOn&&rt(),Pe(e,t,a,n),e.waitingForPing=0}))})),t.on("leftGame",(function(){C((function(e){e.arePlayersPresent["Creator"===e.clientRole?1:0]=!1,e.waitingForPing=0}))})),t.on("abandonedGame",(function(){Z("The opponent abandoned the game.",5e3),C((function(e){!function(e,t){4!==e.lifeCycleStage&&(e.lifeCycleStage=4,e.winner=t?"joiner":"creator",e.gameWins[t?1:0]+=1,e.finishReason="abandon",We(e))}(e,"Creator"!==e.clientRole),e.waitingForPing=0}))})),t.on("pongFromServer",(function(){C((function(e){e.waitingForPing=0}))})),function(){t.removeAllListeners()}}),[t,C,r,g,n.cookieId]),Object(a.useEffect)((function(){-2===E.lifeCycleStage&&("Creator"===n.clientRole?(C((function(e){Se(e,n.timeControl,n.name,n.token),e.arePlayersPresent[0]=!0})),t.emit("createGame",{name:n.name,timeControl:n.timeControl,token:n.token,cookieId:n.cookieId})):"Joiner"===n.clientRole?(C((function(e){xe(e,n.joinCode,n.name,n.token),e.arePlayersPresent[1]=!0})),t.emit("joinGame",{joinCode:n.joinCode,name:n.name,token:n.token,cookieId:n.cookieId})):"Spectator"===n.clientRole?t.emit("getGame",{gameId:n.gameId}):"Returner"===n.clientRole?t.emit("returnToOngoingGame",{cookieId:n.cookieId}):console.error("unknown client role",n.clientRole))}));var T=function(){t.emit("leaveGame"),r()};Object(a.useEffect)((function(){var e=setInterval((function(){C((function(e){!function(e){if(3===e.lifeCycleStage){var t=we(e),n=ve(e);e.moveHistory[n].timeLeft[t]-=1,0===e.moveHistory[n].timeLeft[t]&&ze(e,0===t?1:0)}}(e)}))}),1e3);return function(){return clearInterval(e)}}),[C]),Object(a.useEffect)((function(){var e=setInterval((function(){3===E.lifeCycleStage&&(1===E.waitingForPing?t.emit("pingServer"):2===E.waitingForPing&&Z("The server is not responding. The game is probably lost. Sorry for the inconvenience.",8e3),C((function(e){e.waitingForPing=(e.waitingForPing+1)%3})))}),5e3);return function(){return clearInterval(e)}}),[t,E.lifeCycleStage,E.waitingForPing,C]);var S=function(e){C((function(t){var n=ye(t)===("Creator"===t.clientRole);Ge(t,e,n,!0)}))};Object(a.useEffect)((function(){E.moveToSend&&(t.emit("move",E.moveToSend),C((function(e){e.moveToSend=null})))})),Object(a.useEffect)((function(){"Spectator"!==E.clientRole&&("goal"===E.finishReason&&t.emit("playerReachedGoal",{winner:E.winner}),"time"===E.finishReason&&t.emit("playerWonOnTime",{winner:E.winner}))}),[t,E.clientRole,E.winner,E.finishReason]);Object(a.useEffect)((function(){return window.addEventListener("keydown",x),window.addEventListener("keyup",O),function(){window.removeEventListener("keydown",x),window.removeEventListener("keyup",O)}}));var x=function(e){var t=e.key;if(!E.isKeyPressed)if(C((function(e){e.isKeyPressed=!0})),"m"!==t)if(E.viewIndex<ve(E)||4===E.lifeCycleStage)"ArrowDown"===t||"ArrowRight"===t?E.viewIndex<ve(E)&&C((function(e){e.viewIndex+=1})):"ArrowUp"!==t&&"ArrowLeft"!==t||E.viewIndex>0&&C((function(e){e.viewIndex-=1}));else{var n;if(E.ghostAction&&"Ground"===ke(E.ghostAction))n=E.ghostAction;else{var a=ve(E);n=E.moveHistory[a].playerPos[we(E)]}if("ArrowDown"===t)n={r:n.r+2,c:n.c};else if("ArrowUp"===t)n={r:n.r-2,c:n.c};else if("ArrowLeft"===t)n={r:n.r,c:n.c-2};else{if("ArrowRight"!==t)return;n={r:n.r,c:n.c+2}}S(n)}else R()},O=function(){C((function(e){e.isKeyPressed=!1}))},D=function(e){e<0||e>ve(E)||C((function(t){t.viewIndex!==e&&(e>ve(t)||(t.viewIndex=e,t.ghostAction=null,t.premoveActions=[]))}))};Object(a.useEffect)((function(){var e=document.getElementById("movehistory");e.scrollTop=e.scrollHeight}),[E.moveHistory.length]);var j,P,R=function(){b("isVolumeOn",E.isVolumeOn?"false":"true",{path:"/"}),C((function(e){e.isVolumeOn=!e.isVolumeOn}))},M=function(e){e.preventDefault(),T()};if(Object(a.useEffect)((function(){return window.history.pushState(null,null,window.location.pathname),window.addEventListener("popstate",M),function(){return window.removeEventListener("popstate",M)}})),4===E.lifeCycleStage){var G=Object(i.a)(E.moveHistory[E.viewIndex].timeLeft,2);j=G[0],P=G[1]}else{var I=ve(E),W=Object(i.a)(E.moveHistory[I].timeLeft,2);j=W[0],P=W[1]}var L,A,N,B=l?[J.groundSize,J.wallWidth]:[J.smallScreenGroundSize,J.smallScreenWallWidth],z=Object(i.a)(B,2),_=z[0],F=z[1],V=Math.pow(1.1,E.zoomLevel-5),q=_*V,U=F*V,Q=U*(lt.h-1)/2+q*(lt.h+1)/2,K=U*(lt.w-1)/2+q*(lt.w+1)/2,X=l?15:6;if(l){L="".concat(100,"px ").concat(Q,"px"),A="".concat(K,"px ").concat(360,"px"),N="'timer status' 'board panel'"}else{L="".concat(50,"px ").concat(Q,"px ").concat(80,"px ").concat(Q,"px"),A="".concat(K,"px"),N="'timer' 'board' 'status' 'panel'"}var $=E.moveHistory[E.viewIndex].playerPos,ee=function(e){var t,n=e.creatorStarts,a=e.moveHistory[e.viewIndex].playerPos;if(0===e.viewIndex)t=null;else if(1===e.viewIndex)t=J.initialPlayerPos[n?0:1];else if(2===e.viewIndex)t=J.initialPlayerPos[n?1:0];else{var o=e.moveHistory[e.viewIndex-2].playerPos;be(e)?ne(o[1],a[1])||(t=o[1]):ne(o[0],a[0])||(t=o[0])}return t}(E),te=E.viewIndex>0?E.moveHistory[E.viewIndex].actions:[];return o.a.createElement("div",null,o.a.createElement(qe,{context:"Spectator"===E.clientRole?"Spectator":"Player",joinCode:E.joinCode,helpText:Xe,handleLeaveGame:T,isLargeScreen:l,menuTheme:c,isDarkModeOn:m,handleToggleDarkMode:u,handleToggleTheme:d}),o.a.createElement("div",{style:{display:"grid",gridTemplateRows:L,gridTemplateColumns:A,gridTemplateAreas:N,columnGap:"".concat(X,"px"),rowGap:"".concat(X,"px"),margin:"".concat(X,"px"),justifyContent:"center",alignContent:"center"}},o.a.createElement(Ke,{lifeCycleStage:E.lifeCycleStage,names:E.names,indexToMove:we(E),timeLeft:[j,P],isLargeScreen:l,scores:E.gameWins,arePlayersPresent:E.arePlayersPresent,menuTheme:c,boardTheme:s,isDarkModeOn:m}),o.a.createElement(Ye,{lifeCycleStage:E.lifeCycleStage,names:E.names,indexToMove:we(E),winner:E.winner,finishReason:E.finishReason,timeControl:E.timeControl,creatorStarts:E.creatorStarts,isLargeScreen:l,menuTheme:c,isDarkModeOn:m}),o.a.createElement(_e,{creatorToMove:be(E),grid:E.moveHistory[E.viewIndex].grid,playerPos:$,goals:J.goals,ghostAction:E.ghostAction,premoveActions:E.premoveActions,lastActions:te,tracePos:ee,handleClick:function(e){return S(e)},groundSize:q,wallWidth:U,menuTheme:c,boardTheme:s,isDarkModeOn:m,tokens:E.tokens}),o.a.createElement(at,{lifeCycleStage:E.lifeCycleStage,handleResign:function(){t.emit("resign"),C((function(e){Ae(e,"Creator"===e.clientRole)}))},handleOfferDraw:function(){t.emit("offerDraw")},handleRequestTakeback:function(){t.emit("requestTakeback")},handleGiveExtraTime:function(){t.emit("giveExtraTime"),C((function(e){var t="Creator"===e.clientRole?1:0;He(e,t)}))},moveHistory:E.moveHistory,clientRole:E.clientRole,creatorStarts:E.creatorStarts,handleViewMove:D,viewIndex:E.viewIndex,turnCount:ve(E),handleSeeFirstMove:function(){D(0),document.getElementById("movehistory").scrollTop=0},handleSeePreviousMove:function(){return D(E.viewIndex-1)},handleSeeNextMove:function(){return D(E.viewIndex+1)},handleSeeLastMove:function(){D(ve(E));var e=document.getElementById("movehistory");e.scrollTop=e.scrollHeight},handleToggleVolume:R,isVolumeOn:E.isVolumeOn,handleLeaveGame:T,menuTheme:c,boardTheme:s,isDarkModeOn:m,handleIncreaseBoardSize:function(){E.zoomLevel<10&&b("zoomLevel",E.zoomLevel+1,{path:"/"}),C((function(e){e.zoomLevel<10&&(e.zoomLevel+=1)}))},handleDecreaseBoardSize:function(){E.zoomLevel>0&&b("zoomLevel",E.zoomLevel-1,{path:"/"}),C((function(e){e.zoomLevel>0&&(e.zoomLevel-=1)}))},zoomLevel:E.zoomLevel,boardHeight:Q,isOpponentPresent:Ee(E)})),4===E.lifeCycleStage&&"Spectator"!==E.clientRole&&o.a.createElement(f.Row,{className:"valign-wrapper",style:{marginTop:"1rem"}},o.a.createElement(f.Col,{className:"center",s:12},o.a.createElement(f.Button,{large:!0,style:{backgroundColor:H(c,"importantButton",m)},node:"button",waves:"light",onClick:function(){Z("Rematch offer sent.",5e3),t.emit("offerRematch")},disabled:!Ee(E)},"Rematch"))),o.a.createElement("div",{style:{height:"100%"}}),o.a.createElement(Je,{isOpen:E.showDrawDialog,title:"Draw offer received",body:"The opponent offered a draw.",acceptButtonText:"Accept",rejectButtonText:"Decline",callback:function(e){e?(t.emit("acceptDraw"),C((function(e){Le(e,"agreement")}))):(t.emit("rejectDraw"),C((function(e){e.showDrawDialog=!1})))},menuTheme:c,isDarkModeOn:m}),o.a.createElement(Je,{isOpen:E.showRematchDialog,title:"Rematch offer received",body:"The opponent would like a rematch.",acceptButtonText:"Accept",rejectButtonText:"Decline",callback:function(e){e?(t.emit("acceptRematch"),C((function(e){Be(e)}))):(t.emit("rejectRematch"),C((function(e){e.showRematchDialog=!1})))},menuTheme:c,isDarkModeOn:m}),o.a.createElement(Je,{isOpen:E.showTakebackDialog,title:"Takeback request received",body:"The opponent requested a takeback. If you accept, their last move will be undone.",acceptButtonText:"Accept",rejectButtonText:"Decline",callback:function(e){e?(Z("The last move played on the board has been undone.",5e3),t.emit("acceptTakeback"),C((function(e){var t="Joiner"===e.clientRole;Ne(e,t)}))):(t.emit("rejectTakeback"),C((function(e){e.showTakebackDialog=!1})))},menuTheme:c,isDarkModeOn:m}))},ct=function(e){var t=e.text,n=e.tooltip,a=e.onClick,r=e.menuTheme,l=e.isDarkModeOn;return o.a.createElement(f.Button,{style:{backgroundColor:H(r,"button",l),color:"#FFFFFF"},node:"button",waves:"light",onClick:a,tooltip:n},t)},st=["school","default","face","outlet","mood","mood_bad","child_care","pets","whatshot","toys","spa","stop","star","lens","favorite","visibility","group_work","flare","ac_unit","camera","casino","directions_boat","directions_bus","directions_car","event_seat","adb","bug_report"],mt=function(e){var t=e.playerName,n=e.handlePlayerName,r=e.duration,l=e.handleDuration,i=e.increment,c=e.handleIncrement,s=e.joinCode,m=e.handleJoinCode,u=e.handleCreateGame,d=e.handleJoinGame,g=e.handleRefreshName,h=e.token,p=e.handleToken,v=e.isLargeScreen,y=e.menuTheme,b=e.isDarkModeOn;Object(a.useEffect)((function(){return window.addEventListener("keydown",w),function(){window.removeEventListener("keydown",w)}}));var w=function(e){"Enter"===e.key&&(s.length>0?d():(Z("Created new game",5e3),u()))},k=o.a.createElement("div",{style:{fontSize:"30px"}},o.a.createElement("i",{className:"material-icons white-text",style:{height:"100%"}},"face"),v?" / ":"/",o.a.createElement("i",{className:"material-icons white-text",style:{height:"100%"}},"outlet"));return o.a.createElement("div",{className:"container",style:{marginTop:"2rem",backgroundColor:H(y,"container",b)}},o.a.createElement(f.Row,{className:"valign-wrapper"},o.a.createElement(f.Col,{className:"center",s:4,m:4},o.a.createElement("span",{style:{fontSize:"23px"}},v?"Your name:":"Name:")),o.a.createElement(f.Col,{s:6,m:3},o.a.createElement(f.TextInput,{id:"nameInput",value:t,onChange:n})),o.a.createElement(f.Col,{s:1,m:1},o.a.createElement(f.Button,{node:"button",waves:"light",small:!0,floating:!0,style:{color:"white",backgroundColor:H(y,"button",b)},icon:o.a.createElement(f.Icon,null,"refresh"),onClick:g,tooltip:"Get a new name"})),o.a.createElement(f.Col,{s:1,m:4})),o.a.createElement(f.Row,{className:"valign-wrapper"},o.a.createElement(f.Col,{className:"center",s:4,m:4},o.a.createElement("span",{style:{fontSize:"23px"}},v?"Your token:":"Token:")),o.a.createElement(f.Col,{s:3,m:2,className:"center"},"default"===h?k:o.a.createElement("div",{className:"white-text",style:{fontSize:"30px"}},o.a.createElement("i",{className:"material-icons white-text",style:{height:"100%"}},h))),o.a.createElement(f.Col,{s:4,m:4},o.a.createElement("div",null,o.a.createElement(f.Dropdown,{id:"Dropdown_6",options:{alignment:"left",autoTrigger:!0,closeOnClick:!0,constrainWidth:!0,container:null,coverTrigger:!0,hover:!1,inDuration:150,onCloseEnd:null,onCloseStart:null,onOpenEnd:null,onOpenStart:null,outDuration:250},trigger:o.a.createElement(f.Button,{node:"button",style:{backgroundColor:H(y,"button",b)}},"Change")},st.map((function(e){return o.a.createElement("div",{style:{width:"100%",color:"white",backgroundColor:H(y,"button",b)},key:e,node:"button",onClick:function(){return p(e)}},o.a.createElement("div",{className:"center",style:{display:"flex",flexDirection:"column",justifyContent:"center",padding:"4px 0"}},"default"===e?k:o.a.createElement("i",{className:"material-icons white-text",style:{height:"100%"}},e)))}))))),o.a.createElement(f.Col,{s:1,m:2})),o.a.createElement(f.Row,{className:"valign-wrapper"},o.a.createElement(f.Col,{className:"center",s:5,m:4},o.a.createElement(ct,{text:"Create Game",onClick:u,menuTheme:y,isDarkModeOn:b})),o.a.createElement(f.Col,{s:2,m:2,style:{paddingRight:"0"}},o.a.createElement(f.TextInput,{id:"durationInput",label:"Duration",value:"".concat(r),onChange:l})),o.a.createElement(f.Col,{s:1,m:1,style:{paddingLeft:"0"}},"m"),o.a.createElement(f.Col,{s:2,m:2,style:{paddingRight:"0"}},o.a.createElement(f.TextInput,{id:"incrementInput",label:"Increment",value:"".concat(i),onChange:c})),o.a.createElement(f.Col,{s:1,m:1,style:{paddingLeft:"0"}},"s"),o.a.createElement(f.Col,{s:1,m:2})),o.a.createElement(f.Row,{className:"valign-wrapper"},o.a.createElement(f.Col,{className:"center",s:5,m:4},o.a.createElement(ct,{text:"Join Game",onClick:d,menuTheme:y,isDarkModeOn:b})),o.a.createElement(f.Col,{s:6,m:5},o.a.createElement(f.TextInput,{id:"joinInput",placeholder:"Write game code here...",value:"".concat(s),onChange:m})),o.a.createElement(f.Col,{s:1,m:3})))},ut=o.a.createElement("div",null,o.a.createElement("h6",null,"This is the lobby. From here, you can create games that your friends can join, or join a friend's game."),o.a.createElement("h6",null,"When you create a game, you can choose the ",o.a.createElement("em",null,"duration")," (per player) and a time",o.a.createElement("em",null,"increment")," that is added to each player after they move. Once you create a game, a ",o.a.createElement("em",null,"game code")," will appear at the top. Share this code with your friend to play with them."),o.a.createElement("h6",null,'To join a friend\'s game, write the code they give you in the box next to the "Join game" button and click it.'),o.a.createElement("h6",null,"To get a feel for the game, you can watch some of the recent games listed in the lobby."),o.a.createElement("h6",null,"A random ",o.a.createElement("em",null,"username")," has been chosen for you, but you can change it. You can also choose the look of your token.")),dt=o.a.createElement("div",null,o.a.createElement("h6",null,"Wallwars is an online 2-player strategy game. The player who gets to their goal before first wins. You can place walls to reshape the terrain to your advantage."),o.a.createElement("h6",null,"WallWars is inspired by board games like Blockade and Quoridor. The main difference is that in WallWars there is no limit to how many walls you can place, and moves are more flexible (for instance, you can move and place a wall in the same turn)."),o.a.createElement("h6",null,"The source code is available at https://github.com/nmamano/WallWars")),ft=function(e){return e.nextMove%2===(e.game.creatorStarts?0:1)},gt=function(e){var t=e.socket,n=e.isLargeScreen,r=e.menuTheme,l=e.boardTheme,c=e.isDarkModeOn,s=e.handleViewGame,m=Object(Y.a)({needToRequestGame:!0,finishedGameWait:3,game:null,nextMove:0,grid:ae(J.boardDims),playerPos:J.initialPlayerPos,prevPos:[null,null]}),u=Object(i.a)(m,2),d=u[0],f=u[1];Object(a.useEffect)((function(){var e=setInterval((function(){if(d.needToRequestGame)return f((function(e){e.needToRequestGame=!1})),void t.emit("getRandomGame");d.game&&(d.game.moveHistory?d.nextMove!==d.game.moveHistory.length?f((function(e){if(e.game&&e.game.moveHistory&&e.nextMove!==e.game.moveHistory.length){for(var t=ft(e)?0:1,n=e.game.moveHistory[e.nextMove].actions,a=0;a<n.length;a++){var o=n[a];"Ground"===te(o)?(e.prevPos[t]=e.playerPos[t],e.playerPos[t]=o):e.grid[o.r][o.c]=t+1}e.nextMove++}})):f((function(e){e.finishedGameWait>0?e.finishedGameWait--:(e.needToRequestGame=!0,e.finishedGameWait=3,e.game=null,e.nextMove=0,e.grid=ae(J.boardDims),e.playerPos=J.initialPlayerPos,e.prevPos=[null,null])})):console.log("Error: game does not have a move history"))}),2e3);return function(){return clearInterval(e)}})),Object(a.useEffect)((function(){t.on("requestedRandomGame",(function(e){var t=e.game;f((function(e){e.game=t}))}))}),[t,f,d.needToRequestGame]);var g=[];d.nextMove>0&&(g=d.game.moveHistory[d.nextMove-1].actions);var h=n?J.groundSize:J.smallScreenGroundSize,p=n?J.wallWidth:J.smallScreenWallWidth,v=d.game&&ft(d),y=null;return 1!==g.length&&(2!==g.length||"Ground"!==te(g[0])&&"Ground"!==te(g[1]))||(y=v?d.prevPos[1]:d.prevPos[0]),o.a.createElement(_e,{playerColors:J.playerColors,grid:d.grid,playerPos:d.playerPos,goals:J.goals,ghostAction:null,creatorToMove:v,premoveActions:[],lastActions:g,tracePos:y,handleClick:function(){d.game&&s(d.game._id)},groundSize:h,wallWidth:p,menuTheme:r,boardTheme:l,isDarkModeOn:c,tokens:d.game?d.game.playerTokens:["default","default"]})},ht=function(e){return Math.round(100*(e+Number.EPSILON))/100},pt=function(e){return ht(e.duration)+"+"+ht(e.increment)},vt=function(e){return"creator"===e.winner?"<":"draw"===e.winner?"=":">"},yt=new Map;function bt(e,t){if(!e)return"-";var n=(new Date).getTime(),a=new Date(e).getTime(),o=Math.floor((n-a)/1e3),r=Math.floor(o/2592e3);return r>1?e.toDateString.substring(4,10):1===(r=Math.floor(o/86400))?t?"1 day ago":"1d ago":r>1?r+(t?" days":"d")+" ago":1===(r=Math.floor(o/3600))?t?"1 hour ago":"1h ago":r>1?r+(t?" hours":"h")+" ago":1===(r=Math.floor(o/60))?t?"1 minute ago":"1m ago":r>1?r+(t?" minutes":"m")+" ago":"Just now"}var wt=function(e){var t=e.recentGames,n=e.isLargeScreen,a=e.menuTheme,r=e.isDarkModeOn,l=e.handleViewGame,c=[H(a,"recentGamesBackground",r),H(a,"recentGamesAlternate",r),H(a,"container",r)],s=c[0],m=c[1],u={position:"sticky",top:"0px",paddingTop:"0.15rem",paddingBottom:"0.15rem",borderRadius:"0",backgroundColor:c[2]},d={paddingTop:"0.15rem",paddingBottom:"0.15rem",borderRadius:"0"},g="1px solid ".concat(H(a,"container",r));return n?o.a.createElement("div",{className:"center",style:{overflowY:"scroll",display:"block",height:"100%",border:g,backgroundColor:H(a,"recentGamesBackground",r)}},o.a.createElement(f.Table,{centered:!0,style:{width:"100%"}},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{style:u},"Time"),o.a.createElement("th",{style:u},"Player 1"),o.a.createElement("th",{style:u}),o.a.createElement("th",{style:u},"Player 2"),o.a.createElement("th",{style:u},"Distance"),o.a.createElement("th",{style:u},"Turns"),o.a.createElement("th",{style:u},"Date"))),o.a.createElement("tbody",null,t&&t.map((function(e,t){var n=function(e){if(yt.size>1e3&&yt.clear(),yt.has(e._id))return yt.get(e._id);for(var t=ae(J.boardDims),n=ee()(J.initialPlayerPos),a=e.creatorStarts?0:1,o=0;o<e.moveHistory.length;o++){for(var r=e.moveHistory[o].actions,l=0;l<r.length;l++){var c=r[l];"Ground"===te(c)?n[a]=c:t[c.r][c.c]=a+1}a=(a+1)%2}var s=Object(i.a)(J.goals,2),m=s[0],u=s[1],d=[ie(t,n[0],m),ie(t,n[1],u)],f=d[0],g=d[1];return yt.set(e._id,[f,g]),[f,g]}(e),a=Object(i.a)(n,2),r=a[0],c=a[1];return o.a.createElement("tr",{onClick:function(){return l(e._id)},style:{cursor:"pointer",backgroundColor:t%2?s:m},className:$e.a.hoveredGame,key:t},o.a.createElement("td",{style:d},pt(e.timeControl)),o.a.createElement("td",{style:d},e.playerNames[0]),o.a.createElement("td",{style:d},vt(e)),o.a.createElement("td",{style:d},e.playerNames[1]),o.a.createElement("td",{style:d},r+" - "+c),o.a.createElement("td",{style:d},e.moveHistory.length),o.a.createElement("td",{style:d},bt(e.startDate,!0)))}))))):o.a.createElement("div",{className:"center",style:{overflowY:"scroll",display:"block",height:"100%",border:g}},o.a.createElement(f.Table,{centered:!0,style:{width:"100%"}},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{style:u},"Time"),o.a.createElement("th",{style:u},"Player 1"),o.a.createElement("th",{style:u},"Win"),o.a.createElement("th",{style:u},"Player 2"),o.a.createElement("th",{style:u},"Date"))),o.a.createElement("tbody",null,t&&t.map((function(e,t){return o.a.createElement("tr",{onClick:function(){return l(e._id)},style:{cursor:"pointer",backgroundColor:t%2?s:m},className:$e.a.hoveredGame,key:t},o.a.createElement("td",{style:d},pt(e.timeControl)),o.a.createElement("td",{style:d},e.playerNames[0]),o.a.createElement("td",{style:d},vt(e)),o.a.createElement("td",{style:d},e.playerNames[1]),o.a.createElement("td",{style:d},bt(e.startDate,!1)))})))))},kt=function(){return Object(g.b)({dictionaries:[g.a],length:1}).slice(0,9)},Et=function(e){var t=e.socket,n=Object(v.a)(["playerName","token","duration","increment","cookieId","isDarkModeOn","menuTheme"]),r=Object(i.a)(n,2),l=r[0],c=r[1],s=Object(a.useState)(l.playerName||kt()),m=Object(i.a)(s,2),u=m[0],d=m[1],g=Object(a.useState)(l.token||"default"),y=Object(i.a)(g,2),b=y[0],w=y[1],k=Object(a.useState)(l.duration||5),E=Object(i.a)(k,2),C=E[0],T=E[1],S=Object(a.useState)(l.increment||5),x=Object(i.a)(S,2),O=x[0],D=x[1],j=Object(a.useState)(""),P=Object(i.a)(j,2),R=P[0],M=P[1],G=Object(a.useState)(!1),I=Object(i.a)(G,2),W=I[0],L=I[1],A=Object(a.useState)(null),N=Object(i.a)(A,2),B=N[0],z=N[1],F=Object(a.useState)(!(!l.isDarkModeOn||"true"!==l.isDarkModeOn)),q=Object(i.a)(F,2),Y=q[0],U=q[1],Q=Object(a.useState)(l.menuTheme&&"green"===l.menuTheme?"green":"blue"),K=Object(i.a)(Q,2),X=K[0],$=K[1],ee=Object(a.useState)([]),te=Object(i.a)(ee,2),ne=te[0],ae=te[1],oe=Object(a.useState)(!0),re=Object(i.a)(oe,2),le=re[0],ie=re[1],ce=Object(a.useState)(!1),se=Object(i.a)(ce,2),me=se[0],ue=se[1],de=function(e){z({clientRole:"Spectator",gameId:e}),ue(!1),L(!0)},fe=function(){c("isDarkModeOn",Y?"false":"true",{path:"/"}),U(!Y)},ge=function(){var e="green"===X?"blue":"green";c("menuTheme",e,{path:"/"}),$(e)};Object(a.useEffect)((function(){l.cookieId&&"undefined"!==l.cookieId&&!me&&t.emit("checkHasOngoingGame",{cookieId:l.cookieId})})),Object(a.useEffect)((function(){t.on("respondHasOngoingGame",(function(e){var t=e.res;W||ue(t)}))})),Object(a.useEffect)((function(){document.body.style.backgroundColor=H(X,"background",Y),document.body.style.backgroundImage="blue"===X?"url('".concat(Y?_.a:V.a,"')"):"none"}),[Y,X]),Object(a.useEffect)((function(){le&&(ie(!1),t.emit("getRecentGames"))}),[t,le]),Object(a.useEffect)((function(){t.on("requestedRecentGames",(function(e){var t=e.games;ae(t)}))}),[t,le]);var he,pe,ve,ye=Object(h.useMediaQuery)({query:"(min-width: 990px)"}),be=J.boardDims,we=ye?[J.groundSize,J.wallWidth]:[J.smallScreenGroundSize,J.smallScreenWallWidth],ke=Object(i.a)(we,2),Ee=ke[0],Ce=ke[1],Te=Ce*(be.h-1)/2+Ee*(be.h+1)/2,Se=Ce*(be.w-1)/2+Ee*(be.w+1)/2,xe=ye?15:6;return Object(h.useMediaQuery)({query:"(min-width: 1300px)"})?(he="".concat(40,"px ").concat(Te,"px"),pe="".concat(Se,"px ").concat(Se,"px"),ve="'showcaseTitle recentTitle' 'gameShowcase recentGameList'"):(he="".concat(40,"px ").concat(Te,"px ").concat(40,"px ").concat(Te,"px"),pe="".concat(Se,"px"),ve="'showcaseTitle' 'gameShowcase' 'recentTitle' 'recentGameList'"),o.a.createElement("div",{style:{paddingBottom:"2rem"}},o.a.createElement(p.b,null),W&&o.a.createElement(it,{socket:t,clientParams:B,returnToLobby:function(){L(!1),ue(!1),ie(!0),z(null),M("")},isLargeScreen:ye,menuTheme:X,boardTheme:"monochromeBoard",isDarkModeOn:Y,handleToggleDarkMode:fe,handleToggleTheme:ge,handleSetCookieId:function(e){c("cookieId",e,{path:"/"})}}),!W&&o.a.createElement("div",null,o.a.createElement(qe,{context:"Lobby",helpText:ut,aboutText:dt,isLargeScreen:ye,menuTheme:X,isDarkModeOn:Y,handleToggleDarkMode:fe,handleToggleTheme:ge}),o.a.createElement(mt,{playerName:u,handlePlayerName:function(e){d(e.target.value.slice(0,9))},duration:C,handleDuration:function(e){return T(e.target.value)},increment:O,handleIncrement:function(e){return D(e.target.value)},joinCode:R,handleJoinCode:function(e){return M(e.target.value)},handleCreateGame:function(){var e=[parseFloat(C),parseFloat(O)],t=e[0],n=e[1];isNaN(t)||t<.1?(t=5/60,Z("Invalid duration, using 5s instead",5e3)):t>120?(t=120,Z("Duration too long, using 2h instead",5e3)):c("duration",t,{path:"/"}),isNaN(n)||n<0?(n=0,Z("Invalid increment, using 0s instead",5e3)):n>300?(n=300,Z("Increment too large, using 5m instead",5e3)):c("increment",n,{path:"/"});var a=u;""===a?a="Anon":c("playerName",a,{path:"/"}),z({clientRole:"Creator",timeControl:{duration:t,increment:n},name:a,token:b,cookieId:l.cookieId?l.cookieId:"undefined"}),ue(!1),L(!0)},handleJoinGame:function(){var e=u;""===e?e="Anon":c("playerName",e,{path:"/"}),z({clientRole:"Joiner",joinCode:R,name:e,token:b,cookieId:l.cookieId?l.cookieId:"undefined"}),ue(!1),L(!0)},handleRefreshName:function(){d(kt())},token:b,handleToken:function(e){w(e),c("token",e,{path:"/"})},isLargeScreen:ye,menuTheme:X,isDarkModeOn:Y}),me&&l.cookieId&&"undefined"!==l.cookieId&&o.a.createElement(f.Row,{className:"valign-wrapper",style:{marginTop:"1rem"}},o.a.createElement(f.Col,{className:"center",s:12},o.a.createElement(f.Button,{large:!0,style:{backgroundColor:H(X,"importantButton",Y)},node:"button",waves:"light",onClick:function(){z({clientRole:"Returner",cookieId:l.cookieId}),ue(!1),L(!0)}},"Return to game"))),o.a.createElement("div",{style:{display:"grid",gridTemplateRows:he,gridTemplateColumns:pe,gridTemplateAreas:ve,columnGap:"".concat(2*xe,"px"),rowGap:"".concat(xe,"px"),margin:"".concat(xe,"px"),justifyContent:"center",alignContent:"center"}},o.a.createElement("div",{style:{gridArea:"showcaseTitle",alignSelf:"center",justifySelf:"center",fontSize:"20px"},title:"Random games already played"},"Game Showcase"),o.a.createElement("div",{style:{gridArea:"gameShowcase"}},o.a.createElement(gt,{socket:t,isLargeScreen:ye,menuTheme:X,boardTheme:"monochromeBoard",isDarkModeOn:Y,handleViewGame:de})),o.a.createElement("div",{style:{gridArea:"recentTitle",alignSelf:"center",justifySelf:"center",fontSize:"20px"}},"Recent Games"),o.a.createElement("div",{style:{gridArea:"recentGameList"}},o.a.createElement(wt,{recentGames:ne,isLargeScreen:ye,menuTheme:X,isDarkModeOn:Y,handleViewGame:de})))))},Ct=function(){console.log("connecting to backend at ".concat("https://wallwars.herokuapp.com/"));var e=Object(a.useState)(u()("https://wallwars.herokuapp.com/")),t=Object(i.a)(e,1)[0];return o.a.createElement(o.a.StrictMode,null,o.a.createElement(d.a,null,o.a.createElement(c.a,null,o.a.createElement(s.d,null,o.a.createElement(s.b,{path:"/wallwars/index.html",exact:!0},o.a.createElement(Et,{socket:t})),o.a.createElement(s.a,{to:"/wallwars/index.html"})))))};l.a.render(o.a.createElement(Ct,null),document.getElementById("root"))},22:function(e,t,n){e.exports={hoveredMode:"hoverHighlight_hoveredMode__1R18t",hoveredGame:"hoverHighlight_hoveredGame__3lWju"}},32:function(e,t,n){e.exports=n.p+"static/media/moveSound.6df49e4b.mp3"},73:function(e,t,n){e.exports=n.p+"static/media/blueBgDark.b39b76f7.jfif"},74:function(e,t,n){e.exports=n.p+"static/media/blueBgLight.6108cc32.jfif"},78:function(e,t,n){e.exports=n(168)},83:function(e,t,n){}},[[78,1,2]]]);
//# sourceMappingURL=main.ff3bf614.chunk.js.map