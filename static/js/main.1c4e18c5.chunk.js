(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{114:function(e,t){},12:function(e,t,n){e.exports={hoveredMode:"hoverHighlight_hoveredMode__1R18t",hoveredGame:"hoverHighlight_hoveredGame__3lWju"}},171:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(14),l=n.n(r),i=(n(85),n(9)),s=n(78),c=n(4),m=n(69),d=n.n(m),u=n(175),g=n(1),h=n(15),p=n(24),f=n(174),y=n(18),b=n(46),k=function(e){return Math.round(100*(e+Number.EPSILON))/100},v=function(e,t){if(!e)return"-";var n=(new Date).getTime(),a=new Date(e).getTime(),o=Math.floor((n-a)/1e3),r=Math.floor(o/2592e3);if(r>1)return r+(t?" months":"mo")+" ago";if(1===r)return"1"+(t?" month":"mo")+" ago";var l=Math.floor(o/86400);if(l>1)return l+(t?" days":"d")+" ago";if(1===l)return"1"+(t?" day":"d")+" ago";var i=Math.floor(o/3600);if(i>1)return i+(t?" hours":"h")+" ago";if(1===i)return"1"+(t?" hour":"h")+" ago";var s=Math.floor(o/60);return s>1?s+(t?" minutes":"m")+" ago":1===s?"1"+(t?" minute":"m")+" ago":o>1?o+(t?" seconds":"s")+" ago":1===o?o+(t?" second":"s")+" ago":"Just now"},w=function(e){return Object(b.b)({dictionaries:[b.a],length:1}).slice(0,e)},E=n(70),C=n.n(E),T={white:"#ffffff",black:"#000000",redLighten4:"#ffcdd2",redLighten3:"#ef9a9a",redLighten2:"#e57373",redLighten1:"#ef5350",red:"#f44336",redDarken1:"#e53935",redDarken2:"#d32f2f",redDarken3:"#c62828",redDarken4:"#b71c1c",tealLighten2:"#4db6ac",tealLighten1:"#26a69a",teal:"#009688",tealDarken1:"#00897b",tealDarken2:"#00796b",tealDarken4:"#004d40",indigoLighten4:"#c5cae9",indigoLighten3:"#9fa8da",indigoLighten2:"#7986cb",indigoLighten1:"#5c6bc0",indigo:"#3f51b5",indigoDarken2:"#303f9f",indigoDarken3:"#283593",indigoDarken4:"#1a237e",amberLighten3:"#ffe082",amberLighten2:"#ffd54f",amberLighten1:"#ffca28",amber:"#ffc107",amberDarken1:"#ffb300",amberDarken2:"#ffa000",orangeLighten2:"#ffb74d",yellowLighten5:"#fffde7",yellowLighten4:"#fff9c4",yellowLighten2:"#fff176",yellowLighten1:"#ffc176",yellowDarken1:"#fdd835",yellowDarken2:"#fbc02d",yellowDarken4:"#f57f17",customBlueLighten1:"#6583C3",customBlue:"#5876B6",customBlueDarken1:"#4866A6",customBlueDarken2:"#153373",customBlueDarken3:"#355393",customGrayLighten1:"#eaeaea",customGray:"#d2d2d2",customGrayDarken1:"#cccccc",customGrayDarken2:"#999999",customGrayDarken3:"#666666",customGrayDarken4:"#454545",customGrayDarken5:"#313131",lightOrange:"#fbe4D6",customLightYellow:"rgb(240,240,170)",customDarkYellow:"#656505",chessSquareLight:"#f0d9b5",chessSquareDark:"#b58863"},S={background:[T.teal,T.tealDarken4],backgroundImage:["none","none"],container:[T.tealDarken2,"keep"],containerAlternate:[T.teal,T.tealDarken4],button:[T.tealLighten2,"keep"],importantButton:[T.red,"keep"],header:[T.redLighten1,T.redDarken4],headerButton:[T.redDarken1,"keep"],recentGamesBackground:[T.redLighten2,T.redDarken2],recentGamesAlternate:[T.redLighten1,T.redDarken1],selectedTab:[T.tealDarken2,"keep"],tab:[T.tealDarken1,T.tealDarken3],disabledTab:[T.customGrayDarken1,T.customGrayDarken2],disabledTabText:[T.customGrayDarken2,T.customGrayDarken3]},x={background:[T.customBlueDarken3,"keep"],backgroundImage:["blueBgLight","blueBgDark"],container:[T.customBlueDarken3,T.customBlueDarken2],containerAlternate:[T.customBlueDarken1,"keep"],button:[T.customBlueLighten1,"keep"],importantButton:[T.red,"keep"],header:[T.customBlueDarken3,T.customBlueDarken2],headerButton:[T.customBlueLighten1,"keep"],recentGamesBackground:[T.customBlueLighten1,T.customBlueDarken1],recentGamesAlternate:[T.customBlue,"keep"],selectedTab:[T.customBlueDarken3,T.customBlueDarken2],tab:[T.customBlue,T.customBlueDarken1],disabledTab:[T.customGrayDarken1,T.customGrayDarken2],disabledTabText:[T.customGrayDarken2,T.customGrayDarken3]},P={ground:[T.customGray,T.customGrayDarken4],emptyWall:[T.customGrayLighten1,T.customGrayDarken5],pillar:[T.customGrayDarken1,T.customGrayDarken4],hoveredGround:[T.lightOrange,"flip"],hoveredWall:["#f1bfa0","flip"],player1:[T.red,T.redLighten1],player2:[T.indigo,T.indigoLighten1],timer1:[T.redLighten1,"keep"],timer2:[T.indigoLighten1,"keep"],lowTime:[T.orangeLighten2,"keep"],wall1:[T.red,T.redLighten1],wall2:[T.indigo,T.indigoLighten1],goalBackground1:[T.redLighten4,T.redDarken2],goalBackground2:[T.indigoLighten4,T.indigoDarken2],combinedGoalBackground:[T.yellowLighten1,T.yellowDarken1],goalToken:[T.customGrayLighten1,T.customGrayDarken5],ghost1:[T.redLighten4,T.redLighten4],ghost2:[T.indigoLighten4,T.indigoLighten4],ghostWall1:[T.redLighten3,T.redLighten2],ghostWall2:[T.indigoLighten3,T.indigoLighten4],traceGround:[T.customLightYellow,T.customDarkYellow],lastMoveTokenBorder:[T.customLightYellow,"yellow"],lastMoveWallBorder:[T.customLightYellow,T.yellowDarken1],coord:[T.white,T.black],move1:[T.redLighten2,"keep"],move2:[T.indigoLighten2,"keep"],currentMove:[T.amberDarken1,"keep"]},D=function(e,t,n){void 0===e[t]&&console.error("theme ".concat(e," does not have element ").concat(t));var a=e[t][0];if(!n)return a;var o=e[t][1];return"keep"===o?a:"flip"===o?C()(a):o},O=function(e,t,n){return"green"===e?D(S,t,n):"blue"===e?D(x,t,n):"monochromeBoard"===e?D(P,t,n):(console.error("unknown theme "+e),"#00FF00")},R=n(71),L=n.n(R),G=n(72),M=n.n(G);function I(e){return[[0,0],[0,e[1]-1],[e[0]-1,e[1]-1],[e[0]-1,0]]}var N=function(e){var t=I(e);return[t[0],t[1]]},j=function(e){var t=I(e);return[t[2],t[3]]},B=[15,19],A={dims:B,startPos:N(B),goalPos:j(B)},H=[19,23],z=37,_=12,F=23,W=10,q=function(e,t){t&&0!==t||(t=2500),Object(p.c)(e,{autoClose:t,hideProgressBar:!0,transition:p.a,pauseOnFocusLoss:!1})},V=function(e){var t=e.text,n=e.tooltip,a=e.onClick,r=e.menuTheme,l=e.isDarkModeOn;return o.a.createElement(g.Button,{style:{backgroundColor:O(r,"button",l),color:"#FFFFFF"},node:"button",waves:"light",onClick:a,tooltip:n},t)},Y=n(73),J=n.n(Y),$=(n(162),n(74)),U=n.n($),Q=function(e){var t=e.label,n=e.min,a=e.max,r=e.value,l=e.onChange,i=e.internalToDisplay,s=e.displayToInternal;e.menuTheme,e.isDarkModeOn;return o.a.createElement("div",null,o.a.createElement("span",{style:{fontSize:"15px"}},t),o.a.createElement(J.a,{style:{marginBottom:"12px"},range:{min:i(n),max:i(a)},start:[i(r)],step:1,tooltips:[U()({decimals:0})],onChange:function(e){l(s(e))}}))};const K=0,X=1,Z=2,ee=e=>(e+1)/2,te=e=>2*e-1,ne=e=>e/2+1,ae=e=>2*(e-1),oe=(e,t,n)=>n*(e[0]-1)/2+t*(e[0]+1)/2,re=(e,t,n)=>n*(e[1]-1)/2+t*(e[1]+1)/2,le=(e,t)=>{const[n,a]=[Math.abs(e[0]-t[0]),Math.abs(e[1]-t[1])];return(n+a)/2},ie=e=>[le(e.startPos[0],e.goalPos[0]),le(e.startPos[1],e.goalPos[1])],se=e=>k(e.duration)+"+"+k(e.increment);function ce(e){return e[0]%2===0&&e[1]%2===0?K:e[0]%2!==e[1]%2?X:Z}function me(e,t){return e[0]===t[0]&&e[1]===t[1]}function de(e){let t=[];for(let n=0;n<e[0];n++){t[n]=[];for(let a=0;a<e[1];a++)t[n][a]=0}return t}function ue(e,t){return e[0]>=0&&e[0]<t[0]&&e[1]>=0&&e[1]<t[1]}function ge(e,t){return ce(t)===X&&0!==e[t[0]][t[1]]}function he(e,t){const n=function(e){return[e.length,e[0].length]}(e);if(ce(t)!==K)return[];const a=[[0,1],[0,-1],[1,0],[-1,0]],o=[],[r,l]=[t[0],t[1]];for(let i=0;i<a.length;i++){const[t,s]=[a[i][0],a[i][1]],c=[r+t,l+s],m=[r+2*t,l+2*s];ue(m,n)&&!ge(e,c)&&o.push(m)}return o}function pe(e,t,n){if(me(t,n))return 0;const a=e[0].length,o=e=>e[0]*a+e[1],r=[];let l=0;r.push(t);const i=new Map;for(i.set(o(t),0);l<r.length;){const t=r[l];l++;const a=he(e,t);for(let e=0;e<a.length;e++){let l=a[e];if(!i.has(o(l))){if(i.set(o(l),i.get(o(t))+1),me(l,n))return i.get(o(l));r.push(l)}}}return-1}function fe(e,t,n,a){if(me(t,n))return 0;const o=e[0].length,r=e=>e[0]*o+e[1],l=[];let i=0;l.push(t);const s=new Map;for(s.set(r(t),0);i<l.length;){const t=l[i];i++;const o=s.get(r(t));if(o>a)return!1;const c=he(e,t);for(let e=0;e<c.length;e++){let t=c[e];if(!s.has(r(t))){if(me(t,n))return o+1<=a;s.set(r(t),o+1),l.push(t)}}}return!1}function ye(e,t,n){return-1!==pe(e,t,n)}function be(e,t,n,a){if(ge(e,a))return!1;e[a[0]][a[1]]=1;var o=function(e,t,n){for(let a=0;a<t.length;a++)if(!ye(e,t[a],n[a]))return!1;return!0}(e,t,n);return e[a[0]][a[1]]=0,o}function ke(e){return 18===e[0]?"X":""+(2+e[0])/2}function ve(e){return String.fromCharCode(97+e[1]/2)}function we(e){if(ce(e)===K)return ve(e)+ke(e);return e[1]%2===1?ve([e[0],e[1]-1])+ve([e[0],e[1]+1])+ke(e):ve(e)+ke([e[0]+1,e[1]])+ke([e[0]-1,e[1]])}var Ee=function(e){var t=e.label,n=e.min,a=e.max,r=e.value,l=e.onChange;e.menuTheme,e.isDarkModeOn;return o.a.createElement(Q,{label:t,min:n,max:a,value:r,onChange:l,internalToDisplay:ne,displayToInternal:ae})},Ce=function(e){var t=e.label,n=e.min,a=e.max,r=e.value,l=e.onChange;e.menuTheme,e.isDarkModeOn;return o.a.createElement(Q,{label:t,min:n,max:a,value:r,onChange:l,internalToDisplay:ee,displayToInternal:te})};const Te=o.a.createElement("div",null,o.a.createElement("h6",null,"This is the lobby. From here, you can create games that your friends can join, or join a friend's game."),o.a.createElement("h6",null,"When you create a game, you can choose the ",o.a.createElement("em",null,"duration")," (per player) and a time ",o.a.createElement("em",null,"increment")," that is added to each player after they move, among other settings. Once you create a game, a ",o.a.createElement("em",null,"join code")," ",'will appear at the top. Share this code with your friend to play with them. In addition, if you select the "Public" game option, anyone will be able to see and join your game.'),o.a.createElement("h6",null,"You can find public games to join in the ",o.a.createElement("em",null,"Open Challenges")," tab in the lobby. To join a private game from a friend, write the code they give you in the box next to the ",o.a.createElement("em",null,"Join Game")," button and click it."),o.a.createElement("h6",null,"To get a feel for the game, you can watch some of the recent games listed in the ",o.a.createElement("em",null,"Recente Games")," tab in the lobby."),o.a.createElement("h6",null,"A random ",o.a.createElement("em",null,"player name")," has been chosen for you, but you can change it. You can also choose the look of your token.")),Se=o.a.createElement("div",null,o.a.createElement("h6",null,"Wallwars is an online 2-player strategy board game. The player who gets to their goal before first wins. You can place walls to reshape the terrain to your advantage."),o.a.createElement("h6",null,"WallWars is inspired by board games like Blockade and Quoridor. The main difference is that in WallWars there is no limit to how many walls you can place, and moves are more flexible (for instance, you can move and place a wall in the same turn)."),o.a.createElement("h6",null,"The source code is available at https://github.com/nmamano/WallWars")),xe=o.a.createElement("div",null,o.a.createElement("h6",null,"All games played with the same ELO id get an ELO rating. The rating appears in the ranking under the name last used with this ELO id. If you want to be ranked fairly, always use the same ELO id when playing. Conversely, if you don't want a game to influence your ranking, change the ELO id to something different."),o.a.createElement("h6",null,o.a.createElement("b",null,"WARNING:")," do NOT use a password that you use in another website as the ELO id. Your ELO id is not shown to other players, but it is not treated securely like a password.")),Pe=["school","default","face","outlet","mood","mood_bad","child_care","pets","whatshot","toys","spa","stop","star","lens","favorite","visibility","group_work","flare","ac_unit","camera","casino","directions_boat","directions_bus","directions_car","event_seat","adb","bug_report"];var De=({clientParams:e,isLargeScreen:t,handlePlayerName:n,handleDuration:r,handleIncrement:l,handleIsPublic:i,handleNumRows:s,handleNumCols:c,handleShowMoreOptions:m,handleStartPos:d,handleGoalPos:u,handleJoinCode:h,handleCreateGame:p,handleJoinGame:f,handleRefreshName:y,handleToken:b,handleCookieId:k})=>{const v=e.menuTheme,w=e.isDarkModeOn,E=e.showMoreOptions,C=e.boardSettings;Object(a.useEffect)(()=>(window.addEventListener("keydown",T),()=>{window.removeEventListener("keydown",T)}));const T=({key:t})=>{"Enter"===t&&(e.joinCode.length>0?f():(q("Created new game",5e3),p()))},S=o.a.createElement("div",{style:{fontSize:"30px"}},o.a.createElement("i",{className:"material-icons white-text",style:{height:"100%"}},"face"),t?" / ":"/",o.a.createElement("i",{className:"material-icons white-text",style:{height:"100%"}},"outlet"));return o.a.createElement("div",{className:"container",style:{marginTop:"2rem",backgroundColor:O(v,"container",w)}},o.a.createElement(g.Row,{className:"valign-wrapper"},o.a.createElement(g.Col,{className:"center",s:4,m:4},o.a.createElement("span",{style:{fontSize:"23px"}},t?"Your name:":"Name:")),o.a.createElement(g.Col,{s:6,m:3},o.a.createElement(g.TextInput,{id:"nameInput",value:e.playerName,onChange:e=>{n(e.target.value)}})),o.a.createElement(g.Col,{s:1,m:1},o.a.createElement(g.Button,{node:"button",waves:"light",small:!0,floating:!0,style:{color:"white",backgroundColor:O(v,"button",w)},icon:o.a.createElement(g.Icon,null,"refresh"),onClick:y,tooltip:"Get a new name"})),o.a.createElement(g.Col,{s:1,m:4})),o.a.createElement(g.Row,{className:"valign-wrapper"},o.a.createElement(g.Col,{className:"center",s:4,m:4},o.a.createElement("span",{style:{fontSize:"23px"}},"ELO id:")),o.a.createElement(g.Col,{s:6,m:3},o.a.createElement(g.TextInput,{id:"cookieIdInput",value:e.cookieId,onChange:e=>{k(e.target.value)}})),o.a.createElement(g.Col,{s:1,m:1},o.a.createElement(g.Modal,{style:{color:"black",backgroundColor:"white"},bottomSheet:!1,fixedFooter:!1,header:"About ELO ids",open:!1,options:{dismissible:!0,endingTop:"10%",inDuration:250,opacity:.4,outDuration:250,preventScrolling:!0,startingTop:"4%"},trigger:o.a.createElement(g.Button,{node:"button",waves:"light",small:!0,floating:!0,style:{color:"white",backgroundColor:O(v,"button",w)},icon:o.a.createElement(g.Icon,null,"info"),onClick:y,tooltip:"About ELO ids"})},o.a.createElement("div",null,xe))),o.a.createElement(g.Col,{s:1,m:4})),o.a.createElement(g.Row,{className:"valign-wrapper"},o.a.createElement(g.Col,{className:"center",s:4,m:4},o.a.createElement("span",{style:{fontSize:"23px"}},t?"Your token:":"Token:")),o.a.createElement(g.Col,{s:3,m:2,className:"center"},"default"===e.token?S:o.a.createElement("div",{className:"white-text",style:{fontSize:"30px"}},o.a.createElement("i",{className:"material-icons white-text",style:{height:"100%"}},e.token))),o.a.createElement(g.Col,{s:4,m:4},o.a.createElement("div",null,o.a.createElement(g.Dropdown,{id:"Dropdown_6",options:{alignment:"left",autoTrigger:!0,closeOnClick:!0,constrainWidth:!0,container:null,coverTrigger:!0,hover:!1,inDuration:150,onCloseEnd:null,onCloseStart:null,onOpenEnd:null,onOpenStart:null,outDuration:250},trigger:o.a.createElement(g.Button,{node:"button",style:{backgroundColor:O(v,"button",w)}},"Change")},Pe.map(e=>o.a.createElement("div",{style:{width:"100%",color:"white",backgroundColor:O(v,"button",w)},key:e,node:"button",onClick:()=>b(e)},o.a.createElement("div",{className:"center",style:{display:"flex",flexDirection:"column",justifyContent:"center",padding:"4px 0"}},"default"===e?S:o.a.createElement("i",{className:"material-icons white-text",style:{height:"100%"}},e))))))),o.a.createElement(g.Col,{s:1,m:2})),o.a.createElement(g.Row,{className:"valign-wrapper"},o.a.createElement(g.Col,{className:"center",s:5,m:4},o.a.createElement(V,{text:"Create Game",onClick:p,menuTheme:v,isDarkModeOn:w})),o.a.createElement(g.Col,{s:2,m:2,style:{paddingRight:"0"}},o.a.createElement(g.TextInput,{id:"durationInput",label:"Duration",value:""+e.timeControl.duration,onChange:e=>{r(e.target.value)}})),o.a.createElement(g.Col,{s:1,m:1,style:{paddingLeft:"0"}},"m"),o.a.createElement(g.Col,{s:2,m:2,style:{paddingRight:"0"}},o.a.createElement(g.TextInput,{id:"incrementInput",label:"Increment",value:""+e.timeControl.increment,onChange:e=>{l(e.target.value)}})),o.a.createElement(g.Col,{s:1,m:1,style:{paddingLeft:"0"}},"s"),o.a.createElement(g.Col,{s:1,m:2})),o.a.createElement(g.Row,{className:"valign-wrapper"},o.a.createElement(g.Col,{className:"center",s:5,m:4}," ",o.a.createElement(g.Checkbox,{id:"isPublicCheckbox",filledIn:!0,label:"PUBLIC",value:"PUBLIC",checked:e.isPublic,onChange:()=>{i(!e.isPublic)}})),o.a.createElement(g.Col,{s:2,m:2,style:{paddingRight:"0"}},o.a.createElement(Ce,{label:"Rows:",min:3,max:H[0],value:C.dims[0],onChange:s})),o.a.createElement(g.Col,{s:1,m:1,style:{paddingLeft:"0"}}),o.a.createElement(g.Col,{s:2,m:2,style:{paddingRight:"0"}},o.a.createElement(Ce,{label:"Columns:",min:3,max:H[1],value:C.dims[1],onChange:c})),o.a.createElement(g.Col,{s:1,m:1,style:{paddingLeft:"0"}}),o.a.createElement(g.Col,{s:1,m:2})),o.a.createElement(g.Row,{className:"valign-wrapper"},o.a.createElement(g.Col,{className:"center",s:5,m:4},o.a.createElement("span",{style:{fontSize:"15px"}},"More options:"),o.a.createElement(g.Switch,{id:"MoreSwitch",offLabel:"Off",onChange:m,onLabel:"On"})),o.a.createElement(g.Col,{s:2,m:2,style:{paddingRight:"0"},title:"The row where Player 1 starts"},E&&o.a.createElement(Ee,{label:"P1 row:",min:0,max:C.dims[0]-1,value:C.startPos[0][0],onChange:e=>{d(0,0,e)}})),o.a.createElement(g.Col,{s:1,m:1,style:{paddingLeft:"0"}}),o.a.createElement(g.Col,{s:2,m:2,style:{paddingRight:"0"},title:"The column where Player 1 starts"},E&&o.a.createElement(Ee,{label:"P1 col:",min:0,max:C.dims[1]-1,value:C.startPos[0][1],onChange:e=>{d(0,1,e)}})),o.a.createElement(g.Col,{s:1,m:1,style:{paddingLeft:"0"}}),o.a.createElement(g.Col,{s:1,m:2})),E&&o.a.createElement(g.Row,{className:"valign-wrapper"},o.a.createElement(g.Col,{className:"center",s:5,m:4}),o.a.createElement(g.Col,{s:2,m:2,style:{paddingRight:"0"},title:"The row where Player 2 starts"},o.a.createElement(Ee,{label:"P2 row:",min:0,max:C.dims[0]-1,value:C.startPos[1][0],onChange:e=>{d(1,0,e)}})),o.a.createElement(g.Col,{s:1,m:1,style:{paddingLeft:"0"}}),o.a.createElement(g.Col,{s:2,m:2,style:{paddingRight:"0"},title:"The column where Player 2 starts"},o.a.createElement(Ee,{label:"P2 col:",min:0,max:C.dims[1]-1,value:C.startPos[1][1],onChange:e=>{d(1,1,e)}})),o.a.createElement(g.Col,{s:1,m:1,style:{paddingLeft:"0"}}),o.a.createElement(g.Col,{s:1,m:2})),E&&o.a.createElement(g.Row,{className:"valign-wrapper"},o.a.createElement(g.Col,{className:"center",s:5,m:4}),o.a.createElement(g.Col,{s:2,m:2,style:{paddingRight:"0"},title:"The row of the goal of Player 1"},o.a.createElement(Ee,{label:"G1 row:",min:0,max:C.dims[0]-1,value:C.goalPos[0][0],onChange:e=>{u(0,0,e)}})),o.a.createElement(g.Col,{s:1,m:1,style:{paddingLeft:"0"}}),o.a.createElement(g.Col,{s:2,m:2,style:{paddingRight:"0"},title:"The column of the goal of Player 1"},o.a.createElement(Ee,{label:"G1 col:",min:0,max:C.dims[1]-1,value:C.goalPos[0][1],onChange:e=>{u(0,1,e)}})),o.a.createElement(g.Col,{s:1,m:1,style:{paddingLeft:"0"}}),o.a.createElement(g.Col,{s:1,m:2})),E&&o.a.createElement(g.Row,{className:"valign-wrapper"},o.a.createElement(g.Col,{className:"center",s:5,m:4}),o.a.createElement(g.Col,{s:2,m:2,style:{paddingRight:"0"},title:"The row of the goal of Player 2"},o.a.createElement(Ee,{label:"G2 row:",min:0,max:C.dims[0]-1,value:C.goalPos[1][0],onChange:e=>{u(1,0,e)}})),o.a.createElement(g.Col,{s:1,m:1,style:{paddingLeft:"0"}}),o.a.createElement(g.Col,{s:2,m:2,style:{paddingRight:"0"},title:"The column of the goal of Player 2"},o.a.createElement(Ee,{label:"G2 Col:",min:0,max:C.dims[1]-1,value:C.goalPos[1][1],onChange:e=>{u(1,1,e)}})),o.a.createElement(g.Col,{s:1,m:1,style:{paddingLeft:"0"}}),o.a.createElement(g.Col,{s:1,m:2})),o.a.createElement(g.Row,{className:"valign-wrapper"},o.a.createElement(g.Col,{className:"center",s:5,m:4},o.a.createElement(V,{text:"Join Game",onClick:f,menuTheme:v,isDarkModeOn:w})),o.a.createElement(g.Col,{s:6,m:5},o.a.createElement(g.TextInput,{id:"joinInput",placeholder:"Write game code here...",value:""+e.joinCode,onChange:e=>{console.log(e),h(e.target.value)}})),o.a.createElement(g.Col,{s:1,m:3})))},Oe=n(10),Re=n.n(Oe),Le=n(12),Ge=n.n(Le),Me=function(e){var t=e.challenges,n=e.isLargeScreen,a=e.menuTheme,r=e.isDarkModeOn,l=e.handleAcceptChallenge,i=[O(a,"recentGamesBackground",r),O(a,"recentGamesAlternate",r),O(a,"container",r)],s=i[0],c=i[1],m={position:"sticky",top:"0px",paddingTop:"0.15rem",paddingBottom:"0.15rem",borderRadius:"0",backgroundColor:i[2]},d={paddingTop:"0.15rem",paddingBottom:"0.15rem",borderRadius:"0"};return o.a.createElement("div",{className:"center",style:{overflowY:"scroll",display:"block",height:"100%",backgroundColor:s}},o.a.createElement(g.Table,{centered:!0,style:{width:"100%"}},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{style:m},"Time"),o.a.createElement("th",{style:m},"Player"),o.a.createElement("th",{style:m},"Board"),n&&o.a.createElement("th",{style:m},"Distance"),o.a.createElement("th",{style:m},"Date"))),o.a.createElement("tbody",null,t.map((function(e,t){return o.a.createElement("tr",{onClick:function(){return l(e.joinCode)},style:{cursor:"pointer",backgroundColor:t%2?s:c},className:Ge.a.hoveredGame,key:t},o.a.createElement("td",{style:d},se(e.timeControl)),o.a.createElement("td",{style:d},e.playerNames[0]),o.a.createElement("td",{style:d},(r=e.boardSettings.dims,ee(r[0])+":"+ee(r[1]))),n&&o.a.createElement("td",{style:d},(a=ie(e.boardSettings))[0]+" - "+a[1]),o.a.createElement("td",{style:d},v(e.creationDate,n)));var a,r})))))},Ie=function(e){return"creator"===e.winner?"<":"draw"===e.winner?"=":">"},Ne=new Map,je=function(e){var t=e.recentGames,n=e.isLargeScreen,a=e.menuTheme,r=e.isDarkModeOn,l=e.handleViewGame,s=[O(a,"recentGamesBackground",r),O(a,"recentGamesAlternate",r),O(a,"container",r)],c=s[0],m=s[1],d={position:"sticky",top:"0px",paddingTop:"0.15rem",paddingBottom:"0.15rem",borderRadius:"0",backgroundColor:s[2]},u={paddingTop:"0.15rem",paddingBottom:"0.15rem",borderRadius:"0"};return n?o.a.createElement("div",{className:"center",style:{overflowY:"scroll",display:"block",height:"100%",backgroundColor:O(a,"recentGamesBackground",r)}},o.a.createElement(g.Table,{centered:!0,style:{width:"100%"}},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{style:d},"Time"),o.a.createElement("th",{style:d},"Player 1"),o.a.createElement("th",{style:d}),o.a.createElement("th",{style:d},"Player 2"),o.a.createElement("th",{style:d},"Distance"),o.a.createElement("th",{style:d},"Turns"),o.a.createElement("th",{style:d},"Date"))),o.a.createElement("tbody",null,t&&t.map((function(e,t){var n=function(e){if(Ne.size>1e3&&Ne.clear(),Ne.has(e._id))return Ne.get(e._id);for(var t=de(e.boardSettings.dims),n=Re()(e.boardSettings.startPos),a=e.creatorStarts?0:1,o=0;o<e.moveHistory.length;o++){for(var r=e.moveHistory[o].actions,l=0;l<r.length;l++){var s=r[l];ce(s)===K?n[a]=s:t[s[0]][s[1]]=a+1}a=(a+1)%2}var c=Object(i.a)(e.boardSettings.goalPos,2),m=c[0],d=c[1],u=[pe(t,n[0],m),pe(t,n[1],d)],g=u[0],h=u[1];return Ne.set(e._id,[g,h]),[g,h]}(e),a=Object(i.a)(n,2),r=a[0],s=a[1];return o.a.createElement("tr",{onClick:function(){return l(e._id)},style:{cursor:"pointer",backgroundColor:t%2?c:m},className:Ge.a.hoveredGame,key:t},o.a.createElement("td",{style:u},se(e.timeControl)),o.a.createElement("td",{style:u},e.playerNames[0]),o.a.createElement("td",{style:u},Ie(e)),o.a.createElement("td",{style:u},e.playerNames[1]),o.a.createElement("td",{style:u},r+" - "+s),o.a.createElement("td",{style:u},e.moveHistory.length),o.a.createElement("td",{style:u},v(e.startDate,!0)))}))))):o.a.createElement("div",{className:"center",style:{overflowY:"scroll",display:"block",height:"100%"}},o.a.createElement(g.Table,{centered:!0,style:{width:"100%"}},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{style:d},"Time"),o.a.createElement("th",{style:d},"Player 1"),o.a.createElement("th",{style:d},"Win"),o.a.createElement("th",{style:d},"Player 2"),o.a.createElement("th",{style:d},"Date"))),o.a.createElement("tbody",null,t&&t.map((function(e,t){return o.a.createElement("tr",{onClick:function(){return l(e._id)},style:{cursor:"pointer",backgroundColor:t%2?c:m},className:Ge.a.hoveredGame,key:t},o.a.createElement("td",{style:u},se(e.timeControl)),o.a.createElement("td",{style:u},e.playerNames[0]),o.a.createElement("td",{style:u},Ie(e)),o.a.createElement("td",{style:u},e.playerNames[1]),o.a.createElement("td",{style:u},v(e.startDate,!1)))})))))};var Be=({socket:e,isLargeScreen:t,menuTheme:n,isDarkModeOn:r,recentGames:l,handleViewGame:i,handleAcceptChallenge:s})=>{const[c,m]=Object(y.a)({needToRequestChallenges:!0,challenges:[],showChallenges:!1});Object(a.useEffect)(()=>{c.needToRequestChallenges&&(m(e=>{e.needToRequestChallenges=!1}),e.emit("requestCurrentChallenges"))},[e,m,c.needToRequestChallenges]),Object(a.useEffect)(()=>(e.once("requestedCurrentChallenges",({challenges:e})=>{m(t=>{t.challenges=e,t.challenges.length>0&&(t.showChallenges=!0)})}),e.on("newChallenge",({challenge:e})=>{m(t=>{t.challenges.push(e),1===t.challenges.length&&(t.showChallenges=!0)})}),e.on("deadChallenge",({joinCode:e})=>{m(t=>{for(let n=0;n<t.challenges.length;n++){if(t.challenges[n].joinCode===e)return void t.challenges.splice(n,1)}})}),()=>{e.off("newChallenge"),e.off("deadChallenge")}),[e,m]);const d=!Object(h.useMediaQuery)({query:"(hover: none)"}),[u,g]=Object(a.useState)(null),p=e=>{g(e)},f=()=>{g(null)},b={alignSelf:"stretch",justifySelf:"stretch",display:"flex",justifyContent:"center",alignItems:"center",fontSize:t?"16px":"12px",cursor:"pointer",borderBottom:"2px solid "+O(n,"selectedTab",r),backgroundColor:O(n,"tab",r),fontWeight:"bold"};let k=Re()(b),v=Re()(b),w=Re()(b);const E=O(n,"selectedTab",r);return(!c.showChallenges||d&&"recent"===u)&&(k.backgroundColor=E),(c.showChallenges||d&&"open"===u)&&(v.backgroundColor=E),w.backgroundColor=O(n,"disabledTab",r),w.color=O(n,"disabledTabText",r),w.cursor=null,o.a.createElement("div",{style:{padding:"0px",margin:"0px",display:"block",height:"100%",overflowY:"hidden",border:"1px solid "+O(n,"container",r)}},o.a.createElement("div",{style:{height:"50px",width:"100%",display:"grid",gridTemplateRows:"1fr",gridTemplateColumns:"1fr 1fr 1fr",justifyContent:"center",alignContent:"center"}},o.a.createElement("div",{style:v,onClick:()=>{m(e=>{e.showChallenges=!0})},onMouseEnter:()=>p("open"),onMouseLeave:f,title:"Players looking for an opponent"},`Challenges (${c.challenges.length})`),o.a.createElement("div",{style:k,onClick:()=>{m(e=>{e.showChallenges=!1})},onMouseEnter:()=>p("recent"),onMouseLeave:f,title:"Games played recently"},"Recent Games"),o.a.createElement("div",{style:w,title:"Games being played right now (coming soon)"},"Live Games")),c.showChallenges&&o.a.createElement(Me,{challenges:c.challenges,isLargeScreen:t,menuTheme:n,isDarkModeOn:r,handleAcceptChallenge:s}),!c.showChallenges&&o.a.createElement(je,{recentGames:l,isLargeScreen:t,menuTheme:n,isDarkModeOn:r,handleViewGame:i}))};const Ae=e=>{const t=e.winCount,n=e.drawCount;return t+"/"+n+"/"+(e.gameCount-t-n)};var He=({isLargeScreen:e,menuTheme:t,isDarkModeOn:n,ranking:a})=>{const[r,l,i]=[O(t,"recentGamesBackground",n),O(t,"recentGamesAlternate",n),O(t,"container",n)],s={position:"sticky",top:"0px",paddingTop:"0.15rem",paddingBottom:"0.15rem",borderRadius:"0",backgroundColor:i},c={paddingTop:"0.15rem",paddingBottom:"0.15rem",borderRadius:"0"};return e?o.a.createElement("div",{className:"center",style:{overflowY:"scroll",display:"block",height:"100%",backgroundColor:O(t,"recentGamesBackground",n)}},o.a.createElement(g.Table,{centered:!0,style:{width:"100%"}},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{style:s},"Ranking"),o.a.createElement("th",{style:s},"Name"),o.a.createElement("th",{style:s},"Rating"),o.a.createElement("th",{style:s},"Peak Rating"),o.a.createElement("th",{style:s},"Games"),o.a.createElement("th",{style:s},"First played"),o.a.createElement("th",{style:s},"Last played"))),o.a.createElement("tbody",null,a&&a.map((e,t)=>o.a.createElement("tr",{style:{backgroundColor:t%2?r:l},className:Ge.a.hoveredGame,key:t},o.a.createElement("td",{style:c},t+1),o.a.createElement("td",{style:c},e.name),o.a.createElement("td",{style:c},Math.round(e.rating)),o.a.createElement("td",{style:c},Math.round(e.peakRating)),o.a.createElement("td",{style:c},Ae(e)),o.a.createElement("td",{style:c},v(e.firstGameDate,!0)),o.a.createElement("td",{style:c},v(e.lastGameDate,!0))))))):o.a.createElement("div",{className:"center",style:{overflowY:"scroll",display:"block",height:"100%"}},o.a.createElement(g.Table,{centered:!0,style:{width:"100%"}},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{style:s},"Ranking"),o.a.createElement("th",{style:s},"Name"),o.a.createElement("th",{style:s},"Rating"),o.a.createElement("th",{style:s},"Games"),o.a.createElement("th",{style:s},"Last played"))),o.a.createElement("tbody",null,a&&a.map((e,t)=>o.a.createElement("tr",{style:{backgroundColor:t%2?r:l},className:Ge.a.hoveredGame,key:t},o.a.createElement("td",{style:c},t+1),o.a.createElement("td",{style:c},e.name),o.a.createElement("td",{style:c},Math.round(e.rating)),o.a.createElement("td",{style:c},Ae(e)),o.a.createElement("td",{style:c},v(e.lastGameDate,!1)))))))},ze=n(75),_e=n.n(ze),Fe=n(76),We=n.n(Fe);const qe="creator",Ve="joiner",Ye="spectator",Je="returner",$e=e=>e.moveHistory.length-1,Ue=e=>$e(e)%2===(e.creatorStarts?0:1),Qe=e=>e.viewIndex%2===(e.creatorStarts?0:1),Ke=e=>Ue(e)?0:1,Xe=e=>null===e?"None":ce(e),Ze=e=>e.arePlayersPresent[e.clientRole===qe?1:0],et=(e,t,n,a,o,r,l)=>{const i=Re()(e);for(let s=0;s<l.length;s++){const e=l[s];i[e[0]][e[1]]=1}return ce(t)===K?pe(i,n,t):be(i,[n,a],[o,r],t)?1:0},tt=(e,t)=>{if(t&&(t.isVolumeOn&&"true"===t.isVolumeOn&&(e.isVolumeOn=!0),t.zoomLevel)){const n=parseInt(t.zoomLevel);n>=0&&n<=10&&(e.zoomLevel=n)}},nt=(e,t,n,a,o)=>{e.clientRole=qe,e.lifeCycleStage=-1,e.timeControl=t,e.boardSettings=n,e.names[0]=a,e.tokens[0]=o;const r=60*t.duration;e.moveHistory[0].timeLeft=[r,r],e.moveHistory[0].grid=de(n.dims),e.moveHistory[0].playerPos=n.startPos,e.moveHistory[0].distances=ie(n)},at=(e,t,n,a)=>{e.clientRole=Ve,e.lifeCycleStage=-1,e.joinCode=t,e.names[1]=n,e.tokens[1]=a},ot=(e,t,n)=>{0!==e.lifeCycleStage&&(e.joinCode=t,e.creatorStarts=n,e.lifeCycleStage=0)},rt=(e,t,n,a,o,r,l)=>{if(1===e.lifeCycleStage)return;e.creatorStarts=r,e.names[0]=t,e.tokens[0]=n,e.timeControl=a,e.boardSettings=o,e.arePlayersPresent[0]=l;const i=60*a.duration;e.moveHistory[0].timeLeft=[i,i],e.moveHistory[0].grid=de(o.dims),e.moveHistory[0].playerPos=o.startPos,e.moveHistory[0].distances=ie(o),e.lifeCycleStage=1},lt=(e,t,n)=>{1!==e.lifeCycleStage&&(e.names[1]=t,e.tokens[1]=n,e.lifeCycleStage=1)},it=(e,t,n,a)=>{if(e.lifeCycleStage<1||e.lifeCycleStage>3)return;const o=$e(e);if(o!==a-1)return;const r=Ke(e),l=0===r?1:0,i=Re()(e.moveHistory[o].playerPos),s=Re()(e.moveHistory[o].grid),c=Re()(e.moveHistory[o].timeLeft),m=Re()(e.moveHistory[o].wallCounts);c[r]=n;for(let d=0;d<t.length;d++){const n=t[d],a=ce(n);if(a===K){if(i[r]=n,me(n,e.boardSettings.goalPos[r])){const t=o%2===0,n=fe(s,i[l],e.boardSettings.goalPos[l],2);t&&n?(e.winner="draw",e.matchScore[0]+=.5,e.matchScore[1]+=.5):(e.winner=0===r?qe:Ve,e.matchScore[r]++),e.finishReason="goal",e.lifeCycleStage=4}}else a===X?(s[n[0]][n[1]]=r+1,m[r]++):console.error("unexpected action type",a)}if(e.moveHistory.push({index:o+1,actions:t,grid:s,playerPos:i,timeLeft:c,distances:[pe(s,i[0],e.boardSettings.goalPos[0]),pe(s,i[1],e.boardSettings.goalPos[1])],wallCounts:m}),1===e.lifeCycleStage&&0===o?e.lifeCycleStage=2:2===e.lifeCycleStage&&1===o&&(e.lifeCycleStage=3),e.ghostAction=null,e.viewIndex=o+1,e.premoveActions.length>0){const t=e.premoveActions;e.premoveActions=[];for(let n=0;n<t.length;n++)st(e,t[n],!0)}},st=(e,t,n)=>{if(!n)return void ct(e,t);if(e.lifeCycleStage<1)return;if(e.lifeCycleStage>3)return;if(e.viewIndex!==$e(e))return;const a=e.boardSettings.dims;if(t[0]<0||t[0]>=a[0]||t[1]<0||t[1]>=a[1])return;const o=ce(t),r=Ke(e),l=0===r?1:0,i=Xe(e.ghostAction),s=i===X?[e.ghostAction]:[],c=$e(e);let m=e.moveHistory[c].playerPos[r];o===X&&i===K&&(m=e.ghostAction);const d=et(e.moveHistory[c].grid,t,m,e.moveHistory[c].playerPos[l],e.boardSettings.goalPos[r],e.boardSettings.goalPos[l],s);if(d>2)return;let[u,g]=[null,null];if("None"===i){if(o===X){if(1!==d)return;g=t}else if(o===K)if(1===d)g=t;else{if(2!==d)return;u=[t]}}else if(i===X){if(o===X)if(me(e.ghostAction,t))g=null;else{if(1!==d)return;u=[t,e.ghostAction]}else if(o===K)if(0===d)g=null;else{if(1!==d)return;u=[t,e.ghostAction]}}else if(i===K){if(o===X){if(1!==d)return;u=[t,e.ghostAction]}else if(o===K)if(0===d)g=null;else if(1===d)g=me(t,e.ghostAction)?null:t;else{if(2!==d)return;u=[t]}}else console.error("unexpected ghost type",i);if(u){const t=Ke(e),n=$e(e);let a=e.moveHistory[n].timeLeft[t];3===e.lifeCycleStage&&(a+=e.timeControl.increment),e.shouldPlaySound=!0,it(e,u,a,$e(e)+1),e.moveToSend={actions:u,remainingTime:a,distances:e.moveHistory[e.moveHistory.length-1].distances}}else e.ghostAction=g},ct=(e,t)=>{if(e.lifeCycleStage>3)return;if(e.viewIndex!==$e(e))return;const n=e.boardSettings.dims;if(t[0]<0||t[0]>=n[0]||t[1]<0||t[1]>=n[1])return;const a=ce(t),o=0===Ke(e)?1:0,r=0===o?1:0,l=$e(e),i=[];let s=null;for(let E=0;E<e.premoveActions.length;E++){const t=e.premoveActions[E];ce(t)===X?i.push(t):s=t}let c=e.moveHistory[l].playerPos[o];a===X&&s&&(c=s);const m=et(e.moveHistory[l].grid,t,c,e.moveHistory[l].playerPos[r],e.boardSettings.goalPos[o],e.boardSettings.goalPos[r],i);let d=null;if(s&&(d=et(e.moveHistory[l].grid,s,e.moveHistory[l].playerPos[o],e.moveHistory[l].playerPos[r],e.boardSettings.goalPos[o],e.boardSettings.goalPos[r],i)),m>2)return;const u="empty",g="wall",h="wallWall",p="groundWall",f="groundDist1",y="groundDist2";let b;if(0===e.premoveActions.length)b=u;else if(s||1!==i.length)if(s||2!==i.length)if(s&&1===i.length)b=p;else if(s&&1===d)b=f;else{if(!s||2!==d)return void console.error("Unknown premove state",s,i,m,d);b=y}else b=h;else b=g;let k=[];if(me(t,c))return 0===e.premoveActions.length?void 0:void(e.premoveActions=[]);let[v,w]=[null,null];if(1===i.length?[v,w]=[i[0],null]:2===i.length&&([v,w]=[i[0],i[1]]),b===u)if(a===X){if(1!==m)return;k=[t]}else a===K&&(1===m||2===m?k=[t]:console.error("unreachable case"));else if(b===g){if(a===X)if(me(v,t))k=[];else{if(1!==m)return;k=[v,t]}else if(a===K){if(1!==m)return;k=[v,t]}}else if(b===h){if(a===X)if(me(v,t))k=[w];else{if(!me(w,t))return;k=[v]}else if(a===K)return}else if(b===f)if(a===X){if(1!==m)return;k=[s,t]}else a===K&&(k=me(t,s)?[]:[t]);else if(b===y){if(a===X)return;a===K&&(k=me(t,s)?[]:[t])}else if(b===p){if(a===X){if(!me(t,v))return;k=[s]}else if(a===K)if(me(t,s))k=[v];else{if(1!==m)return;k=[v,t]}}else console.error("unexpected premove state case",b);k&&(e.premoveActions=k)},mt=e=>{e.showRematchDialog=!1,e.showDrawDialog=!1,e.showTakebackDialog=!1,e.ghostAction=null,e.premoveActions=[]},dt=(e,t)=>{3===e.lifeCycleStage&&(e.shouldPlaySound=!0,e.lifeCycleStage=4,e.winner="draw",e.matchScore[0]+=.5,e.matchScore[1]+=.5,e.finishReason=t,mt(e))},ut=(e,t)=>{3===e.lifeCycleStage&&(e.lifeCycleStage=4,e.winner=t?Ve:qe,e.matchScore[t?1:0]++,e.finishReason="resign",mt(e))},gt=(e,t)=>{if(e.showTakebackDialog=!1,2!==e.lifeCycleStage&&3!==e.lifeCycleStage)return;const n=t===Ue(e)?2:1;for(let o=0;o<n;o++)e.moveHistory.pop();const a=$e(e);e.viewIndex=a,0===a?e.lifeCycleStage=1:1===a&&(e.lifeCycleStage=2),mt(e)},ht=e=>{if(4!==e.lifeCycleStage)return;e.creatorStarts=!e.creatorStarts;const t=de(e.boardSettings.dims);e.moveHistory=[{index:0,actions:[],grid:t,playerPos:e.boardSettings.startPos,timeLeft:[60*e.timeControl.duration,60*e.timeControl.duration],distances:[pe(t,e.boardSettings.startPos[0],e.boardSettings.goalPos[0]),pe(t,e.boardSettings.startPos[1],e.boardSettings.goalPos[1])],wallCounts:[0,0]}],e.winner="",e.finishReason="",e.lifeCycleStage=1,e.viewIndex=0,mt(e)},pt=(e,t)=>{if(3!==e.lifeCycleStage)return;const n=$e(e);e.moveHistory[n].timeLeft[t]+=60},ft=(e,t)=>{e.winner=0===t?qe:Ve,e.matchScore[t]++,e.finishReason="time",e.lifeCycleStage=4,mt(e)};var yt=function(e){var t=e.grid,n=e.ghostAction,r=e.premoveActions,l=e.lastActions,s=e.tracePos,c=Object(i.a)(e.playerPos,2),m=c[0],d=c[1],u=Object(i.a)(e.goals,2),g=u[0],p=u[1],f=e.handleClick,y=e.creatorToMove,b=e.groundSize,k=e.wallWidth,v=e.menuTheme,w=e.boardTheme,E=e.isDarkModeOn,C=e.tokens,T=!Object(h.useMediaQuery)({query:"(hover: none)"}),S=Object(a.useState)(null),x=Object(i.a)(S,2),P=x[0],D=x[1],R=function(){D(null)},L=function(e){return O(w,e,E)},G="1px solid ".concat(O(v,"container",E)),M=[L("player1"),L("player2")],I=M[0],N=M[1],j=["face","outlet"],B=Object(i.a)(C,2),A=B[0],H=B[1];"default"===A&&(A=j[0]),"default"===H&&(H=j[1]);for(var z=[t.length,t[0].length],_=[],F=0;F<z[0];F++)for(var W=0;W<z[1];W++)_[F*z[1]+W]=[F,W];var q=(z[0]-1)/2,V=(z[1]-1)/2,Y=.8*b,J=L("coord"),$=function(e,t){return!!(t.length>0&&t[0]&&me(e,t[0]))||!!(t.length>1&&t[1]&&me(e,t[1]))};return o.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(".concat(V,", ").concat(b,"px ").concat(k,"px) ").concat(b,"px"),gridTemplateRows:"repeat(".concat(q,", ").concat(b,"px ").concat(k,"px) ").concat(b,"px"),justifyContent:"center",gridArea:"board",MozUserSelect:"none",WebkitUserSelect:"none",msUserSelect:"none",userSelect:"none",alignSelf:"center"}},_.map((function(e){var a,i=[me(e,m),me(e,d)],c=i[0],u=i[1],h=[me(e,g),me(e,p)],k=h[0],v=h[1],w=c||u,C=k||v,S=$(e,[n]),x=$(e,r),O=s&&me(e,s),M=$(e,l),j=S||x,B=S&&y||x&&!y,_=S&&!y||x&&y,F=M&&!y,W=M&&y,q=b>27&&!(w||C||j),V=q&&e[0]===z[0]-1&&e[1]%2===0,U=q&&e[1]===z[1]-1&&e[0]%2===0,Q=V||U,ee=T&&P&&me(e,P),te=ce(e),ne="";if(te===K&&(ne+="waves-effect waves-light"),te===X&&(ne+="waves-effect waves-dark"),te===K)a=L(ee?"hoveredGround":O?"traceGround":C?k&&v?"combinedGoalBackground":"goalBackground".concat(k?"1":"2"):"ground");else if(te===X){var ae=0!==t[e[0]][e[1]];a=L(ae?"wall".concat(t[e[0]][e[1]]):S?"ghostWall".concat(y?"1":"2"):x?"ghostWall".concat(y?"2":"1"):ee?"hoveredWall":"emptyWall")}else a=L("pillar");var oe="center",re="center";Q&&(oe=V?"flex-start":"flex-end",re=V?"flex-end":"flex-start");var le={backgroundColor:a,display:"flex",justifyContent:oe,alignItems:re,position:"relative"};te!==Z&&(le.cursor="pointer"),te===X&&M?le.border="".concat(E?"1":"2","px solid ").concat(L("lastMoveWallBorder")):(0===e[0]&&(le.borderTop=G),e[0]===z[0]-1&&(le.borderBottom=G),0===e[1]&&(le.borderLeft=G),e[1]===z[1]-1&&(le.borderRight=G));var ie="0 0 4px ".concat(L("lastMoveTokenBorder")),se={position:"absolute",height:"90%",width:"90%",top:"5%",left:"5%",cursor:"pointer"};return 0!==e[0]&&e[0]!==z[0]-1||(se.height="95%",0===e[0]?se.top="0":se.top="5%"),0!==e[1]&&e[1]!==z[1]-1||(se.width="95%",0===e[1]?se.left="0":se.left="5%"),o.a.createElement("div",{className:ne,key:"".concat(e[0],"_").concat(e[1]),onMouseEnter:function(){return function(e){D(e)}(e)},onMouseLeave:R,style:le,onClick:te===X&&null!==f?function(){f(e)}:void 0},te===K&&o.a.createElement("div",{style:se,onClick:null!==f?function(){f(e)}:void 0}),c&&o.a.createElement("i",{className:"material-icons",style:{fontSize:"".concat(Y,"px"),color:I,textShadow:F?ie:"none"}},A),u&&o.a.createElement("i",{className:"material-icons",style:{fontSize:"".concat(Y,"px"),color:N,textShadow:W?ie:"none"}},H),te===K&&(B||_)&&o.a.createElement("i",{className:"material-icons ".concat(I,"-text text-lighten-4"),style:{fontSize:"".concat(Y,"px"),color:L("ghost".concat(B?"1":"2"))}},B?A:H),(k||v)&&!w&&!j&&o.a.createElement("i",{className:"material-icons",style:{fontSize:"".concat(Y,"px"),color:L("goalToken")}},k&&A,v&&H),V&&o.a.createElement("div",{style:{color:J,padding:"0",marginLeft:"4px"}},ve(e)),U&&!V&&o.a.createElement("div",{style:{color:J,padding:"0",marginRight:"4px"}},ke(e)))})))},bt=(n(164),n(77)),kt=(n(168),function(e){var t,n=e.icon,a=e.tooltip,r=e.onClick,l=e.modalTitle,i=e.modalBody,s=e.modalConfirmButtonText,c=e.bgColor,m=e.padding,d=e.disabled,u=e.menuTheme,h=e.isDarkModeOn;if(c||(c=O(u,"button",h)),!i)return o.a.createElement(g.Button,{style:{backgroundColor:c},node:"button",waves:"light",icon:o.a.createElement(g.Icon,{className:"large"},n),onClick:r,tooltip:a,disabled:d});t=s&&""!==s?[o.a.createElement(g.Button,{style:{backgroundColor:c,color:"white",marginRight:"1rem"},flat:!0,modal:"close",node:"button",waves:"green",onClick:r},s),o.a.createElement(g.Button,{style:{backgroundColor:c,color:"white"},flat:!0,modal:"close",node:"button",waves:"green"},"Cancel")]:o.a.createElement(g.Button,{style:{backgroundColor:c,color:"white"},flat:!0,modal:"close",node:"button",waves:"green"},"Close");var p=o.a.createElement(g.Button,{style:{padding:"0px ".concat(m,"px"),backgroundColor:c},node:"button",waves:"light",icon:o.a.createElement(g.Icon,{className:"large"},n),tooltip:a,disabled:d});return o.a.createElement(g.Modal,{style:{color:"black",backgroundColor:"white"},bottomSheet:!1,fixedFooter:!1,header:l,open:!1,options:{dismissible:!0,endingTop:"10%",inDuration:250,opacity:.4,outDuration:250,preventScrolling:!0,startingTop:"4%"},trigger:p,actions:t},o.a.createElement("div",null,i))}),vt="spectator",wt="lobby";var Et=function(e){var t,n=e.context,a=e.helpText,r=e.aboutText,l=e.joinCode,i=e.handleLeaveGame,s=e.isLargeScreen,c=e.menuTheme,m=e.isDarkModeOn,d=e.handleToggleDarkMode,u=e.handleToggleTheme;t=n===wt?o.a.createElement("span",null,"WallWars"):n===vt?o.a.createElement("span",{style:{cursor:"pointer"},onClick:i},"WallWars"):o.a.createElement("span",null,s&&o.a.createElement("span",{style:{cursor:"pointer"},onClick:i},"WallWars"),s&&o.a.createElement("span",null,"\xa0"),o.a.createElement(bt.CopyToClipboard,{style:{cursor:"pointer"},text:l,onCopy:function(){return q("Join code copied to clipboard!")}},o.a.createElement("span",null,"Code ",l)));var g=s?20:11,h=O(c,"headerButton",m);return o.a.createElement("div",null,o.a.createElement("div",{style:{height:"50px",display:"grid",gridTemplateRows:"1fr",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"center",backgroundColor:O(c,"header",m)}},o.a.createElement("div",{style:{fontSize:s?"30px":"25px",marginLeft:s?"15px":"5px"}},t),o.a.createElement("div",{style:{height:"auto",display:"grid",padding:"5px",gridTemplateColumns:"repeat(".concat(s?4:3,", 1fr)"),gridTemplateRows:"auto",columnGap:"5px",rowGap:"5px",marginRight:s?"15px":"5px"}},s&&o.a.createElement(kt,{icon:"color_lens",tooltip:"Change theme",onClick:u,bgColor:h,padding:g,menuTheme:c,isDarkModeOn:m}),o.a.createElement(kt,{icon:m?"wb_sunny":"brightness_2",tooltip:m?"Turn off night mode":"Turn on night mode",onClick:d,bgColor:h,padding:g,menuTheme:c,isDarkModeOn:m}),o.a.createElement(kt,{icon:"help",tooltip:"Help",modalTitle:"Help",modalBody:a,bgColor:h,padding:g,menuTheme:c,isDarkModeOn:m}),n===wt&&o.a.createElement(kt,{icon:"info",tooltip:"About",modalTitle:"About",modalBody:r,bgColor:h,padding:g,menuTheme:c,isDarkModeOn:m}),n!==wt&&o.a.createElement(kt,{icon:"home",tooltip:"Leave game",onClick:i,bgColor:h,padding:g,menuTheme:c,isDarkModeOn:m}))))},Ct=function(e){var t=e.title,n=e.body,a=e.acceptButtonText,r=e.rejectButtonText,l=e.isOpen,i=e.callback,s=e.menuTheme,c=e.isDarkModeOn,m=O(s,"button",c);return o.a.createElement(g.Modal,{style:{color:"black",backgroundColor:"#e0e0e0"},header:t,open:l,options:{dismissible:!1,endingTop:"10%",inDuration:250,opacity:.4,outDuration:250,preventScrolling:!0,startingTop:"4%"},actions:[o.a.createElement(g.Button,{style:{backgroundColor:m,color:"white",marginRight:"1rem"},flat:!0,modal:"close",node:"button",waves:"green",onClick:function(){i(!0)}},a||"Accept"),o.a.createElement(g.Button,{style:{backgroundColor:m,color:"white"},flat:!0,modal:"close",node:"button",waves:"green",onClick:function(){i(!1)}},r||"Cancel")]},o.a.createElement("div",null,n))},Tt=function(e){var t,n=e.names,a=e.lifeCycleStage,r=e.winner,l=e.finishReason,i=e.indexToMove,s=e.timeControl,c=e.creatorStarts,m=e.isLargeScreen,d=e.menuTheme,u=e.isDarkModeOn,g=n[i];switch(a){case-2:t="Haven't tried to connect to the server yet";break;case-1:t="Waking the server up...";break;case 0:t="Waiting for player 2 to join";break;case 1:t="".concat(g," starts");break;case 2:case 3:t="".concat(g," to move");break;case 4:t="draw"===r?"The game ended in a draw "+{goal:"by the 1-move rule",agreement:"by agreement"}[l]:"".concat(n["creator"===r?0:1]," won ").concat({time:"on time",goal:"by reaching the goal",resign:"by resignation",abandon:"by abandonment"}[l]);break;default:console.error("stage should be in range [-2..4]")}var h="";return 0===a&&c?h=n[0]:a>0&&(h=n[c?0:1]),o.a.createElement("div",{style:{backgroundColor:O(d,"container",u),display:"grid",gridTemplateColumns:"auto",gridTemplateRows:"1fr 1fr 1fr",alignItems:"center",padding:m?"15px 15px":"5px 15px",gridArea:"status"}},o.a.createElement("div",null,o.a.createElement("p",null,t)),o.a.createElement("div",null,s&&o.a.createElement("p",null,"Time control: ",k(s.duration),"+",k(s.increment))),o.a.createElement("div",null,o.a.createElement("p",null,"First move: "+h)))},St=function(e,t){return o.a.createElement("span",{style:{height:"10px",width:"10px",backgroundColor:e,borderRadius:"50%",display:"inline-block",border:"solid 1px black"},title:t})},xt=function(e,t){return e?St("#67ff36","".concat(t," has the game open")):St("gray","".concat(t," does not have the game page open"))},Pt=function(e){var t=e.lifeCycleStage,n=e.names,a=e.timeLeft,r=e.indexToMove,l=e.isLargeScreen,i=e.scores,s=e.arePlayersPresent,c=e.menuTheme,m=e.boardTheme,d=e.isDarkModeOn,u=[Math.floor(a[0]/60),Math.floor(a[1]/60)],g=u[0],h=u[1],p=a[0]%60,f=a[1]%60,y=["".concat(g,":").concat(p<10?"0":"").concat(p),"".concat(h,":").concat(f<10?"0":"").concat(f)];t<0&&(y[0]="_:__",y[1]="_:__");var b=[!1,!1];t<4&&(b[r]=!0);var k=[!1,!1];3===t&&(0===r?a[0]<15&&(k[0]=!0):1===r&&a[1]<15&&(k[1]=!0));var v,w=0!==i[0]||0!==i[1],E=l?"18px":"14px",C={padding:v=l&&!w?"15px":l&&w?"12px":l||w?"6px":"8px",fontSize:E},T=[O(m,"timer1",d),O(m,"timer2",d),O(c,"container",d),O(m,"lowTime",d)],S=T[0],x=T[1],P=T[2],D=T[3];return o.a.createElement("div",{style:{backgroundColor:O(c,"container",d),display:"grid",gridTemplateColumns:w?"0.5fr 1.7fr 0.2fr 1fr 1fr 0.2fr 1.7fr 0.5fr":"1.7fr 0.2fr 1fr 1fr 0.2fr 1.7fr",gridTemplateRows:"auto",alignContent:"center",columnGap:v,padding:v,gridArea:"timer"}},w&&o.a.createElement("div",{style:C,className:"center"},i[0]),o.a.createElement("div",{style:{padding:v,fontSize:E,backgroundColor:b[0]?S:P},className:"center truncate"+(b[0]?" z-depth-2":"")},n[0]),o.a.createElement("div",{style:C,className:"center"},xt(s[0],n[0])),o.a.createElement("div",{style:{padding:v,fontSize:E,backgroundColor:k[0]?D:P},className:"center"+(k[0]?" z-depth-2":"")},y[0]),o.a.createElement("div",{style:{padding:v,fontSize:E,backgroundColor:k[1]?D:P},className:"center"+(k[1]?" z-depth-2":"")},y[1]),o.a.createElement("div",{style:C,className:"center"},xt(s[1],n[1])),o.a.createElement("div",{style:{padding:v,fontSize:E,backgroundColor:b[1]?x:P},className:"center truncate"+(b[1]?" z-depth-2":"")},null===n[1]?"______":n[1]),w&&o.a.createElement("div",{style:C,className:"center"},i[1]))},Dt=o.a.createElement("div",null,o.a.createElement("h6",null,'To connect with your friend, share the game code in the top header with them and tell them to use it when clicking "Join Game" from the lobby. Click on the code to copy it to the clipboard.'),o.a.createElement("h6",null,"Rules of the game:"),o.a.createElement("h6",null,"The player who creates the game starts at the top left corner (color red). The player who joins the game starts at the top right (color blue). The goal of each player is to reach the ",o.a.createElement("em",null,"opposite")," corner from where they start. The player who gets there first wins."),o.a.createElement("h6",null,"Players move by clicking cells on the board. There are two types of cells: ground cells (the big squares) and walls (the thin rectangles in between ground cells). Each move consists of a total of two actions. One action can be building one wall or moving to an adjacent cell. A diagonal move counts as two actions."),o.a.createElement("h6",null,"Players can build walls to obstruct the opponent. Walls can be built anywhere as long as there always exists at least one way to get to their goal. You cannot go through your own walls either."),o.a.createElement("h6",null,"The remaining time for each player is shown next to their name. The clock of a player ticks down when it is their turn (after each player has moved once). The player who starts is chosen randomly. The name of the player to move next is highlighted with their color."),o.a.createElement("h6",null,"If it is your turn and you do a single action, like building a wall or moving to an adjacent cell, you can undo it by clicking the wall again or clicking a different ground cell, respectively. Once you choose 2 actions, the move becomes permanent."),o.a.createElement("h6",null,"During the opponent's turn, you can ",o.a.createElement("em",null,"premove"),", meaning choose a move that will be applied instantaneously when it is your turn."),o.a.createElement("h6",null,"Starter handicap rule: If the player who moved first reaches the goal first but the other player is at distance 1 or 2 from their goal, the game ends in a draw."),o.a.createElement("h6",null,"If you leave the game, you will be able to reenter this game as long as you don't create or join a new game.")),Ot=function(e){return 0===e.index?"_______":function(e){if(1===e.length)return we(e[0]);const[t,n]=e;return ce(t)===K||ce(t)!==K||t[1]<n[1]||t[1]===n[1]&&t[0]>n[0]?we(t)+" "+we(n):we(n)+" "+we(t)}(e.actions)},Rt={paddingTop:"0.15rem",paddingBottom:"0.15rem",borderRadius:"0"},Lt=function(e){var t=e.moveHistory,n=e.creatorStarts,a=e.handleViewMove,r=e.viewIndex,l=e.height,i=e.menuTheme,s=e.boardTheme,c=e.isDarkModeOn,m=!Object(h.useMediaQuery)({query:"(hover: none)"}),d=[O(s,"move1",c),O(s,"move2",c),O(i,"container",c),O(s,"currentMove",c)],u=d[0],p=d[1],f=d[2],y=d[3],b={position:"sticky",top:"0px",paddingTop:"0.15rem",paddingBottom:"0.15rem",borderRadius:"0",backgroundColor:f};return o.a.createElement("div",{id:"movehistory",className:"center",style:{overflowY:"scroll",display:"block",height:l,MozUserSelect:"none",WebkitUserSelect:"none",msUserSelect:"none",userSelect:"none"}},o.a.createElement(g.Table,{centered:!0,style:{width:"100%"}},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{style:b},"#"),o.a.createElement("th",{style:b},"Move"),o.a.createElement("th",{style:b},"Distance"),o.a.createElement("th",{style:b},"# Walls"))),o.a.createElement("tbody",null,t.map((function(e,l){var i;if(r===l&&l<t.length-1)i=y;else if(0===l)i=f;else{i=1===1+(l+(n?1:0))%2?u:p}return o.a.createElement("tr",{onClick:function(){return a(l)},style:{cursor:"pointer",backgroundColor:i},className:m?Ge.a.hoveredMode:void 0,key:l},o.a.createElement("td",{style:Rt},l),o.a.createElement("td",{style:Rt},Ot(e)),o.a.createElement("td",{style:Rt},e.distances[0]+" - "+e.distances[1]),o.a.createElement("td",{style:Rt},e.wallCounts[0]+" - "+e.wallCounts[1]))})))))},Gt=function(e){var t=e.lifeCycleStage,n=e.handleResign,a=e.handleOfferDraw,r=e.handleRequestTakeback,l=e.handleGiveExtraTime,i=e.moveHistory,s=e.clientRole,c=e.creatorStarts,m=e.handleViewMove,d=e.viewIndex,u=e.turnCount,g=e.handleSeeFirstMove,h=e.handleSeePreviousMove,p=e.handleSeeNextMove,f=e.handleSeeLastMove,y=e.handleToggleVolume,b=e.isVolumeOn,k=e.handleLeaveGame,v=e.handleIncreaseBoardSize,w=e.handleDecreaseBoardSize,E=e.zoomLevel,C=e.controlPanelHeight,T=e.isOpponentPresent,S=e.menuTheme,x=e.boardTheme,P=e.isDarkModeOn,D=C-108-15-10,R=3===t||2===t&&c===("creator"===s),L="spectator"===s;return o.a.createElement("div",{style:{backgroundColor:O(S,"container",P),width:"100%",height:"auto",display:"grid",padding:"".concat(5,"px"),gridTemplateColumns:"repeat(4, 1fr)",gridTemplateRows:"".concat(36,"px 1fr ").concat(36,"px ").concat(36,"px"),columnGap:"".concat(5,"px"),rowGap:"".concat(5,"px"),gridArea:"panel"}},o.a.createElement(kt,{icon:"flag",tooltip:"Resign",modalTitle:"Resign",modalBody:"Are you sure you want to resign?",modalConfirmButtonText:"Resign",onClick:n,disabled:L||3!==t,menuTheme:S,isDarkModeOn:P}),o.a.createElement(kt,{icon:"local_florist",tooltip:"Offer Draw",modalTitle:"Offer Draw",modalBody:"Are you sure you want to offer a draw?",modalConfirmButtonText:"Offer draw",onClick:a,disabled:L||!T||3!==t,menuTheme:S,isDarkModeOn:P}),o.a.createElement(kt,{icon:"replay",tooltip:"Request takeback",onClick:function(){q("A takeback request was sent to the opponent.",5e3),r()},disabled:L||!T||!R,menuTheme:S,isDarkModeOn:P}),o.a.createElement(kt,{icon:"add_alarm",tooltip:"Give 60 seconds",onClick:function(){q("You added 60s to the opponent's clock.",5e3),l()},disabled:L||3!==t,menuTheme:S,isDarkModeOn:P}),o.a.createElement("div",{style:{gridColumnStart:"1",gridColumnEnd:"5"}},o.a.createElement(Lt,{moveHistory:i,creatorStarts:c,handleViewMove:m,viewIndex:d,height:D,menuTheme:S,boardTheme:x,isDarkModeOn:P})),o.a.createElement(kt,{icon:"fast_rewind",onClick:g,disabled:t<=1||0===d,menuTheme:S,isDarkModeOn:P}),o.a.createElement(kt,{icon:"navigate_before",onClick:h,disabled:t<=1||0===d,menuTheme:S,isDarkModeOn:P}),o.a.createElement(kt,{icon:"navigate_next",onClick:p,disabled:t<=1||d===u,menuTheme:S,isDarkModeOn:P}),o.a.createElement(kt,{icon:"fast_forward",onClick:f,disabled:t<=1||d===u,menuTheme:S,isDarkModeOn:P}),o.a.createElement(kt,{icon:b?"volume_up":"volume_off",tooltip:b?"Turn off sound effects":"Turn on sound effects",onClick:y,disabled:L,menuTheme:S,isDarkModeOn:P}),o.a.createElement(kt,{icon:"zoom_out",tooltip:"Decrease board size",onClick:w,disabled:0===E,menuTheme:S,isDarkModeOn:P}),o.a.createElement(kt,{icon:"zoom_in",tooltip:"Increase board size",onClick:v,disabled:10===E,menuTheme:S,isDarkModeOn:P}),o.a.createElement(kt,{icon:"home",tooltip:"Return to lobby",onClick:k,menuTheme:S,isDarkModeOn:P}))};const Mt=new _e.a(We.a);var It=({socket:e,clientParams:t,isLargeScreen:n,boardTheme:r,handleReturnToLobby:l,handleToggleDarkMode:i,handleToggleTheme:s,handleSetCookieId:c})=>{const m=t.menuTheme,d=t.isDarkModeOn,[u,h]=Object(f.a)(["isVolumeOn","zoomLevel"]),[p,b]=Object(y.a)((e=>{const t={joinCode:null,timeControl:null,names:[null,null],tokens:["default","default"],matchScore:[0,0],opponentAbandoned:!1,arePlayersPresent:[!1,!1],creatorStarts:null,winner:"",finishReason:"",lifeCycleStage:-2,moveHistory:[{index:0,actions:[],grid:de(A.dims),playerPos:A.startPos,timeLeft:[null,null],distances:ie(A),wallCounts:[0,0]}],clientRole:null,moveToSend:null,ghostAction:null,premoveActions:[],isVolumeOn:!1,shouldPlaySound:!1,isKeyPressed:!1,viewIndex:0,zoomLevel:5,waitingForPing:0,showDrawDialog:!1,showTakebackDialog:!1,showRematchDialog:!1,boardSettings:A};return tt(t,e),t})(u));Object(a.useEffect)(()=>(e.once("gameCreated",({joinCode:e,creatorStarts:t,cookieId:n})=>{c(n),b(n=>{ot(n,e,t)})}),e.once("gameJoined",({creatorName:e,creatorToken:t,timeControl:n,boardSettings:a,creatorStarts:o,cookieId:r,creatorPresent:l})=>{c(r),b(r=>{rt(r,e,t,n,a,o,l)})}),e.once("requestedGame",({game:e})=>{b(t=>{((e,t)=>{nt(e,t.timeControl,t.boardSettings,t.playerNames[0],t.playerTokens[0]),ot(e,t.joinCode,t.creatorStarts),lt(e,t.playerNames[1],t.playerTokens[1]);for(let n=0;n<t.moveHistory.length;n++){const a=t.moveHistory[n].actions,o=t.moveHistory[n].remainingTime;it(e,a,o,n+1)}e.clientRole=Ye,e.matchScore=t.matchScore,e.winner=t.winner,e.finishReason=t.finishReason,e.lifeCycleStage=4})(t,e)})}),e.on("returnedToOngoingGame",({ongoingGame:e,timeLeft:n})=>{b(a=>{((e,t,n,a)=>{if(e.timeControl)return;(t===n.cookieIds[0]?qe:Ve)===qe?(nt(e,n.timeControl,n.boardSettings,n.playerNames[0],n.playerTokens[0]),ot(e,n.joinCode,n.creatorStarts),lt(e,n.playerNames[1],n.playerTokens[1])):(at(e,n.joinCode,n.playerNames[1],n.playerTokens[1]),rt(e,n.playerNames[0],n.playerTokens[0],n.timeControl,n.boardSettings,n.creatorStarts,!0)),e.arePlayersPresent=n.arePlayersPresent;for(let r=0;r<n.moveHistory.length;r++){const t=n.moveHistory[r].actions,a=n.moveHistory[r].remainingTime;it(e,t,a,r+1)}e.matchScore=n.matchScore,e.winner=n.winner,e.finishReason=n.finishReason;const o=$e(e);e.moveHistory[o].timeLeft=a,""!==n.winner?e.lifeCycleStage=4:0===a[0]?ft(e,1):0===a[1]&&ft(e,0)})(a,t.cookieId,e,n),a.waitingForPing=0})}),e.on("opponentReturned",()=>{b(e=>{e.arePlayersPresent[e.clientRole===qe?1:0]=!0,e.waitingForPing=0})}),e.on("ongoingGameNotFound",()=>{q("Couldn't find the game anymore.",5e3),l()}),e.on("gameJoinFailed",()=>{q("There is no game with this code waiting for someone to join.",5e3),l()}),e.on("joinSelfGameFailed",()=>{q("You cannot play against yourself. To play as both sides from the same browser, play one of the sides from an Incognito window.",12e3),l()}),e.on("gameNotFoundError",()=>{q("There was an issue on the server and we couldn't reach the other player.",5e3),b(e=>{e.waitingForPing=0})}),e.once("joinerJoined",({joinerName:e,joinerToken:t})=>{b(n=>{1!==n.lifeCycleStage&&(n.shouldPlaySound=!0,lt(n,e,t),n.arePlayersPresent[1]=!0,n.waitingForPing=0)})}),e.on("drawOffered",()=>{b(e=>{e.showDrawDialog=!0,e.waitingForPing=0})}),e.on("drawRejected",()=>{q("The opponent declined the draw offer.",5e3),b(e=>{e.waitingForPing=0})}),e.on("drawAccepted",()=>{q("The opponent accepted the draw offer.",5e3),b(e=>{dt(e,"agreement"),e.waitingForPing=0})}),e.on("takebackRequested",()=>{b(e=>{e.showTakebackDialog=!0,e.waitingForPing=0})}),e.on("takebackRejected",()=>{q("The opponent declined the takeback request.",5e3),b(e=>{e.waitingForPing=0})}),e.on("takebackAccepted",()=>{q("The opponent agreed to the takeback.",5e3),b(e=>{const t=e.clientRole===qe;gt(e,t),e.waitingForPing=0})}),e.on("rematchOffered",()=>{b(e=>{e.showRematchDialog=!0,e.waitingForPing=0})}),e.on("rematchRejected",()=>{q("The opponent declined the rematch offer.",5e3),b(e=>{e.waitingForPing=0})}),e.on("rematchAccepted",()=>{q("The opponent accepted the rematch offer.",5e3),b(e=>{e.shouldPlaySound=!0,ht(e),e.waitingForPing=0})}),e.on("extraTimeReceived",()=>{q("The opponent added 60s to your clock.",5e3),b(e=>{const t=e.clientRole===qe?0:1;pt(e,t),e.waitingForPing=0})}),e.on("resigned",()=>{q("The opponent resigned.",5e3),b(e=>{e.shouldPlaySound=!0;const t=e.clientRole!==qe;ut(e,t),e.waitingForPing=0})}),e.on("moved",({actions:e,moveIndex:t,remainingTime:n})=>{b(a=>{a.shouldPlaySound=!0,it(a,e,n,t),a.waitingForPing=0})}),e.on("leftGame",()=>{b(e=>{e.arePlayersPresent[e.clientRole===qe?1:0]=!1,e.waitingForPing=0})}),e.on("abandonedGame",()=>{q("The opponent abandoned the game.",5e3),b(e=>{((e,t)=>{4!==e.lifeCycleStage&&(e.lifeCycleStage=4,e.winner=t?Ve:qe,e.matchScore[t?1:0]++,e.finishReason="abandon",mt(e))})(e,e.clientRole!==qe),e.waitingForPing=0})}),e.on("pongFromServer",()=>{b(e=>{e.waitingForPing=0})}),()=>{e.removeAllListeners()}),[e,b,l,c,t.cookieId]),Object(a.useEffect)(()=>{-2===p.lifeCycleStage&&(t.clientRole===qe?(b(e=>{nt(e,t.timeControl,t.boardSettings,t.playerName,t.token),e.arePlayersPresent[0]=!0}),e.emit("createGame",{name:t.playerName,token:t.token,timeControl:t.timeControl,boardSettings:t.boardSettings,cookieId:t.cookieId,isPublic:t.isPublic})):t.clientRole===Ve?(b(e=>{at(e,t.joinCode,t.playerName,t.token),e.arePlayersPresent[1]=!0}),e.emit("joinGame",{joinCode:t.joinCode,name:t.playerName,token:t.token,cookieId:t.cookieId})):t.clientRole===Ye?e.emit("getGame",{gameId:t.watchGameId}):t.clientRole===Je?e.emit("returnToOngoingGame",{cookieId:t.cookieId}):console.error("unknown client role",t.clientRole))});const k=()=>{e.emit("leaveGame"),l()};Object(a.useEffect)(()=>{p.isVolumeOn&&p.shouldPlaySound&&(Mt.play(),b(e=>{e.shouldPlaySound=!1}))},[b,p.isVolumeOn,p.shouldPlaySound]),Object(a.useEffect)(()=>{const e=setInterval(()=>{b(e=>{(e=>{if(3!==e.lifeCycleStage)return;const t=Ke(e),n=$e(e);e.moveHistory[n].timeLeft[t]--,0===e.moveHistory[n].timeLeft[t]&&(e.shouldPlaySound=!0,ft(e,0===t?1:0))})(e)})},1e3);return()=>clearInterval(e)},[b]),Object(a.useEffect)(()=>{const t=setInterval(()=>{3===p.lifeCycleStage&&(1===p.waitingForPing?e.emit("pingServer"):2===p.waitingForPing&&q("The server is not responding. The game is probably lost. Sorry for the inconvenience.",8e3),b(e=>{e.waitingForPing=(e.waitingForPing+1)%3}))},5e3);return()=>clearInterval(t)},[e,p.lifeCycleStage,p.waitingForPing,b]);const v=e=>{b(t=>{const n=Ue(t)===(t.clientRole===qe);st(t,e,n)})};Object(a.useEffect)(()=>{p.moveToSend&&(e.emit("move",p.moveToSend),b(e=>{e.moveToSend=null}))}),Object(a.useEffect)(()=>{p.clientRole!==Ye&&("goal"===p.finishReason&&e.emit("playerReachedGoal",{winner:p.winner}),"time"===p.finishReason&&e.emit("playerWonOnTime",{winner:p.winner}))},[e,p.clientRole,p.winner,p.finishReason]);Object(a.useEffect)(()=>(window.addEventListener("keydown",w),window.addEventListener("keyup",E),()=>{window.removeEventListener("keydown",w),window.removeEventListener("keyup",E)}));const w=({key:e})=>{if(p.isKeyPressed)return;if(b(e=>{e.isKeyPressed=!0}),"m"===e)return void T();if(p.viewIndex<$e(p)||4===p.lifeCycleStage)return void("ArrowDown"===e||"ArrowRight"===e?p.viewIndex<$e(p)&&b(e=>{e.viewIndex++}):"ArrowUp"!==e&&"ArrowLeft"!==e||p.viewIndex>0&&b(e=>{e.viewIndex--}));let t;if(p.ghostAction&&Xe(p.ghostAction)===K)t=p.ghostAction;else{const e=$e(p);t=p.moveHistory[e].playerPos[Ke(p)]}if("ArrowDown"===e)t=[t[0]+2,t[1]];else if("ArrowUp"===e)t=[t[0]-2,t[1]];else if("ArrowLeft"===e)t=[t[0],t[1]-2];else{if("ArrowRight"!==e)return;t=[t[0],t[1]+2]}v(t)},E=()=>{b(e=>{e.isKeyPressed=!1})},C=e=>{e<0||e>$e(p)||b(t=>{t.viewIndex!==e&&(e>$e(t)||(t.viewIndex=e,t.ghostAction=null,t.premoveActions=[]))})};Object(a.useEffect)(()=>{const e=document.getElementById("movehistory");e.scrollTop=e.scrollHeight},[p.moveHistory.length]);const T=()=>{h("isVolumeOn",p.isVolumeOn?"false":"true",{path:"/"}),b(e=>{e.isVolumeOn=!e.isVolumeOn})},S=e=>{e.preventDefault(),k()};let x,P;if(Object(a.useEffect)(()=>(window.history.pushState(null,null,window.location.pathname),window.addEventListener("popstate",S),()=>window.removeEventListener("popstate",S))),4===p.lifeCycleStage)[x,P]=p.moveHistory[p.viewIndex].timeLeft;else{const e=$e(p);[x,P]=p.moveHistory[e].timeLeft}let[D,R]=n?[z,_]:[F,W];const L=Math.pow(1.1,p.zoomLevel-5),G=D*L,M=R*L,I=D/R,N=(H[0]+1)/2,j=(H[1]+1)/2,B=(H[0]-1)/2,V=(H[1]-1)/2,Y=(p.boardSettings.dims[0]+1)/2,J=(p.boardSettings.dims[1]+1)/2,$=(p.boardSettings.dims[0]-1)/2,U=(p.boardSettings.dims[1]-1)/2,Q=M*V+G*j,X=(M*B+G*N)/(Y+$/I),Z=Q/(J+U/I),ee=Math.min(X,Z),te=ee/I,ne=te*$+ee*Y,ae=te*U+ee*J,oe=n?15:6,re=Math.max(ne,360);let le,se,ce;if(n){ce="'timer status' 'board panel'",le=`${100}px ${re}px`,se=Math.max(ae,560)+"px 360px"}else{ce="'timer' 'board' 'status' 'panel'",le=`${50}px ${ne}px ${80}px ${re}px`,se=Q+"px"}const ue=p.moveHistory[p.viewIndex].playerPos,ge=(e=>{if(0===e.viewIndex)return null;const t=Qe(e)?1:0,n=e.moveHistory[e.viewIndex].playerPos[t];let a;return a=e.viewIndex<=2?e.boardSettings.startPos[t]:e.moveHistory[e.viewIndex-2].playerPos[t],me(a,n)?null:a})(p),he=p.viewIndex>0?p.moveHistory[p.viewIndex].actions:[];return o.a.createElement("div",null,o.a.createElement(Et,{context:p.clientRole===Ye?"spectator":"player",joinCode:p.joinCode,helpText:Dt,handleLeaveGame:k,isLargeScreen:n,menuTheme:m,isDarkModeOn:d,handleToggleDarkMode:i,handleToggleTheme:s}),o.a.createElement("div",{style:{display:"grid",gridTemplateRows:le,gridTemplateColumns:se,gridTemplateAreas:ce,columnGap:oe+"px",rowGap:oe+"px",margin:oe+"px",justifyContent:"center",alignContent:"center"}},o.a.createElement(Pt,{lifeCycleStage:p.lifeCycleStage,names:p.names,indexToMove:Ke(p),timeLeft:[x,P],isLargeScreen:n,scores:p.matchScore,arePlayersPresent:p.arePlayersPresent,menuTheme:m,boardTheme:r,isDarkModeOn:d}),o.a.createElement(Tt,{lifeCycleStage:p.lifeCycleStage,names:p.names,indexToMove:Ke(p),winner:p.winner,finishReason:p.finishReason,timeControl:p.timeControl,creatorStarts:p.creatorStarts,isLargeScreen:n,menuTheme:m,isDarkModeOn:d}),o.a.createElement(yt,{creatorToMove:Qe(p),grid:p.moveHistory[p.viewIndex].grid,playerPos:ue,goals:p.boardSettings.goalPos,ghostAction:p.ghostAction,premoveActions:p.premoveActions,lastActions:he,tracePos:ge,handleClick:e=>v(e),groundSize:ee,wallWidth:te,menuTheme:m,boardTheme:r,isDarkModeOn:d,tokens:p.tokens}),o.a.createElement(Gt,{lifeCycleStage:p.lifeCycleStage,handleResign:()=>{e.emit("resign"),b(e=>{ut(e,e.clientRole===qe)})},handleOfferDraw:()=>{e.emit("offerDraw")},handleRequestTakeback:()=>{e.emit("requestTakeback")},handleGiveExtraTime:()=>{e.emit("giveExtraTime"),b(e=>{const t=e.clientRole===qe?1:0;pt(e,t)})},moveHistory:p.moveHistory,clientRole:p.clientRole,creatorStarts:p.creatorStarts,handleViewMove:C,viewIndex:p.viewIndex,turnCount:$e(p),handleSeeFirstMove:()=>{C(0);document.getElementById("movehistory").scrollTop=0},handleSeePreviousMove:()=>C(p.viewIndex-1),handleSeeNextMove:()=>C(p.viewIndex+1),handleSeeLastMove:()=>{C($e(p));const e=document.getElementById("movehistory");e.scrollTop=e.scrollHeight},handleToggleVolume:T,isVolumeOn:p.isVolumeOn,handleLeaveGame:k,menuTheme:m,boardTheme:r,isDarkModeOn:d,handleIncreaseBoardSize:()=>{p.zoomLevel<10&&h("zoomLevel",p.zoomLevel+1,{path:"/"}),b(e=>{e.zoomLevel<10&&e.zoomLevel++})},handleDecreaseBoardSize:()=>{p.zoomLevel>0&&h("zoomLevel",p.zoomLevel-1,{path:"/"}),b(e=>{e.zoomLevel>0&&e.zoomLevel--})},zoomLevel:p.zoomLevel,controlPanelHeight:re,isOpponentPresent:Ze(p)})),4===p.lifeCycleStage&&p.clientRole!==Ye&&o.a.createElement(g.Row,{className:"valign-wrapper",style:{marginTop:"1rem"}},o.a.createElement(g.Col,{className:"center",s:12},o.a.createElement(g.Button,{large:!0,style:{backgroundColor:O(m,"importantButton",d)},node:"button",waves:"light",onClick:()=>{q("Rematch offer sent.",5e3),e.emit("offerRematch")},disabled:!Ze(p)},"Rematch"))),o.a.createElement("div",{style:{height:"100%"}}),o.a.createElement(Ct,{isOpen:p.showDrawDialog,title:"Draw offer received",body:"The opponent offered a draw.",acceptButtonText:"Accept",rejectButtonText:"Decline",callback:t=>{t?(e.emit("acceptDraw"),b(e=>{dt(e,"agreement")})):(e.emit("rejectDraw"),b(e=>{e.showDrawDialog=!1}))},menuTheme:m,isDarkModeOn:d}),o.a.createElement(Ct,{isOpen:p.showRematchDialog,title:"Rematch offer received",body:"The opponent would like a rematch.",acceptButtonText:"Accept",rejectButtonText:"Decline",callback:t=>{t?(e.emit("acceptRematch"),b(e=>{ht(e)})):(e.emit("rejectRematch"),b(e=>{e.showRematchDialog=!1}))},menuTheme:m,isDarkModeOn:d}),o.a.createElement(Ct,{isOpen:p.showTakebackDialog,title:"Takeback request received",body:"The opponent requested a takeback. If you accept, their last move will be undone.",acceptButtonText:"Accept",rejectButtonText:"Decline",callback:t=>{t?(q("The last move played on the board has been undone.",5e3),e.emit("acceptTakeback"),b(e=>{const t=e.clientRole===Ve;gt(e,t)})):(e.emit("rejectTakeback"),b(e=>{e.showTakebackDialog=!1}))},menuTheme:m,isDarkModeOn:d}))},Nt=function(e){return e.nextMove%2===(e.game.creatorStarts?0:1)},jt=function(e){var t=e.socket,n=e.isLargeScreen,r=e.menuTheme,l=e.boardTheme,s=e.isDarkModeOn,c=e.handleViewGame,m=Object(y.a)({needToRequestGame:!0,finishedGameWait:3,game:null,nextMove:0,grid:de(A.dims),playerPos:A.startPos,prevPos:[null,null]}),d=Object(i.a)(m,2),u=d[0],g=d[1];Object(a.useEffect)((function(){var e=setInterval((function(){if(u.needToRequestGame)return g((function(e){e.needToRequestGame=!1})),void t.emit("getRandomGame");u.game&&(u.game.moveHistory?u.nextMove!==u.game.moveHistory.length?g((function(e){if(e.game&&e.game.moveHistory&&e.nextMove!==e.game.moveHistory.length){for(var t=Nt(e)?0:1,n=e.game.moveHistory[e.nextMove].actions,a=0;a<n.length;a++){var o=n[a];ce(o)===K?(e.prevPos[t]=e.playerPos[t],e.playerPos[t]=o):e.grid[o[0]][o[1]]=t+1}e.nextMove++}})):g((function(e){e.finishedGameWait>0?e.finishedGameWait--:(e.needToRequestGame=!0,e.finishedGameWait=3)})):console.error("game does not have a move history"))}),200);return function(){return clearInterval(e)}})),Object(a.useEffect)((function(){return t.on("requestedRandomGame",(function(e){var t=e.game;g((function(e){e.game=t,e.grid=de(t.boardSettings.dims),e.playerPos=t.boardSettings.startPos,e.prevPos=[null,null],e.nextMove=0}))})),function(){t.off("requestedRandomGame")}}),[t,g,u.needToRequestGame]);var h=n?z:F,p=n?_:W,f=[];u.nextMove>0&&(f=u.game.moveHistory[u.nextMove-1].actions);var b=u.game&&Nt(u),k=null;return 1!==f.length&&(2!==f.length||ce(f[0])!==K&&ce(f[1])!==K)||(k=b?u.prevPos[1]:u.prevPos[0]),o.a.createElement(yt,{grid:u.grid,playerPos:u.playerPos,goals:u.game?u.game.boardSettings.goalPos:A.goalPos,ghostAction:null,creatorToMove:b,premoveActions:[],lastActions:f,tracePos:k,handleClick:function(){u.game&&c(u.game._id)},groundSize:h,wallWidth:p,menuTheme:r,boardTheme:l,isDarkModeOn:s,tokens:u.game?u.game.playerTokens:["default","default"]})};var Bt=({socket:e})=>{const[t,n]=Object(f.a)(["isDarkModeOn","menuTheme","token","playerName","duration","increment","numRows","numCols","cookieId","isPublic"]),[r,l]=Object(y.a)((e=>{let t=parseFloat(e.numRows);t=isNaN(t)?A.dims[0]:t;let n=parseFloat(e.numCols);return n=isNaN(n)?A.dims[1]:n,{playerName:e.playerName||w(9),token:e.token||"default",timeControl:{duration:e.duration||"5",increment:e.increment||"5"},boardSettings:{dims:[t,n],startPos:N([t,n]),goalPos:j([t,n])},joinCode:"",clientRole:"",watchGameId:null,cookieId:e.cookieId?e.cookieId:"undefined",isPublic:!(!e.isPublic||"true"!==e.isPublic),isGamePageOpen:!1,hasOngoingGame:!1,isDarkModeOn:!(!e.isDarkModeOn||"true"!==e.isDarkModeOn),menuTheme:e.menuTheme&&"green"===e.menuTheme?"green":"blue",recentGames:{games:[],numGamesToRequest:16},showMoreOptions:!1,ranking:{playerList:[],needToRequestRanking:!0}}})(t)),i=()=>{const e="green"===r.menuTheme?"blue":"green";l(t=>{t.menuTheme=e}),n("menuTheme",e,{path:"/"})},s=()=>{const e=!r.isDarkModeOn;l(t=>{t.isDarkModeOn=e}),n("isDarkModeOn",e?"true":"false",{path:"/"})},c=e=>{l(t=>{t.cookieId=e}),n("cookieId",e,{path:"/"})},m=e=>{l(t=>{t.clientRole="spectator",t.watchGameId=e,t.hasOngoingGame=!1,t.isGamePageOpen=!0})},d=()=>{let e=r.playerName;return""===e?e="Anon":n("playerName",e,{path:"/"}),e},u=()=>{let e=parseFloat(r.timeControl.duration);return isNaN(e)?(e=5,q("Invalid duration, using 5m instead",5e3)):e<.1?(e=5/60,q("Duration too short, using 5s instead",5e3)):e>120?(e=120,q("Duration too long, using 2h instead",5e3)):n("duration",e,{path:"/"}),e},b=()=>{let e=parseFloat(r.timeControl.increment);return isNaN(e)||e<0?(e=0,q("Invalid increment, using 0s instead",5e3)):e>300?(e=300,q("Increment too large, using 5m instead",5e3)):n("increment",e,{path:"/"}),e},k=()=>{const e=r.boardSettings,t=ie(e);return t[0]<=2||t[1]<=2?(q("The goal is too close to the player, using default board instead",5e3),A):(n("numRows",r.boardSettings.dims[0],{path:"/"}),n("numCols",r.boardSettings.dims[1],{path:"/"}),e)};Object(a.useEffect)(()=>{!t.cookieId||"undefined"===t.cookieId||r.hasOngoingGame||r.isGamePageOpen||e.emit("checkHasOngoingGame",{cookieId:t.cookieId})},[e,t.cookieId,r.hasOngoingGame,r.isGamePageOpen]),Object(a.useEffect)(()=>{e.on("respondHasOngoingGame",({res:e})=>{l(t=>{t.isGamePageOpen||(t.hasOngoingGame=e)})})}),Object(a.useEffect)(()=>{document.body.style.backgroundColor=O(r.menuTheme,"background",r.isDarkModeOn),"blue"===r.menuTheme?document.body.style.backgroundImage=`url('${r.isDarkModeOn?L.a:M.a}')`:document.body.style.backgroundImage="none"},[r.isDarkModeOn,r.menuTheme]),Object(a.useEffect)(()=>{r.ranking.needToRequestRanking&&e.emit("getRanking",{count:100})},[e,l,r.ranking.needToRequestRanking]),Object(a.useEffect)(()=>{e.once("requestedRanking",({ranking:e})=>{l(t=>{t.ranking.playerList=e,t.ranking.needToRequestRanking=!1})})},[e,l,r.ranking.playerList]),Object(a.useEffect)(()=>{const t=r.recentGames.numGamesToRequest;t>0&&t<100&&e.emit("getRecentGames",{count:t})},[e,l,r.recentGames.numGamesToRequest]),Object(a.useEffect)(()=>{e.once("requestedRecentGames",({games:e})=>{l(t=>{t.recentGames.games=e,t.recentGames.numGamesToRequest=2*e.length})})},[e,l,r.recentGames.games]);const v=Object(h.useMediaQuery)({query:"(min-width: 1300px)"}),E=Object(h.useMediaQuery)({query:"(min-width: 990px)"});let[C,T]=E?[z,_]:[F,W];const[S,x]=((e,t,n)=>[oe(e,t,n),re(e,t,n)])(H,C,T),P=E?15:6,D=S+40;let R,G,I;v?(R="'showcaseArea tabsArea'",G=D+"px",I=`${x}px ${x}px`):(R="'showcaseArea' 'tabsArea'",G=`${D}px ${D}px`,I=x+"px");const B={display:"grid",gridTemplateRows:G,gridTemplateColumns:I,gridTemplateAreas:R,columnGap:2*P+"px",rowGap:P+"px",margin:P+"px",justifyContent:"center",alignContent:"center"},V=D+"px",Y=1.5*x+"px",J=o.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",alignSelf:"center",justifySelf:"center",fontSize:"20px",paddingBottom:P,height:40},title:"Ranking based on ELO points."},"ELO Ranking"),$=o.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",alignSelf:"center",justifySelf:"center",fontSize:"20px",paddingBottom:P,height:40},title:"Random games already played"},"Game Showcase"),U=o.a.createElement(g.Button,{large:!0,style:{backgroundColor:O(r.menuTheme,"importantButton",r.isDarkModeOn)},node:"button",waves:"light",onClick:()=>{l(e=>{e.clientRole="returner",e.cookieId=t.cookieId,e.hasOngoingGame=!1,e.isGamePageOpen=!0})}},"Return to game");return o.a.createElement("div",{style:{paddingBottom:"2rem"}},o.a.createElement(p.b,null),r.isGamePageOpen&&o.a.createElement(It,{socket:e,clientParams:r,isLargeScreen:E,boardTheme:"monochromeBoard",handleReturnToLobby:()=>{l(e=>{e.hasOngoingGame=!1,e.isGamePageOpen=!1,e.recentGames.numGamesToRequest=16,e.ranking.needToRequestRanking=!0,e.clientRole="",e.joinCode=""})},handleToggleDarkMode:s,handleToggleTheme:i,handleSetCookieId:c}),!r.isGamePageOpen&&o.a.createElement("div",null,o.a.createElement(Et,{context:"lobby",isLargeScreen:E,menuTheme:r.menuTheme,isDarkModeOn:r.isDarkModeOn,helpText:Te,aboutText:Se,handleToggleDarkMode:s,handleToggleTheme:i}),o.a.createElement(De,{clientParams:r,isLargeScreen:E,handlePlayerName:e=>{l(t=>{t.playerName=e.slice(0,9)})},handleDuration:e=>{l(t=>{t.timeControl.duration=e})},handleIncrement:e=>{l(t=>{t.timeControl.increment=e})},handleIsPublic:e=>{l(t=>{t.isPublic=e}),n("isPublic",e?"true":"false",{path:"/"})},handleNumRows:e=>{l(t=>{const n=t.boardSettings.dims[0];t.boardSettings.dims[0]=e;for(let a=0;a<2;a++){let o=t.boardSettings.startPos[a][0];(o>=e-1||o===n-1)&&(t.boardSettings.startPos[a][0]=e-1);let r=t.boardSettings.goalPos[a][0];(r>=e-1||r===n-1)&&(t.boardSettings.goalPos[a][0]=e-1)}})},handleNumCols:e=>{l(t=>{const n=t.boardSettings.dims[1];t.boardSettings.dims[1]=e;for(let a=0;a<2;a++){let o=t.boardSettings.startPos[a][1];(o>=e-1||o===n-1)&&(t.boardSettings.startPos[a][1]=e-1);let r=t.boardSettings.goalPos[a][1];(r>=e-1||r===n-1)&&(t.boardSettings.goalPos[a][1]=e-1)}})},handleShowMoreOptions:()=>{l(e=>{e.showMoreOptions=!e.showMoreOptions})},handleStartPos:(e,t,n)=>{l(a=>{a.boardSettings.startPos[e][t]=n})},handleGoalPos:(e,t,n)=>{l(a=>{a.boardSettings.goalPos[e][t]=n})},handleJoinCode:e=>{l(t=>{t.joinCode=e})},handleCreateGame:()=>{const e=u(),n=b(),a=k(),o=d();l(r=>{r.clientRole="creator",r.timeControl.duration=e,r.timeControl.increment=n,r.boardSettings=a,r.playerName=o,r.cookieId=t.cookieId||""===t.cookieId?t.cookieId:"undefined",r.hasOngoingGame=!1,r.isGamePageOpen=!0})},handleJoinGame:()=>{const e=d();l(n=>{n.clientRole="joiner",n.playerName=e,n.cookieId=t.cookieId?t.cookieId:"undefined",n.hasOngoingGame=!1,n.isGamePageOpen=!0})},handleRefreshName:()=>{l(e=>{e.playerName=w(9)})},handleToken:e=>{l(t=>{t.token=e}),n("token",e,{path:"/"})},handleCookieId:c}),r.hasOngoingGame&&t.cookieId&&"undefined"!==t.cookieId&&o.a.createElement(g.Row,{className:"valign-wrapper",style:{marginTop:"1rem"}},o.a.createElement(g.Col,{className:"center",s:12},U)),o.a.createElement("div",{style:B},o.a.createElement("div",{style:{gridArea:"showcaseArea"}},$,o.a.createElement(jt,{socket:e,isLargeScreen:E,menuTheme:r.menuTheme,boardTheme:"monochromeBoard",isDarkModeOn:r.isDarkModeOn,handleViewGame:m})),o.a.createElement("div",{style:{gridArea:"tabsArea",height:"100%"}},o.a.createElement(Be,{socket:e,isLargeScreen:E,menuTheme:r.menuTheme,isDarkModeOn:r.isDarkModeOn,recentGames:r.recentGames.games,handleViewGame:m,handleAcceptChallenge:e=>{const n=d();l(a=>{a.joinCode=e,a.clientRole="joiner",a.playerName=n,a.cookieId=t.cookieId?t.cookieId:"undefined",a.hasOngoingGame=!1,a.isGamePageOpen=!0})}}))),J,o.a.createElement("div",{style:{height:V,width:Y,marginLeft:"auto",marginRight:"auto",border:"1px solid "+O(r.menuTheme,"container",r.isDarkModeOn)}},o.a.createElement(He,{isLargeScreen:E,menuTheme:r.menuTheme,isDarkModeOn:r.isDarkModeOn,ranking:r.ranking.playerList}))))},At=function(){console.log("connecting to backend at ".concat("https://wallwars.herokuapp.com/"));var e=Object(a.useState)(d()("https://wallwars.herokuapp.com/")),t=Object(i.a)(e,1)[0];return o.a.createElement(o.a.StrictMode,null,o.a.createElement(u.a,null,o.a.createElement(s.a,null,o.a.createElement(c.d,null,o.a.createElement(c.b,{path:"/wallwars/index.html",exact:!0},o.a.createElement(Bt,{socket:t})),o.a.createElement(c.a,{to:"/wallwars/index.html"})))))};l.a.render(o.a.createElement(At,null),document.getElementById("root"))},71:function(e,t,n){e.exports=n.p+"static/media/blueBgDark.b39b76f7.jfif"},72:function(e,t,n){e.exports=n.p+"static/media/blueBgLight.6108cc32.jfif"},76:function(e,t,n){e.exports=n.p+"static/media/moveSound.6df49e4b.mp3"},80:function(e,t,n){e.exports=n(171)},85:function(e,t,n){}},[[80,1,2]]]);
//# sourceMappingURL=main.1c4e18c5.chunk.js.map